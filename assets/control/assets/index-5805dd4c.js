function VM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var _l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var D={},GM={get exports(){return D},set exports(t){D=t}},wh={},k={},HM={get exports(){return k},set exports(t){k=t}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xu=Symbol.for("react.element"),KM=Symbol.for("react.portal"),qM=Symbol.for("react.fragment"),YM=Symbol.for("react.strict_mode"),QM=Symbol.for("react.profiler"),JM=Symbol.for("react.provider"),XM=Symbol.for("react.context"),ZM=Symbol.for("react.forward_ref"),e3=Symbol.for("react.suspense"),t3=Symbol.for("react.memo"),n3=Symbol.for("react.lazy"),k1=Symbol.iterator;function r3(t){return t===null||typeof t!="object"?null:(t=k1&&t[k1]||t["@@iterator"],typeof t=="function"?t:null)}var nI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rI=Object.assign,iI={};function $a(t,e,n){this.props=t,this.context=e,this.refs=iI,this.updater=n||nI}$a.prototype.isReactComponent={};$a.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$a.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sI(){}sI.prototype=$a.prototype;function $_(t,e,n){this.props=t,this.context=e,this.refs=iI,this.updater=n||nI}var B_=$_.prototype=new sI;B_.constructor=$_;rI(B_,$a.prototype);B_.isPureReactComponent=!0;var x1=Array.isArray,oI=Object.prototype.hasOwnProperty,j_={current:null},aI={key:!0,ref:!0,__self:!0,__source:!0};function lI(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)oI.call(e,r)&&!aI.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Xu,type:t,key:s,ref:o,props:i,_owner:j_.current}}function i3(t,e){return{$$typeof:Xu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function W_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xu}function s3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var N1=/\/+/g;function Dg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?s3(""+t.key):e.toString(36)}function $f(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xu:case KM:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Dg(o,0):r,x1(i)?(n="",t!=null&&(n=t.replace(N1,"$&/")+"/"),$f(i,e,n,"",function(f){return f})):i!=null&&(W_(i)&&(i=i3(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(N1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",x1(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+Dg(s,l);o+=$f(s,e,n,c,i)}else if(c=r3(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+Dg(s,l++),o+=$f(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ff(t,e,n){if(t==null)return t;var r=[],i=0;return $f(t,r,"","",function(s){return e.call(n,s,i++)}),r}function o3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nn={current:null},Bf={transition:null},a3={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:Bf,ReactCurrentOwner:j_};Te.Children={map:ff,forEach:function(t,e,n){ff(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ff(t,function(){e++}),e},toArray:function(t){return ff(t,function(e){return e})||[]},only:function(t){if(!W_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=$a;Te.Fragment=qM;Te.Profiler=QM;Te.PureComponent=$_;Te.StrictMode=YM;Te.Suspense=e3;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a3;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rI({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=j_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)oI.call(e,c)&&!aI.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:Xu,type:t.type,key:i,ref:s,props:r,_owner:o}};Te.createContext=function(t){return t={$$typeof:XM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:JM,_context:t},t.Consumer=t};Te.createElement=lI;Te.createFactory=function(t){var e=lI.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:ZM,render:t}};Te.isValidElement=W_;Te.lazy=function(t){return{$$typeof:n3,_payload:{_status:-1,_result:t},_init:o3}};Te.memo=function(t,e){return{$$typeof:t3,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Bf.transition;Bf.transition={};try{t()}finally{Bf.transition=e}};Te.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Te.useCallback=function(t,e){return nn.current.useCallback(t,e)};Te.useContext=function(t){return nn.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return nn.current.useDeferredValue(t)};Te.useEffect=function(t,e){return nn.current.useEffect(t,e)};Te.useId=function(){return nn.current.useId()};Te.useImperativeHandle=function(t,e,n){return nn.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return nn.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return nn.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return nn.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return nn.current.useReducer(t,e,n)};Te.useRef=function(t){return nn.current.useRef(t)};Te.useState=function(t){return nn.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return nn.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return nn.current.useTransition()};Te.version="18.2.0";(function(t){t.exports=Te})(HM);const _e=tI(k),cd=VM({__proto__:null,default:_e},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l3=k,u3=Symbol.for("react.element"),c3=Symbol.for("react.fragment"),f3=Object.prototype.hasOwnProperty,d3=l3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h3={key:!0,ref:!0,__self:!0,__source:!0};function uI(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)f3.call(e,r)&&!h3.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:u3,type:t,key:s,ref:o,props:i,_owner:d3.current}}wh.Fragment=c3;wh.jsx=uI;wh.jsxs=uI;(function(t){t.exports=wh})(GM);var zm={},Vm={},p3={get exports(){return Vm},set exports(t){Vm=t}},Dn={},Gm={},g3={get exports(){return Gm},set exports(t){Gm=t}},cI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,ee){var re=Y.length;Y.push(ee);e:for(;0<re;){var se=re-1>>>1,De=Y[se];if(0<i(De,ee))Y[se]=ee,Y[re]=De,re=se;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ee=Y[0],re=Y.pop();if(re!==ee){Y[0]=re;e:for(var se=0,De=Y.length,jr=De>>>1;se<jr;){var Ht=2*(se+1)-1,Kt=Y[Ht],Mt=Ht+1,Wr=Y[Mt];if(0>i(Kt,re))Mt<De&&0>i(Wr,Kt)?(Y[se]=Wr,Y[Mt]=re,se=Mt):(Y[se]=Kt,Y[Ht]=re,se=Ht);else if(Mt<De&&0>i(Wr,re))Y[se]=Wr,Y[Mt]=re,se=Mt;else break e}}return ee}function i(Y,ee){var re=Y.sortIndex-ee.sortIndex;return re!==0?re:Y.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],f=[],h=1,p=null,m=3,y=!1,T=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Y){for(var ee=n(f);ee!==null;){if(ee.callback===null)r(f);else if(ee.startTime<=Y)r(f),ee.sortIndex=ee.expirationTime,e(c,ee);else break;ee=n(f)}}function x(Y){if(C=!1,I(Y),!T)if(n(c)!==null)T=!0,xt(M);else{var ee=n(f);ee!==null&&Je(x,ee.startTime-Y)}}function M(Y,ee){T=!1,C&&(C=!1,v(Q),Q=-1),y=!0;var re=m;try{for(I(ee),p=n(c);p!==null&&(!(p.expirationTime>ee)||Y&&!pe());){var se=p.callback;if(typeof se=="function"){p.callback=null,m=p.priorityLevel;var De=se(p.expirationTime<=ee);ee=t.unstable_now(),typeof De=="function"?p.callback=De:p===n(c)&&r(c),I(ee)}else r(c);p=n(c)}if(p!==null)var jr=!0;else{var Ht=n(f);Ht!==null&&Je(x,Ht.startTime-ee),jr=!1}return jr}finally{p=null,m=re,y=!1}}var W=!1,B=null,Q=-1,q=5,H=-1;function pe(){return!(t.unstable_now()-H<q)}function Ue(){if(B!==null){var Y=t.unstable_now();H=Y;var ee=!0;try{ee=B(!0,Y)}finally{ee?ot():(W=!1,B=null)}}else W=!1}var ot;if(typeof E=="function")ot=function(){E(Ue)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Ce=we.port2;we.port1.onmessage=Ue,ot=function(){Ce.postMessage(null)}}else ot=function(){A(Ue,0)};function xt(Y){B=Y,W||(W=!0,ot())}function Je(Y,ee){Q=A(function(){Y(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){T||y||(T=!0,xt(M))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(Y){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var re=m;m=ee;try{return Y()}finally{m=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,ee){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var re=m;m=Y;try{return ee()}finally{m=re}},t.unstable_scheduleCallback=function(Y,ee,re){var se=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?se+re:se):re=se,Y){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=re+De,Y={id:h++,callback:ee,priorityLevel:Y,startTime:re,expirationTime:De,sortIndex:-1},re>se?(Y.sortIndex=re,e(f,Y),n(c)===null&&Y===n(f)&&(C?(v(Q),Q=-1):C=!0,Je(x,re-se))):(Y.sortIndex=De,e(c,Y),T||y||(T=!0,xt(M))),Y},t.unstable_shouldYield=pe,t.unstable_wrapCallback=function(Y){var ee=m;return function(){var re=m;m=ee;try{return Y.apply(this,arguments)}finally{m=re}}}})(cI);(function(t){t.exports=cI})(g3);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fI=k,On=Gm;function V(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dI=new Set,hu={};function go(t,e){Ea(t,e),Ea(t+"Capture",e)}function Ea(t,e){for(hu[t]=e,t=0;t<e.length;t++)dI.add(e[t])}var ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hm=Object.prototype.hasOwnProperty,m3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O1={},P1={};function v3(t){return Hm.call(P1,t)?!0:Hm.call(O1,t)?!1:m3.test(t)?P1[t]=!0:(O1[t]=!0,!1)}function _3(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function y3(t,e,n,r){if(e===null||typeof e>"u"||_3(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ft[t]=new rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ft[e]=new rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ft[t]=new rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ft[t]=new rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ft[t]=new rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ft[t]=new rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ft[t]=new rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ft[t]=new rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ft[t]=new rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var z_=/[\-:]([a-z])/g;function V_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(z_,V_);Ft[e]=new rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(z_,V_);Ft[e]=new rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(z_,V_);Ft[e]=new rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ft[t]=new rn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ft.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ft[t]=new rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function G_(t,e,n,r){var i=Ft.hasOwnProperty(e)?Ft[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(y3(e,n,i,r)&&(n=null),r||i===null?v3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var wi=fI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,df=Symbol.for("react.element"),Go=Symbol.for("react.portal"),Ho=Symbol.for("react.fragment"),H_=Symbol.for("react.strict_mode"),Km=Symbol.for("react.profiler"),hI=Symbol.for("react.provider"),pI=Symbol.for("react.context"),K_=Symbol.for("react.forward_ref"),qm=Symbol.for("react.suspense"),Ym=Symbol.for("react.suspense_list"),q_=Symbol.for("react.memo"),Li=Symbol.for("react.lazy"),gI=Symbol.for("react.offscreen"),D1=Symbol.iterator;function yl(t){return t===null||typeof t!="object"?null:(t=D1&&t[D1]||t["@@iterator"],typeof t=="function"?t:null)}var st=Object.assign,Lg;function $l(t){if(Lg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lg=e&&e[1]||""}return`
`+Lg+t}var Fg=!1;function Mg(t,e){if(!t||Fg)return"";Fg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Fg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$l(t):""}function w3(t){switch(t.tag){case 5:return $l(t.type);case 16:return $l("Lazy");case 13:return $l("Suspense");case 19:return $l("SuspenseList");case 0:case 2:case 15:return t=Mg(t.type,!1),t;case 11:return t=Mg(t.type.render,!1),t;case 1:return t=Mg(t.type,!0),t;default:return""}}function Qm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ho:return"Fragment";case Go:return"Portal";case Km:return"Profiler";case H_:return"StrictMode";case qm:return"Suspense";case Ym:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pI:return(t.displayName||"Context")+".Consumer";case hI:return(t._context.displayName||"Context")+".Provider";case K_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case q_:return e=t.displayName||null,e!==null?e:Qm(t.type)||"Memo";case Li:e=t._payload,t=t._init;try{return Qm(t(e))}catch{}}return null}function E3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qm(e);case 8:return e===H_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ps(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function S3(t){var e=mI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hf(t){t._valueTracker||(t._valueTracker=S3(t))}function vI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jm(t,e){var n=e.checked;return st({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function L1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ps(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _I(t,e){e=e.checked,e!=null&&G_(t,"checked",e,!1)}function Xm(t,e){_I(t,e);var n=ps(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zm(t,e.type,ps(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function F1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zm(t,e,n){(e!=="number"||fd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bl=Array.isArray;function la(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ps(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ev(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(V(91));return st({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function M1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(V(92));if(Bl(n)){if(1<n.length)throw Error(V(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ps(n)}}function yI(t,e){var n=ps(e.value),r=ps(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function U1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pf,EI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pf=pf||document.createElement("div"),pf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},b3=["Webkit","ms","Moz","O"];Object.keys(Ql).forEach(function(t){b3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ql[e]=Ql[t]})});function SI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ql.hasOwnProperty(t)&&Ql[t]?(""+e).trim():e+"px"}function bI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=SI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var C3=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nv(t,e){if(e){if(C3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(V(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(V(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(V(61))}if(e.style!=null&&typeof e.style!="object")throw Error(V(62))}}function rv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iv=null;function Y_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sv=null,ua=null,ca=null;function $1(t){if(t=tc(t)){if(typeof sv!="function")throw Error(V(280));var e=t.stateNode;e&&(e=Ih(e),sv(t.stateNode,t.type,e))}}function CI(t){ua?ca?ca.push(t):ca=[t]:ua=t}function II(){if(ua){var t=ua,e=ca;if(ca=ua=null,$1(t),e)for(t=0;t<e.length;t++)$1(e[t])}}function TI(t,e){return t(e)}function AI(){}var Ug=!1;function RI(t,e,n){if(Ug)return t(e,n);Ug=!0;try{return TI(t,e,n)}finally{Ug=!1,(ua!==null||ca!==null)&&(AI(),II())}}function gu(t,e){var n=t.stateNode;if(n===null)return null;var r=Ih(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(V(231,e,typeof n));return n}var ov=!1;if(ci)try{var wl={};Object.defineProperty(wl,"passive",{get:function(){ov=!0}}),window.addEventListener("test",wl,wl),window.removeEventListener("test",wl,wl)}catch{ov=!1}function I3(t,e,n,r,i,s,o,l,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(h){this.onError(h)}}var Jl=!1,dd=null,hd=!1,av=null,T3={onError:function(t){Jl=!0,dd=t}};function A3(t,e,n,r,i,s,o,l,c){Jl=!1,dd=null,I3.apply(T3,arguments)}function R3(t,e,n,r,i,s,o,l,c){if(A3.apply(this,arguments),Jl){if(Jl){var f=dd;Jl=!1,dd=null}else throw Error(V(198));hd||(hd=!0,av=f)}}function mo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function B1(t){if(mo(t)!==t)throw Error(V(188))}function k3(t){var e=t.alternate;if(!e){if(e=mo(t),e===null)throw Error(V(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return B1(i),t;if(s===r)return B1(i),e;s=s.sibling}throw Error(V(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(V(189))}}if(n.alternate!==r)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?t:e}function xI(t){return t=k3(t),t!==null?NI(t):null}function NI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=NI(t);if(e!==null)return e;t=t.sibling}return null}var OI=On.unstable_scheduleCallback,j1=On.unstable_cancelCallback,x3=On.unstable_shouldYield,N3=On.unstable_requestPaint,dt=On.unstable_now,O3=On.unstable_getCurrentPriorityLevel,Q_=On.unstable_ImmediatePriority,PI=On.unstable_UserBlockingPriority,pd=On.unstable_NormalPriority,P3=On.unstable_LowPriority,DI=On.unstable_IdlePriority,Eh=null,Or=null;function D3(t){if(Or&&typeof Or.onCommitFiberRoot=="function")try{Or.onCommitFiberRoot(Eh,t,void 0,(t.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:M3,L3=Math.log,F3=Math.LN2;function M3(t){return t>>>=0,t===0?32:31-(L3(t)/F3|0)|0}var gf=64,mf=4194304;function jl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=jl(l):(s&=o,s!==0&&(r=jl(s)))}else o=n&~i,o!==0?r=jl(o):s!==0&&(r=jl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vr(e),i=1<<n,r|=t[n],e&=~i;return r}function U3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $3(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-vr(s),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=U3(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function lv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LI(){var t=gf;return gf<<=1,!(gf&4194240)&&(gf=64),t}function $g(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vr(e),t[e]=n}function B3(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function J_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Fe=0;function FI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var MI,X_,UI,$I,BI,uv=!1,vf=[],Ji=null,Xi=null,Zi=null,mu=new Map,vu=new Map,Ui=[],j3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function W1(t,e){switch(t){case"focusin":case"focusout":Ji=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":mu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vu.delete(e.pointerId)}}function El(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=tc(e),e!==null&&X_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function W3(t,e,n,r,i){switch(e){case"focusin":return Ji=El(Ji,t,e,n,r,i),!0;case"dragenter":return Xi=El(Xi,t,e,n,r,i),!0;case"mouseover":return Zi=El(Zi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return mu.set(s,El(mu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,vu.set(s,El(vu.get(s)||null,t,e,n,r,i)),!0}return!1}function jI(t){var e=Vs(t.target);if(e!==null){var n=mo(e);if(n!==null){if(e=n.tag,e===13){if(e=kI(n),e!==null){t.blockedOn=e,BI(t.priority,function(){UI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);iv=r,n.target.dispatchEvent(r),iv=null}else return e=tc(n),e!==null&&X_(e),t.blockedOn=n,!1;e.shift()}return!0}function z1(t,e,n){jf(t)&&n.delete(e)}function z3(){uv=!1,Ji!==null&&jf(Ji)&&(Ji=null),Xi!==null&&jf(Xi)&&(Xi=null),Zi!==null&&jf(Zi)&&(Zi=null),mu.forEach(z1),vu.forEach(z1)}function Sl(t,e){t.blockedOn===e&&(t.blockedOn=null,uv||(uv=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,z3)))}function _u(t){function e(i){return Sl(i,t)}if(0<vf.length){Sl(vf[0],t);for(var n=1;n<vf.length;n++){var r=vf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ji!==null&&Sl(Ji,t),Xi!==null&&Sl(Xi,t),Zi!==null&&Sl(Zi,t),mu.forEach(e),vu.forEach(e),n=0;n<Ui.length;n++)r=Ui[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ui.length&&(n=Ui[0],n.blockedOn===null);)jI(n),n.blockedOn===null&&Ui.shift()}var fa=wi.ReactCurrentBatchConfig,md=!0;function V3(t,e,n,r){var i=Fe,s=fa.transition;fa.transition=null;try{Fe=1,Z_(t,e,n,r)}finally{Fe=i,fa.transition=s}}function G3(t,e,n,r){var i=Fe,s=fa.transition;fa.transition=null;try{Fe=4,Z_(t,e,n,r)}finally{Fe=i,fa.transition=s}}function Z_(t,e,n,r){if(md){var i=cv(t,e,n,r);if(i===null)Yg(t,e,r,vd,n),W1(t,r);else if(W3(i,t,e,n,r))r.stopPropagation();else if(W1(t,r),e&4&&-1<j3.indexOf(t)){for(;i!==null;){var s=tc(i);if(s!==null&&MI(s),s=cv(t,e,n,r),s===null&&Yg(t,e,r,vd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Yg(t,e,r,null,n)}}var vd=null;function cv(t,e,n,r){if(vd=null,t=Y_(r),t=Vs(t),t!==null)if(e=mo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vd=t,null}function WI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(O3()){case Q_:return 1;case PI:return 4;case pd:case P3:return 16;case DI:return 536870912;default:return 16}default:return 16}}var Gi=null,e0=null,Wf=null;function zI(){if(Wf)return Wf;var t,e=e0,n=e.length,r,i="value"in Gi?Gi.value:Gi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Wf=i.slice(t,1<r?1-r:void 0)}function zf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _f(){return!0}function V1(){return!1}function Ln(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_f:V1,this.isPropagationStopped=V1,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_f)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_f)},persist:function(){},isPersistent:_f}),e}var Ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},t0=Ln(Ba),ec=st({},Ba,{view:0,detail:0}),H3=Ln(ec),Bg,jg,bl,Sh=st({},ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:n0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bl&&(bl&&t.type==="mousemove"?(Bg=t.screenX-bl.screenX,jg=t.screenY-bl.screenY):jg=Bg=0,bl=t),Bg)},movementY:function(t){return"movementY"in t?t.movementY:jg}}),G1=Ln(Sh),K3=st({},Sh,{dataTransfer:0}),q3=Ln(K3),Y3=st({},ec,{relatedTarget:0}),Wg=Ln(Y3),Q3=st({},Ba,{animationName:0,elapsedTime:0,pseudoElement:0}),J3=Ln(Q3),X3=st({},Ba,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Z3=Ln(X3),e4=st({},Ba,{data:0}),H1=Ln(e4),t4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=r4[t])?!!e[t]:!1}function n0(){return i4}var s4=st({},ec,{key:function(t){if(t.key){var e=t4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?n4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:n0,charCode:function(t){return t.type==="keypress"?zf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),o4=Ln(s4),a4=st({},Sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K1=Ln(a4),l4=st({},ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:n0}),u4=Ln(l4),c4=st({},Ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),f4=Ln(c4),d4=st({},Sh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),h4=Ln(d4),p4=[9,13,27,32],r0=ci&&"CompositionEvent"in window,Xl=null;ci&&"documentMode"in document&&(Xl=document.documentMode);var g4=ci&&"TextEvent"in window&&!Xl,VI=ci&&(!r0||Xl&&8<Xl&&11>=Xl),q1=String.fromCharCode(32),Y1=!1;function GI(t,e){switch(t){case"keyup":return p4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ko=!1;function m4(t,e){switch(t){case"compositionend":return HI(e);case"keypress":return e.which!==32?null:(Y1=!0,q1);case"textInput":return t=e.data,t===q1&&Y1?null:t;default:return null}}function v4(t,e){if(Ko)return t==="compositionend"||!r0&&GI(t,e)?(t=zI(),Wf=e0=Gi=null,Ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return VI&&e.locale!=="ko"?null:e.data;default:return null}}var _4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Q1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_4[t.type]:e==="textarea"}function KI(t,e,n,r){CI(r),e=_d(e,"onChange"),0<e.length&&(n=new t0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zl=null,yu=null;function y4(t){iT(t,0)}function bh(t){var e=Qo(t);if(vI(e))return t}function w4(t,e){if(t==="change")return e}var qI=!1;if(ci){var zg;if(ci){var Vg="oninput"in document;if(!Vg){var J1=document.createElement("div");J1.setAttribute("oninput","return;"),Vg=typeof J1.oninput=="function"}zg=Vg}else zg=!1;qI=zg&&(!document.documentMode||9<document.documentMode)}function X1(){Zl&&(Zl.detachEvent("onpropertychange",YI),yu=Zl=null)}function YI(t){if(t.propertyName==="value"&&bh(yu)){var e=[];KI(e,yu,t,Y_(t)),RI(y4,e)}}function E4(t,e,n){t==="focusin"?(X1(),Zl=e,yu=n,Zl.attachEvent("onpropertychange",YI)):t==="focusout"&&X1()}function S4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bh(yu)}function b4(t,e){if(t==="click")return bh(e)}function C4(t,e){if(t==="input"||t==="change")return bh(e)}function I4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wr=typeof Object.is=="function"?Object.is:I4;function wu(t,e){if(wr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Hm.call(e,i)||!wr(t[i],e[i]))return!1}return!0}function Z1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function eS(t,e){var n=Z1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Z1(n)}}function QI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?QI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function JI(){for(var t=window,e=fd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fd(t.document)}return e}function i0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function T4(t){var e=JI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&QI(n.ownerDocument.documentElement,n)){if(r!==null&&i0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=eS(n,s);var o=eS(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var A4=ci&&"documentMode"in document&&11>=document.documentMode,qo=null,fv=null,eu=null,dv=!1;function tS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dv||qo==null||qo!==fd(r)||(r=qo,"selectionStart"in r&&i0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),eu&&wu(eu,r)||(eu=r,r=_d(fv,"onSelect"),0<r.length&&(e=new t0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qo)))}function yf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yo={animationend:yf("Animation","AnimationEnd"),animationiteration:yf("Animation","AnimationIteration"),animationstart:yf("Animation","AnimationStart"),transitionend:yf("Transition","TransitionEnd")},Gg={},XI={};ci&&(XI=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function Ch(t){if(Gg[t])return Gg[t];if(!Yo[t])return t;var e=Yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in XI)return Gg[t]=e[n];return t}var ZI=Ch("animationend"),eT=Ch("animationiteration"),tT=Ch("animationstart"),nT=Ch("transitionend"),rT=new Map,nS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Es(t,e){rT.set(t,e),go(e,[t])}for(var Hg=0;Hg<nS.length;Hg++){var Kg=nS[Hg],R4=Kg.toLowerCase(),k4=Kg[0].toUpperCase()+Kg.slice(1);Es(R4,"on"+k4)}Es(ZI,"onAnimationEnd");Es(eT,"onAnimationIteration");Es(tT,"onAnimationStart");Es("dblclick","onDoubleClick");Es("focusin","onFocus");Es("focusout","onBlur");Es(nT,"onTransitionEnd");Ea("onMouseEnter",["mouseout","mouseover"]);Ea("onMouseLeave",["mouseout","mouseover"]);Ea("onPointerEnter",["pointerout","pointerover"]);Ea("onPointerLeave",["pointerout","pointerover"]);go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));go("onBeforeInput",["compositionend","keypress","textInput","paste"]);go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wl));function rS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,R3(r,e,void 0,t),t.currentTarget=null}function iT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,f=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;rS(i,l,f),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,f=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;rS(i,l,f),s=c}}}if(hd)throw t=av,hd=!1,av=null,t}function Ke(t,e){var n=e[vv];n===void 0&&(n=e[vv]=new Set);var r=t+"__bubble";n.has(r)||(sT(e,t,2,!1),n.add(r))}function qg(t,e,n){var r=0;e&&(r|=4),sT(n,t,r,e)}var wf="_reactListening"+Math.random().toString(36).slice(2);function Eu(t){if(!t[wf]){t[wf]=!0,dI.forEach(function(n){n!=="selectionchange"&&(x4.has(n)||qg(n,!1,t),qg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wf]||(e[wf]=!0,qg("selectionchange",!1,e))}}function sT(t,e,n,r){switch(WI(e)){case 1:var i=V3;break;case 4:i=G3;break;default:i=Z_}n=i.bind(null,e,n,t),i=void 0,!ov||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Yg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Vs(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}RI(function(){var f=s,h=Y_(n),p=[];e:{var m=rT.get(t);if(m!==void 0){var y=t0,T=t;switch(t){case"keypress":if(zf(n)===0)break e;case"keydown":case"keyup":y=o4;break;case"focusin":T="focus",y=Wg;break;case"focusout":T="blur",y=Wg;break;case"beforeblur":case"afterblur":y=Wg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=G1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=q3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=u4;break;case ZI:case eT:case tT:y=J3;break;case nT:y=f4;break;case"scroll":y=H3;break;case"wheel":y=h4;break;case"copy":case"cut":case"paste":y=Z3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=K1}var C=(e&4)!==0,A=!C&&t==="scroll",v=C?m!==null?m+"Capture":null:m;C=[];for(var E=f,I;E!==null;){I=E;var x=I.stateNode;if(I.tag===5&&x!==null&&(I=x,v!==null&&(x=gu(E,v),x!=null&&C.push(Su(E,x,I)))),A)break;E=E.return}0<C.length&&(m=new y(m,T,null,n,h),p.push({event:m,listeners:C}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==iv&&(T=n.relatedTarget||n.fromElement)&&(Vs(T)||T[fi]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(T=n.relatedTarget||n.toElement,y=f,T=T?Vs(T):null,T!==null&&(A=mo(T),T!==A||T.tag!==5&&T.tag!==6)&&(T=null)):(y=null,T=f),y!==T)){if(C=G1,x="onMouseLeave",v="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(C=K1,x="onPointerLeave",v="onPointerEnter",E="pointer"),A=y==null?m:Qo(y),I=T==null?m:Qo(T),m=new C(x,E+"leave",y,n,h),m.target=A,m.relatedTarget=I,x=null,Vs(h)===f&&(C=new C(v,E+"enter",T,n,h),C.target=I,C.relatedTarget=A,x=C),A=x,y&&T)t:{for(C=y,v=T,E=0,I=C;I;I=Fo(I))E++;for(I=0,x=v;x;x=Fo(x))I++;for(;0<E-I;)C=Fo(C),E--;for(;0<I-E;)v=Fo(v),I--;for(;E--;){if(C===v||v!==null&&C===v.alternate)break t;C=Fo(C),v=Fo(v)}C=null}else C=null;y!==null&&iS(p,m,y,C,!1),T!==null&&A!==null&&iS(p,A,T,C,!0)}}e:{if(m=f?Qo(f):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var M=w4;else if(Q1(m))if(qI)M=C4;else{M=S4;var W=E4}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=b4);if(M&&(M=M(t,f))){KI(p,M,n,h);break e}W&&W(t,m,f),t==="focusout"&&(W=m._wrapperState)&&W.controlled&&m.type==="number"&&Zm(m,"number",m.value)}switch(W=f?Qo(f):window,t){case"focusin":(Q1(W)||W.contentEditable==="true")&&(qo=W,fv=f,eu=null);break;case"focusout":eu=fv=qo=null;break;case"mousedown":dv=!0;break;case"contextmenu":case"mouseup":case"dragend":dv=!1,tS(p,n,h);break;case"selectionchange":if(A4)break;case"keydown":case"keyup":tS(p,n,h)}var B;if(r0)e:{switch(t){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else Ko?GI(t,n)&&(Q="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Q="onCompositionStart");Q&&(VI&&n.locale!=="ko"&&(Ko||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&Ko&&(B=zI()):(Gi=h,e0="value"in Gi?Gi.value:Gi.textContent,Ko=!0)),W=_d(f,Q),0<W.length&&(Q=new H1(Q,t,null,n,h),p.push({event:Q,listeners:W}),B?Q.data=B:(B=HI(n),B!==null&&(Q.data=B)))),(B=g4?m4(t,n):v4(t,n))&&(f=_d(f,"onBeforeInput"),0<f.length&&(h=new H1("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:f}),h.data=B))}iT(p,e)})}function Su(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _d(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=gu(t,n),s!=null&&r.unshift(Su(t,s,i)),s=gu(t,e),s!=null&&r.push(Su(t,s,i))),t=t.return}return r}function Fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function iS(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,f=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&f!==null&&(l=f,i?(c=gu(n,s),c!=null&&o.unshift(Su(n,c,l))):i||(c=gu(n,s),c!=null&&o.push(Su(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var N4=/\r\n?/g,O4=/\u0000|\uFFFD/g;function sS(t){return(typeof t=="string"?t:""+t).replace(N4,`
`).replace(O4,"")}function Ef(t,e,n){if(e=sS(e),sS(t)!==e&&n)throw Error(V(425))}function yd(){}var hv=null,pv=null;function gv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mv=typeof setTimeout=="function"?setTimeout:void 0,P4=typeof clearTimeout=="function"?clearTimeout:void 0,oS=typeof Promise=="function"?Promise:void 0,D4=typeof queueMicrotask=="function"?queueMicrotask:typeof oS<"u"?function(t){return oS.resolve(null).then(t).catch(L4)}:mv;function L4(t){setTimeout(function(){throw t})}function Qg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),_u(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);_u(e)}function es(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function aS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ja=Math.random().toString(36).slice(2),xr="__reactFiber$"+ja,bu="__reactProps$"+ja,fi="__reactContainer$"+ja,vv="__reactEvents$"+ja,F4="__reactListeners$"+ja,M4="__reactHandles$"+ja;function Vs(t){var e=t[xr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fi]||n[xr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=aS(t);t!==null;){if(n=t[xr])return n;t=aS(t)}return e}t=n,n=t.parentNode}return null}function tc(t){return t=t[xr]||t[fi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(V(33))}function Ih(t){return t[bu]||null}var _v=[],Jo=-1;function Ss(t){return{current:t}}function Qe(t){0>Jo||(t.current=_v[Jo],_v[Jo]=null,Jo--)}function Ge(t,e){Jo++,_v[Jo]=t.current,t.current=e}var gs={},Vt=Ss(gs),mn=Ss(!1),to=gs;function Sa(t,e){var n=t.type.contextTypes;if(!n)return gs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function vn(t){return t=t.childContextTypes,t!=null}function wd(){Qe(mn),Qe(Vt)}function lS(t,e,n){if(Vt.current!==gs)throw Error(V(168));Ge(Vt,e),Ge(mn,n)}function oT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(V(108,E3(t)||"Unknown",i));return st({},n,r)}function Ed(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gs,to=Vt.current,Ge(Vt,t),Ge(mn,mn.current),!0}function uS(t,e,n){var r=t.stateNode;if(!r)throw Error(V(169));n?(t=oT(t,e,to),r.__reactInternalMemoizedMergedChildContext=t,Qe(mn),Qe(Vt),Ge(Vt,t)):Qe(mn),Ge(mn,n)}var ti=null,Th=!1,Jg=!1;function aT(t){ti===null?ti=[t]:ti.push(t)}function U4(t){Th=!0,aT(t)}function bs(){if(!Jg&&ti!==null){Jg=!0;var t=0,e=Fe;try{var n=ti;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ti=null,Th=!1}catch(i){throw ti!==null&&(ti=ti.slice(t+1)),OI(Q_,bs),i}finally{Fe=e,Jg=!1}}return null}var Xo=[],Zo=0,Sd=null,bd=0,Hn=[],Kn=0,no=null,ri=1,ii="";function $s(t,e){Xo[Zo++]=bd,Xo[Zo++]=Sd,Sd=t,bd=e}function lT(t,e,n){Hn[Kn++]=ri,Hn[Kn++]=ii,Hn[Kn++]=no,no=t;var r=ri;t=ii;var i=32-vr(r)-1;r&=~(1<<i),n+=1;var s=32-vr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ri=1<<32-vr(e)+i|n<<i|r,ii=s+t}else ri=1<<s|n<<i|r,ii=t}function s0(t){t.return!==null&&($s(t,1),lT(t,1,0))}function o0(t){for(;t===Sd;)Sd=Xo[--Zo],Xo[Zo]=null,bd=Xo[--Zo],Xo[Zo]=null;for(;t===no;)no=Hn[--Kn],Hn[Kn]=null,ii=Hn[--Kn],Hn[Kn]=null,ri=Hn[--Kn],Hn[Kn]=null}var xn=null,Rn=null,et=!1,hr=null;function uT(t,e){var n=Yn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xn=t,Rn=es(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xn=t,Rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=no!==null?{id:ri,overflow:ii}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xn=t,Rn=null,!0):!1;default:return!1}}function yv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wv(t){if(et){var e=Rn;if(e){var n=e;if(!cS(t,e)){if(yv(t))throw Error(V(418));e=es(n.nextSibling);var r=xn;e&&cS(t,e)?uT(r,n):(t.flags=t.flags&-4097|2,et=!1,xn=t)}}else{if(yv(t))throw Error(V(418));t.flags=t.flags&-4097|2,et=!1,xn=t}}}function fS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xn=t}function Sf(t){if(t!==xn)return!1;if(!et)return fS(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gv(t.type,t.memoizedProps)),e&&(e=Rn)){if(yv(t))throw cT(),Error(V(418));for(;e;)uT(t,e),e=es(e.nextSibling)}if(fS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(V(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rn=es(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rn=null}}else Rn=xn?es(t.stateNode.nextSibling):null;return!0}function cT(){for(var t=Rn;t;)t=es(t.nextSibling)}function ba(){Rn=xn=null,et=!1}function a0(t){hr===null?hr=[t]:hr.push(t)}var $4=wi.ReactCurrentBatchConfig;function cr(t,e){if(t&&t.defaultProps){e=st({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Cd=Ss(null),Id=null,ea=null,l0=null;function u0(){l0=ea=Id=null}function c0(t){var e=Cd.current;Qe(Cd),t._currentValue=e}function Ev(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function da(t,e){Id=t,l0=ea=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pn=!0),t.firstContext=null)}function Jn(t){var e=t._currentValue;if(l0!==t)if(t={context:t,memoizedValue:e,next:null},ea===null){if(Id===null)throw Error(V(308));ea=t,Id.dependencies={lanes:0,firstContext:t}}else ea=ea.next=t;return e}var Gs=null;function f0(t){Gs===null?Gs=[t]:Gs.push(t)}function fT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,f0(e)):(n.next=i.next,i.next=n),e.interleaved=n,di(t,r)}function di(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fi=!1;function d0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function li(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ts(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,di(t,n)}return i=r.interleaved,i===null?(e.next=e,f0(r)):(e.next=i.next,i.next=e),r.interleaved=e,di(t,n)}function Vf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,J_(t,n)}}function dS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Td(t,e,n,r){var i=t.updateQueue;Fi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,f=c.next;c.next=null,o===null?s=f:o.next=f,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=f:l.next=f,h.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;o=0,h=f=c=null,l=s;do{var m=l.lane,y=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var T=t,C=l;switch(m=e,y=n,C.tag){case 1:if(T=C.payload,typeof T=="function"){p=T.call(y,p,m);break e}p=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=C.payload,m=typeof T=="function"?T.call(y,p,m):T,m==null)break e;p=st({},p,m);break e;case 2:Fi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(f=h=y,c=p):h=h.next=y,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(h===null&&(c=p),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);io|=o,t.lanes=o,t.memoizedState=p}}function hS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(V(191,i));i.call(r)}}}var hT=new fI.Component().refs;function Sv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:st({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ah={isMounted:function(t){return(t=t._reactInternals)?mo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tn(),i=rs(t),s=li(r,i);s.payload=e,n!=null&&(s.callback=n),e=ts(t,s,i),e!==null&&(_r(e,t,i,r),Vf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tn(),i=rs(t),s=li(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ts(t,s,i),e!==null&&(_r(e,t,i,r),Vf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tn(),r=rs(t),i=li(n,r);i.tag=2,e!=null&&(i.callback=e),e=ts(t,i,r),e!==null&&(_r(e,t,r,n),Vf(e,t,r))}};function pS(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!wu(n,r)||!wu(i,s):!0}function pT(t,e,n){var r=!1,i=gs,s=e.contextType;return typeof s=="object"&&s!==null?s=Jn(s):(i=vn(e)?to:Vt.current,r=e.contextTypes,s=(r=r!=null)?Sa(t,i):gs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ah,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function gS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ah.enqueueReplaceState(e,e.state,null)}function bv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=hT,d0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Jn(s):(s=vn(e)?to:Vt.current,i.context=Sa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Sv(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ah.enqueueReplaceState(i,i.state,null),Td(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Cl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var r=n.stateNode}if(!r)throw Error(V(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;l===hT&&(l=i.refs={}),o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,t))}return t}function bf(t,e){throw t=Object.prototype.toString.call(e),Error(V(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mS(t){var e=t._init;return e(t._payload)}function gT(t){function e(v,E){if(t){var I=v.deletions;I===null?(v.deletions=[E],v.flags|=16):I.push(E)}}function n(v,E){if(!t)return null;for(;E!==null;)e(v,E),E=E.sibling;return null}function r(v,E){for(v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function i(v,E){return v=is(v,E),v.index=0,v.sibling=null,v}function s(v,E,I){return v.index=I,t?(I=v.alternate,I!==null?(I=I.index,I<E?(v.flags|=2,E):I):(v.flags|=2,E)):(v.flags|=1048576,E)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,E,I,x){return E===null||E.tag!==6?(E=im(I,v.mode,x),E.return=v,E):(E=i(E,I),E.return=v,E)}function c(v,E,I,x){var M=I.type;return M===Ho?h(v,E,I.props.children,x,I.key):E!==null&&(E.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Li&&mS(M)===E.type)?(x=i(E,I.props),x.ref=Cl(v,E,I),x.return=v,x):(x=Qf(I.type,I.key,I.props,null,v.mode,x),x.ref=Cl(v,E,I),x.return=v,x)}function f(v,E,I,x){return E===null||E.tag!==4||E.stateNode.containerInfo!==I.containerInfo||E.stateNode.implementation!==I.implementation?(E=sm(I,v.mode,x),E.return=v,E):(E=i(E,I.children||[]),E.return=v,E)}function h(v,E,I,x,M){return E===null||E.tag!==7?(E=Xs(I,v.mode,x,M),E.return=v,E):(E=i(E,I),E.return=v,E)}function p(v,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return E=im(""+E,v.mode,I),E.return=v,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case df:return I=Qf(E.type,E.key,E.props,null,v.mode,I),I.ref=Cl(v,null,E),I.return=v,I;case Go:return E=sm(E,v.mode,I),E.return=v,E;case Li:var x=E._init;return p(v,x(E._payload),I)}if(Bl(E)||yl(E))return E=Xs(E,v.mode,I,null),E.return=v,E;bf(v,E)}return null}function m(v,E,I,x){var M=E!==null?E.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return M!==null?null:l(v,E,""+I,x);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case df:return I.key===M?c(v,E,I,x):null;case Go:return I.key===M?f(v,E,I,x):null;case Li:return M=I._init,m(v,E,M(I._payload),x)}if(Bl(I)||yl(I))return M!==null?null:h(v,E,I,x,null);bf(v,I)}return null}function y(v,E,I,x,M){if(typeof x=="string"&&x!==""||typeof x=="number")return v=v.get(I)||null,l(E,v,""+x,M);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case df:return v=v.get(x.key===null?I:x.key)||null,c(E,v,x,M);case Go:return v=v.get(x.key===null?I:x.key)||null,f(E,v,x,M);case Li:var W=x._init;return y(v,E,I,W(x._payload),M)}if(Bl(x)||yl(x))return v=v.get(I)||null,h(E,v,x,M,null);bf(E,x)}return null}function T(v,E,I,x){for(var M=null,W=null,B=E,Q=E=0,q=null;B!==null&&Q<I.length;Q++){B.index>Q?(q=B,B=null):q=B.sibling;var H=m(v,B,I[Q],x);if(H===null){B===null&&(B=q);break}t&&B&&H.alternate===null&&e(v,B),E=s(H,E,Q),W===null?M=H:W.sibling=H,W=H,B=q}if(Q===I.length)return n(v,B),et&&$s(v,Q),M;if(B===null){for(;Q<I.length;Q++)B=p(v,I[Q],x),B!==null&&(E=s(B,E,Q),W===null?M=B:W.sibling=B,W=B);return et&&$s(v,Q),M}for(B=r(v,B);Q<I.length;Q++)q=y(B,v,Q,I[Q],x),q!==null&&(t&&q.alternate!==null&&B.delete(q.key===null?Q:q.key),E=s(q,E,Q),W===null?M=q:W.sibling=q,W=q);return t&&B.forEach(function(pe){return e(v,pe)}),et&&$s(v,Q),M}function C(v,E,I,x){var M=yl(I);if(typeof M!="function")throw Error(V(150));if(I=M.call(I),I==null)throw Error(V(151));for(var W=M=null,B=E,Q=E=0,q=null,H=I.next();B!==null&&!H.done;Q++,H=I.next()){B.index>Q?(q=B,B=null):q=B.sibling;var pe=m(v,B,H.value,x);if(pe===null){B===null&&(B=q);break}t&&B&&pe.alternate===null&&e(v,B),E=s(pe,E,Q),W===null?M=pe:W.sibling=pe,W=pe,B=q}if(H.done)return n(v,B),et&&$s(v,Q),M;if(B===null){for(;!H.done;Q++,H=I.next())H=p(v,H.value,x),H!==null&&(E=s(H,E,Q),W===null?M=H:W.sibling=H,W=H);return et&&$s(v,Q),M}for(B=r(v,B);!H.done;Q++,H=I.next())H=y(B,v,Q,H.value,x),H!==null&&(t&&H.alternate!==null&&B.delete(H.key===null?Q:H.key),E=s(H,E,Q),W===null?M=H:W.sibling=H,W=H);return t&&B.forEach(function(Ue){return e(v,Ue)}),et&&$s(v,Q),M}function A(v,E,I,x){if(typeof I=="object"&&I!==null&&I.type===Ho&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case df:e:{for(var M=I.key,W=E;W!==null;){if(W.key===M){if(M=I.type,M===Ho){if(W.tag===7){n(v,W.sibling),E=i(W,I.props.children),E.return=v,v=E;break e}}else if(W.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Li&&mS(M)===W.type){n(v,W.sibling),E=i(W,I.props),E.ref=Cl(v,W,I),E.return=v,v=E;break e}n(v,W);break}else e(v,W);W=W.sibling}I.type===Ho?(E=Xs(I.props.children,v.mode,x,I.key),E.return=v,v=E):(x=Qf(I.type,I.key,I.props,null,v.mode,x),x.ref=Cl(v,E,I),x.return=v,v=x)}return o(v);case Go:e:{for(W=I.key;E!==null;){if(E.key===W)if(E.tag===4&&E.stateNode.containerInfo===I.containerInfo&&E.stateNode.implementation===I.implementation){n(v,E.sibling),E=i(E,I.children||[]),E.return=v,v=E;break e}else{n(v,E);break}else e(v,E);E=E.sibling}E=sm(I,v.mode,x),E.return=v,v=E}return o(v);case Li:return W=I._init,A(v,E,W(I._payload),x)}if(Bl(I))return T(v,E,I,x);if(yl(I))return C(v,E,I,x);bf(v,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,E!==null&&E.tag===6?(n(v,E.sibling),E=i(E,I),E.return=v,v=E):(n(v,E),E=im(I,v.mode,x),E.return=v,v=E),o(v)):n(v,E)}return A}var Ca=gT(!0),mT=gT(!1),nc={},Pr=Ss(nc),Cu=Ss(nc),Iu=Ss(nc);function Hs(t){if(t===nc)throw Error(V(174));return t}function h0(t,e){switch(Ge(Iu,e),Ge(Cu,t),Ge(Pr,nc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tv(e,t)}Qe(Pr),Ge(Pr,e)}function Ia(){Qe(Pr),Qe(Cu),Qe(Iu)}function vT(t){Hs(Iu.current);var e=Hs(Pr.current),n=tv(e,t.type);e!==n&&(Ge(Cu,t),Ge(Pr,n))}function p0(t){Cu.current===t&&(Qe(Pr),Qe(Cu))}var nt=Ss(0);function Ad(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xg=[];function g0(){for(var t=0;t<Xg.length;t++)Xg[t]._workInProgressVersionPrimary=null;Xg.length=0}var Gf=wi.ReactCurrentDispatcher,Zg=wi.ReactCurrentBatchConfig,ro=0,it=null,_t=null,At=null,Rd=!1,tu=!1,Tu=0,B4=0;function Bt(){throw Error(V(321))}function m0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wr(t[n],e[n]))return!1;return!0}function v0(t,e,n,r,i,s){if(ro=s,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gf.current=t===null||t.memoizedState===null?V4:G4,t=n(r,i),tu){s=0;do{if(tu=!1,Tu=0,25<=s)throw Error(V(301));s+=1,At=_t=null,e.updateQueue=null,Gf.current=H4,t=n(r,i)}while(tu)}if(Gf.current=kd,e=_t!==null&&_t.next!==null,ro=0,At=_t=it=null,Rd=!1,e)throw Error(V(300));return t}function _0(){var t=Tu!==0;return Tu=0,t}function Rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?it.memoizedState=At=t:At=At.next=t,At}function Xn(){if(_t===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=At===null?it.memoizedState:At.next;if(e!==null)At=e,_t=t;else{if(t===null)throw Error(V(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},At===null?it.memoizedState=At=t:At=At.next=t}return At}function Au(t,e){return typeof e=="function"?e(t):e}function em(t){var e=Xn(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var r=_t,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,c=null,f=s;do{var h=f.lane;if((ro&h)===h)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var p={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,it.lanes|=h,io|=h}f=f.next}while(f!==null&&f!==s);c===null?o=r:c.next=l,wr(r,e.memoizedState)||(pn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,it.lanes|=s,io|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function tm(t){var e=Xn(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);wr(s,e.memoizedState)||(pn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function _T(){}function yT(t,e){var n=it,r=Xn(),i=e(),s=!wr(r.memoizedState,i);if(s&&(r.memoizedState=i,pn=!0),r=r.queue,y0(ST.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||At!==null&&At.memoizedState.tag&1){if(n.flags|=2048,Ru(9,ET.bind(null,n,r,i,e),void 0,null),kt===null)throw Error(V(349));ro&30||wT(n,e,i)}return i}function wT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ET(t,e,n,r){e.value=n,e.getSnapshot=r,bT(e)&&CT(t)}function ST(t,e,n){return n(function(){bT(e)&&CT(t)})}function bT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wr(t,n)}catch{return!0}}function CT(t){var e=di(t,1);e!==null&&_r(e,t,1,-1)}function vS(t){var e=Rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Au,lastRenderedState:t},e.queue=t,t=t.dispatch=z4.bind(null,it,t),[e.memoizedState,t]}function Ru(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function IT(){return Xn().memoizedState}function Hf(t,e,n,r){var i=Rr();it.flags|=t,i.memoizedState=Ru(1|e,n,void 0,r===void 0?null:r)}function Rh(t,e,n,r){var i=Xn();r=r===void 0?null:r;var s=void 0;if(_t!==null){var o=_t.memoizedState;if(s=o.destroy,r!==null&&m0(r,o.deps)){i.memoizedState=Ru(e,n,s,r);return}}it.flags|=t,i.memoizedState=Ru(1|e,n,s,r)}function _S(t,e){return Hf(8390656,8,t,e)}function y0(t,e){return Rh(2048,8,t,e)}function TT(t,e){return Rh(4,2,t,e)}function AT(t,e){return Rh(4,4,t,e)}function RT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kT(t,e,n){return n=n!=null?n.concat([t]):null,Rh(4,4,RT.bind(null,e,t),n)}function w0(){}function xT(t,e){var n=Xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&m0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function NT(t,e){var n=Xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&m0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function OT(t,e,n){return ro&21?(wr(n,e)||(n=LI(),it.lanes|=n,io|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pn=!0),t.memoizedState=n)}function j4(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=Zg.transition;Zg.transition={};try{t(!1),e()}finally{Fe=n,Zg.transition=r}}function PT(){return Xn().memoizedState}function W4(t,e,n){var r=rs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},DT(t))LT(e,n);else if(n=fT(t,e,n,r),n!==null){var i=tn();_r(n,t,r,i),FT(n,e,r)}}function z4(t,e,n){var r=rs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(DT(t))LT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,wr(l,o)){var c=e.interleaved;c===null?(i.next=i,f0(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=fT(t,e,i,r),n!==null&&(i=tn(),_r(n,t,r,i),FT(n,e,r))}}function DT(t){var e=t.alternate;return t===it||e!==null&&e===it}function LT(t,e){tu=Rd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function FT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,J_(t,n)}}var kd={readContext:Jn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},V4={readContext:Jn,useCallback:function(t,e){return Rr().memoizedState=[t,e===void 0?null:e],t},useContext:Jn,useEffect:_S,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hf(4194308,4,RT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hf(4,2,t,e)},useMemo:function(t,e){var n=Rr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=W4.bind(null,it,t),[r.memoizedState,t]},useRef:function(t){var e=Rr();return t={current:t},e.memoizedState=t},useState:vS,useDebugValue:w0,useDeferredValue:function(t){return Rr().memoizedState=t},useTransition:function(){var t=vS(!1),e=t[0];return t=j4.bind(null,t[1]),Rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=it,i=Rr();if(et){if(n===void 0)throw Error(V(407));n=n()}else{if(n=e(),kt===null)throw Error(V(349));ro&30||wT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,_S(ST.bind(null,r,s,t),[t]),r.flags|=2048,Ru(9,ET.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Rr(),e=kt.identifierPrefix;if(et){var n=ii,r=ri;n=(r&~(1<<32-vr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Tu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=B4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},G4={readContext:Jn,useCallback:xT,useContext:Jn,useEffect:y0,useImperativeHandle:kT,useInsertionEffect:TT,useLayoutEffect:AT,useMemo:NT,useReducer:em,useRef:IT,useState:function(){return em(Au)},useDebugValue:w0,useDeferredValue:function(t){var e=Xn();return OT(e,_t.memoizedState,t)},useTransition:function(){var t=em(Au)[0],e=Xn().memoizedState;return[t,e]},useMutableSource:_T,useSyncExternalStore:yT,useId:PT,unstable_isNewReconciler:!1},H4={readContext:Jn,useCallback:xT,useContext:Jn,useEffect:y0,useImperativeHandle:kT,useInsertionEffect:TT,useLayoutEffect:AT,useMemo:NT,useReducer:tm,useRef:IT,useState:function(){return tm(Au)},useDebugValue:w0,useDeferredValue:function(t){var e=Xn();return _t===null?e.memoizedState=t:OT(e,_t.memoizedState,t)},useTransition:function(){var t=tm(Au)[0],e=Xn().memoizedState;return[t,e]},useMutableSource:_T,useSyncExternalStore:yT,useId:PT,unstable_isNewReconciler:!1};function Ta(t,e){try{var n="",r=e;do n+=w3(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function nm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var K4=typeof WeakMap=="function"?WeakMap:Map;function MT(t,e,n){n=li(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Nd||(Nd=!0,Dv=r),Cv(t,e)},n}function UT(t,e,n){n=li(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Cv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Cv(t,e),typeof r!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function yS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new K4;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=a6.bind(null,t,e,n),e.then(t,t))}function wS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ES(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=li(-1,1),e.tag=2,ts(n,e,1))),n.lanes|=1),t)}var q4=wi.ReactCurrentOwner,pn=!1;function Xt(t,e,n,r){e.child=t===null?mT(e,null,n,r):Ca(e,t.child,n,r)}function SS(t,e,n,r,i){n=n.render;var s=e.ref;return da(e,i),r=v0(t,e,n,r,s,i),n=_0(),t!==null&&!pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,hi(t,e,i)):(et&&n&&s0(e),e.flags|=1,Xt(t,e,r,i),e.child)}function bS(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!R0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$T(t,e,s,r,i)):(t=Qf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:wu,n(o,r)&&t.ref===e.ref)return hi(t,e,i)}return e.flags|=1,t=is(s,r),t.ref=e.ref,t.return=e,e.child=t}function $T(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(wu(s,r)&&t.ref===e.ref)if(pn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(pn=!0);else return e.lanes=t.lanes,hi(t,e,i)}return Iv(t,e,n,r,i)}function BT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(na,An),An|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ge(na,An),An|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ge(na,An),An|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ge(na,An),An|=r;return Xt(t,e,i,n),e.child}function jT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Iv(t,e,n,r,i){var s=vn(n)?to:Vt.current;return s=Sa(e,s),da(e,i),n=v0(t,e,n,r,s,i),r=_0(),t!==null&&!pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,hi(t,e,i)):(et&&r&&s0(e),e.flags|=1,Xt(t,e,n,i),e.child)}function CS(t,e,n,r,i){if(vn(n)){var s=!0;Ed(e)}else s=!1;if(da(e,i),e.stateNode===null)Kf(t,e),pT(e,n,r),bv(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,f=n.contextType;typeof f=="object"&&f!==null?f=Jn(f):(f=vn(n)?to:Vt.current,f=Sa(e,f));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==f)&&gS(e,o,r,f),Fi=!1;var m=e.memoizedState;o.state=m,Td(e,r,o,i),c=e.memoizedState,l!==r||m!==c||mn.current||Fi?(typeof h=="function"&&(Sv(e,n,h,r),c=e.memoizedState),(l=Fi||pS(e,n,l,r,m,c,f))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=f,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dT(t,e),l=e.memoizedProps,f=e.type===e.elementType?l:cr(e.type,l),o.props=f,p=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Jn(c):(c=vn(n)?to:Vt.current,c=Sa(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==c)&&gS(e,o,r,c),Fi=!1,m=e.memoizedState,o.state=m,Td(e,r,o,i);var T=e.memoizedState;l!==p||m!==T||mn.current||Fi?(typeof y=="function"&&(Sv(e,n,y,r),T=e.memoizedState),(f=Fi||pS(e,n,f,r,m,T,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=c,r=f):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Tv(t,e,n,r,s,i)}function Tv(t,e,n,r,i,s){jT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&uS(e,n,!1),hi(t,e,s);r=e.stateNode,q4.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ca(e,t.child,null,s),e.child=Ca(e,null,l,s)):Xt(t,e,l,s),e.memoizedState=r.state,i&&uS(e,n,!0),e.child}function WT(t){var e=t.stateNode;e.pendingContext?lS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lS(t,e.context,!1),h0(t,e.containerInfo)}function IS(t,e,n,r,i){return ba(),a0(i),e.flags|=256,Xt(t,e,n,r),e.child}var Av={dehydrated:null,treeContext:null,retryLane:0};function Rv(t){return{baseLanes:t,cachePool:null,transitions:null}}function zT(t,e,n){var r=e.pendingProps,i=nt.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ge(nt,i&1),t===null)return wv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Nh(o,r,0,null),t=Xs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Rv(n),e.memoizedState=Av,t):E0(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Y4(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=is(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=is(l,s):(s=Xs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Rv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Av,r}return s=t.child,t=s.sibling,r=is(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function E0(t,e){return e=Nh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Cf(t,e,n,r){return r!==null&&a0(r),Ca(e,t.child,null,n),t=E0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Y4(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=nm(Error(V(422))),Cf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Nh({mode:"visible",children:r.children},i,0,null),s=Xs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ca(e,t.child,null,o),e.child.memoizedState=Rv(o),e.memoizedState=Av,s);if(!(e.mode&1))return Cf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(V(419)),r=nm(s,r,void 0),Cf(t,e,o,r)}if(l=(o&t.childLanes)!==0,pn||l){if(r=kt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,di(t,i),_r(r,t,i,-1))}return A0(),r=nm(Error(V(421))),Cf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=l6.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Rn=es(i.nextSibling),xn=e,et=!0,hr=null,t!==null&&(Hn[Kn++]=ri,Hn[Kn++]=ii,Hn[Kn++]=no,ri=t.id,ii=t.overflow,no=e),e=E0(e,r.children),e.flags|=4096,e)}function TS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ev(t.return,e,n)}function rm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function VT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Xt(t,e,r.children,n),r=nt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&TS(t,n,e);else if(t.tag===19)TS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ge(nt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ad(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),rm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ad(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}rm(e,!0,n,null,s);break;case"together":rm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function hi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),io|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(V(153));if(e.child!==null){for(t=e.child,n=is(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=is(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Q4(t,e,n){switch(e.tag){case 3:WT(e),ba();break;case 5:vT(e);break;case 1:vn(e.type)&&Ed(e);break;case 4:h0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ge(Cd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ge(nt,nt.current&1),e.flags|=128,null):n&e.child.childLanes?zT(t,e,n):(Ge(nt,nt.current&1),t=hi(t,e,n),t!==null?t.sibling:null);Ge(nt,nt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return VT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ge(nt,nt.current),r)break;return null;case 22:case 23:return e.lanes=0,BT(t,e,n)}return hi(t,e,n)}var GT,kv,HT,KT;GT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kv=function(){};HT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Hs(Pr.current);var s=null;switch(n){case"input":i=Jm(t,i),r=Jm(t,r),s=[];break;case"select":i=st({},i,{value:void 0}),r=st({},r,{value:void 0}),s=[];break;case"textarea":i=ev(t,i),r=ev(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yd)}nv(n,r);var o;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(hu.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var c=r[f];if(l=i?.[f],r.hasOwnProperty(f)&&c!==l&&(c!=null||l!=null))if(f==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(hu.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Ke("scroll",t),s||l===c||(s=[])):(s=s||[]).push(f,c))}n&&(s=s||[]).push("style",n);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};KT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Il(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function J4(t,e,n){var r=e.pendingProps;switch(o0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return vn(e.type)&&wd(),jt(e),null;case 3:return r=e.stateNode,Ia(),Qe(mn),Qe(Vt),g0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hr!==null&&(Mv(hr),hr=null))),kv(t,e),jt(e),null;case 5:p0(e);var i=Hs(Iu.current);if(n=e.type,t!==null&&e.stateNode!=null)HT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(V(166));return jt(e),null}if(t=Hs(Pr.current),Sf(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[xr]=e,r[bu]=s,t=(e.mode&1)!==0,n){case"dialog":Ke("cancel",r),Ke("close",r);break;case"iframe":case"object":case"embed":Ke("load",r);break;case"video":case"audio":for(i=0;i<Wl.length;i++)Ke(Wl[i],r);break;case"source":Ke("error",r);break;case"img":case"image":case"link":Ke("error",r),Ke("load",r);break;case"details":Ke("toggle",r);break;case"input":L1(r,s),Ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ke("invalid",r);break;case"textarea":M1(r,s),Ke("invalid",r)}nv(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ef(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ef(r.textContent,l,t),i=["children",""+l]):hu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ke("scroll",r)}switch(n){case"input":hf(r),F1(r,s,!0);break;case"textarea":hf(r),U1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=yd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xr]=e,t[bu]=r,GT(t,e,!1,!1),e.stateNode=t;e:{switch(o=rv(n,r),n){case"dialog":Ke("cancel",t),Ke("close",t),i=r;break;case"iframe":case"object":case"embed":Ke("load",t),i=r;break;case"video":case"audio":for(i=0;i<Wl.length;i++)Ke(Wl[i],t);i=r;break;case"source":Ke("error",t),i=r;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),i=r;break;case"details":Ke("toggle",t),i=r;break;case"input":L1(t,r),i=Jm(t,r),Ke("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=st({},r,{value:void 0}),Ke("invalid",t);break;case"textarea":M1(t,r),i=ev(t,r),Ke("invalid",t);break;default:i=r}nv(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?bI(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&EI(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&pu(t,c):typeof c=="number"&&pu(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(hu.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ke("scroll",t):c!=null&&G_(t,s,c,o))}switch(n){case"input":hf(t),F1(t,r,!1);break;case"textarea":hf(t),U1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ps(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?la(t,!!r.multiple,s,!1):r.defaultValue!=null&&la(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=yd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(t&&e.stateNode!=null)KT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(V(166));if(n=Hs(Iu.current),Hs(Pr.current),Sf(e)){if(r=e.stateNode,n=e.memoizedProps,r[xr]=e,(s=r.nodeValue!==n)&&(t=xn,t!==null))switch(t.tag){case 3:Ef(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ef(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xr]=e,e.stateNode=r}return jt(e),null;case 13:if(Qe(nt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&Rn!==null&&e.mode&1&&!(e.flags&128))cT(),ba(),e.flags|=98560,s=!1;else if(s=Sf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(V(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(V(317));s[xr]=e}else ba(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jt(e),s=!1}else hr!==null&&(Mv(hr),hr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||nt.current&1?Et===0&&(Et=3):A0())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return Ia(),kv(t,e),t===null&&Eu(e.stateNode.containerInfo),jt(e),null;case 10:return c0(e.type._context),jt(e),null;case 17:return vn(e.type)&&wd(),jt(e),null;case 19:if(Qe(nt),s=e.memoizedState,s===null)return jt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Il(s,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ad(t),o!==null){for(e.flags|=128,Il(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ge(nt,nt.current&1|2),e.child}t=t.sibling}s.tail!==null&&dt()>Aa&&(e.flags|=128,r=!0,Il(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ad(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Il(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!et)return jt(e),null}else 2*dt()-s.renderingStartTime>Aa&&n!==1073741824&&(e.flags|=128,r=!0,Il(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=dt(),e.sibling=null,n=nt.current,Ge(nt,r?n&1|2:n&1),e):(jt(e),null);case 22:case 23:return T0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?An&1073741824&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error(V(156,e.tag))}function X4(t,e){switch(o0(e),e.tag){case 1:return vn(e.type)&&wd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ia(),Qe(mn),Qe(Vt),g0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return p0(e),null;case 13:if(Qe(nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(V(340));ba()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(nt),null;case 4:return Ia(),null;case 10:return c0(e.type._context),null;case 22:case 23:return T0(),null;case 24:return null;default:return null}}var If=!1,Wt=!1,Z4=typeof WeakSet=="function"?WeakSet:Set,Z=null;function ta(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){lt(t,e,r)}else n.current=null}function xv(t,e,n){try{n()}catch(r){lt(t,e,r)}}var AS=!1;function e6(t,e){if(hv=md,t=JI(),i0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,f=0,h=0,p=t,m=null;t:for(;;){for(var y;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===n&&++f===i&&(l=o),m===s&&++h===r&&(c=o),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pv={focusedElem:t,selectionRange:n},md=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var C=T.memoizedProps,A=T.memoizedState,v=e.stateNode,E=v.getSnapshotBeforeUpdate(e.elementType===e.type?C:cr(e.type,C),A);v.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(x){lt(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return T=AS,AS=!1,T}function nu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&xv(e,n,s)}i=i.next}while(i!==r)}}function kh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Nv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qT(t){var e=t.alternate;e!==null&&(t.alternate=null,qT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xr],delete e[bu],delete e[vv],delete e[F4],delete e[M4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function YT(t){return t.tag===5||t.tag===3||t.tag===4}function RS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ov(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yd));else if(r!==4&&(t=t.child,t!==null))for(Ov(t,e,n),t=t.sibling;t!==null;)Ov(t,e,n),t=t.sibling}function Pv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Pv(t,e,n),t=t.sibling;t!==null;)Pv(t,e,n),t=t.sibling}var Pt=null,fr=!1;function Ni(t,e,n){for(n=n.child;n!==null;)QT(t,e,n),n=n.sibling}function QT(t,e,n){if(Or&&typeof Or.onCommitFiberUnmount=="function")try{Or.onCommitFiberUnmount(Eh,n)}catch{}switch(n.tag){case 5:Wt||ta(n,e);case 6:var r=Pt,i=fr;Pt=null,Ni(t,e,n),Pt=r,fr=i,Pt!==null&&(fr?(t=Pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(fr?(t=Pt,n=n.stateNode,t.nodeType===8?Qg(t.parentNode,n):t.nodeType===1&&Qg(t,n),_u(t)):Qg(Pt,n.stateNode));break;case 4:r=Pt,i=fr,Pt=n.stateNode.containerInfo,fr=!0,Ni(t,e,n),Pt=r,fr=i;break;case 0:case 11:case 14:case 15:if(!Wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&xv(n,e,o),i=i.next}while(i!==r)}Ni(t,e,n);break;case 1:if(!Wt&&(ta(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){lt(n,e,l)}Ni(t,e,n);break;case 21:Ni(t,e,n);break;case 22:n.mode&1?(Wt=(r=Wt)||n.memoizedState!==null,Ni(t,e,n),Wt=r):Ni(t,e,n);break;default:Ni(t,e,n)}}function kS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Z4),e.forEach(function(r){var i=u6.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function or(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Pt=l.stateNode,fr=!1;break e;case 3:Pt=l.stateNode.containerInfo,fr=!0;break e;case 4:Pt=l.stateNode.containerInfo,fr=!0;break e}l=l.return}if(Pt===null)throw Error(V(160));QT(s,o,i),Pt=null,fr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){lt(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JT(e,t),e=e.sibling}function JT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(or(e,t),Ir(t),r&4){try{nu(3,t,t.return),kh(3,t)}catch(C){lt(t,t.return,C)}try{nu(5,t,t.return)}catch(C){lt(t,t.return,C)}}break;case 1:or(e,t),Ir(t),r&512&&n!==null&&ta(n,n.return);break;case 5:if(or(e,t),Ir(t),r&512&&n!==null&&ta(n,n.return),t.flags&32){var i=t.stateNode;try{pu(i,"")}catch(C){lt(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&_I(i,s),rv(l,o);var f=rv(l,s);for(o=0;o<c.length;o+=2){var h=c[o],p=c[o+1];h==="style"?bI(i,p):h==="dangerouslySetInnerHTML"?EI(i,p):h==="children"?pu(i,p):G_(i,h,p,f)}switch(l){case"input":Xm(i,s);break;case"textarea":yI(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?la(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?la(i,!!s.multiple,s.defaultValue,!0):la(i,!!s.multiple,s.multiple?[]:"",!1))}i[bu]=s}catch(C){lt(t,t.return,C)}}break;case 6:if(or(e,t),Ir(t),r&4){if(t.stateNode===null)throw Error(V(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){lt(t,t.return,C)}}break;case 3:if(or(e,t),Ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_u(e.containerInfo)}catch(C){lt(t,t.return,C)}break;case 4:or(e,t),Ir(t);break;case 13:or(e,t),Ir(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(C0=dt())),r&4&&kS(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Wt=(f=Wt)||h,or(e,t),Wt=f):or(e,t),Ir(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!h&&t.mode&1)for(Z=t,h=t.child;h!==null;){for(p=Z=h;Z!==null;){switch(m=Z,y=m.child,m.tag){case 0:case 11:case 14:case 15:nu(4,m,m.return);break;case 1:ta(m,m.return);var T=m.stateNode;if(typeof T.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(C){lt(r,n,C)}}break;case 5:ta(m,m.return);break;case 22:if(m.memoizedState!==null){NS(p);continue}}y!==null?(y.return=m,Z=y):NS(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=SI("display",o))}catch(C){lt(t,t.return,C)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(C){lt(t,t.return,C)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:or(e,t),Ir(t),r&4&&kS(t);break;case 21:break;default:or(e,t),Ir(t)}}function Ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(YT(n)){var r=n;break e}n=n.return}throw Error(V(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(pu(i,""),r.flags&=-33);var s=RS(t);Pv(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=RS(t);Ov(t,l,o);break;default:throw Error(V(161))}}catch(c){lt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function t6(t,e,n){Z=t,XT(t)}function XT(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||If;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Wt;l=If;var f=Wt;if(If=o,(Wt=c)&&!f)for(Z=i;Z!==null;)o=Z,c=o.child,o.tag===22&&o.memoizedState!==null?OS(i):c!==null?(c.return=o,Z=c):OS(i);for(;s!==null;)Z=s,XT(s),s=s.sibling;Z=i,If=l,Wt=f}xS(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):xS(t)}}function xS(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wt||kh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Wt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:cr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&hS(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}hS(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&_u(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}Wt||e.flags&512&&Nv(e)}catch(m){lt(e,e.return,m)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function NS(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function OS(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kh(4,e)}catch(c){lt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){lt(e,i,c)}}var s=e.return;try{Nv(e)}catch(c){lt(e,s,c)}break;case 5:var o=e.return;try{Nv(e)}catch(c){lt(e,o,c)}}}catch(c){lt(e,e.return,c)}if(e===t){Z=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Z=l;break}Z=e.return}}var n6=Math.ceil,xd=wi.ReactCurrentDispatcher,S0=wi.ReactCurrentOwner,Qn=wi.ReactCurrentBatchConfig,ke=0,kt=null,pt=null,Lt=0,An=0,na=Ss(0),Et=0,ku=null,io=0,xh=0,b0=0,ru=null,hn=null,C0=0,Aa=1/0,ei=null,Nd=!1,Dv=null,ns=null,Tf=!1,Hi=null,Od=0,iu=0,Lv=null,qf=-1,Yf=0;function tn(){return ke&6?dt():qf!==-1?qf:qf=dt()}function rs(t){return t.mode&1?ke&2&&Lt!==0?Lt&-Lt:$4.transition!==null?(Yf===0&&(Yf=LI()),Yf):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:WI(t.type)),t):1}function _r(t,e,n,r){if(50<iu)throw iu=0,Lv=null,Error(V(185));Zu(t,n,r),(!(ke&2)||t!==kt)&&(t===kt&&(!(ke&2)&&(xh|=n),Et===4&&$i(t,Lt)),_n(t,r),n===1&&ke===0&&!(e.mode&1)&&(Aa=dt()+500,Th&&bs()))}function _n(t,e){var n=t.callbackNode;$3(t,e);var r=gd(t,t===kt?Lt:0);if(r===0)n!==null&&j1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&j1(n),e===1)t.tag===0?U4(PS.bind(null,t)):aT(PS.bind(null,t)),D4(function(){!(ke&6)&&bs()}),n=null;else{switch(FI(r)){case 1:n=Q_;break;case 4:n=PI;break;case 16:n=pd;break;case 536870912:n=DI;break;default:n=pd}n=oA(n,ZT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ZT(t,e){if(qf=-1,Yf=0,ke&6)throw Error(V(327));var n=t.callbackNode;if(ha()&&t.callbackNode!==n)return null;var r=gd(t,t===kt?Lt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Pd(t,r);else{e=r;var i=ke;ke|=2;var s=tA();(kt!==t||Lt!==e)&&(ei=null,Aa=dt()+500,Js(t,e));do try{s6();break}catch(l){eA(t,l)}while(1);u0(),xd.current=s,ke=i,pt!==null?e=0:(kt=null,Lt=0,e=Et)}if(e!==0){if(e===2&&(i=lv(t),i!==0&&(r=i,e=Fv(t,i))),e===1)throw n=ku,Js(t,0),$i(t,r),_n(t,dt()),n;if(e===6)$i(t,r);else{if(i=t.current.alternate,!(r&30)&&!r6(i)&&(e=Pd(t,r),e===2&&(s=lv(t),s!==0&&(r=s,e=Fv(t,s))),e===1))throw n=ku,Js(t,0),$i(t,r),_n(t,dt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(V(345));case 2:Bs(t,hn,ei);break;case 3:if($i(t,r),(r&130023424)===r&&(e=C0+500-dt(),10<e)){if(gd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){tn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=mv(Bs.bind(null,t,hn,ei),e);break}Bs(t,hn,ei);break;case 4:if($i(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-vr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*n6(r/1960))-r,10<r){t.timeoutHandle=mv(Bs.bind(null,t,hn,ei),r);break}Bs(t,hn,ei);break;case 5:Bs(t,hn,ei);break;default:throw Error(V(329))}}}return _n(t,dt()),t.callbackNode===n?ZT.bind(null,t):null}function Fv(t,e){var n=ru;return t.current.memoizedState.isDehydrated&&(Js(t,e).flags|=256),t=Pd(t,e),t!==2&&(e=hn,hn=n,e!==null&&Mv(e)),t}function Mv(t){hn===null?hn=t:hn.push.apply(hn,t)}function r6(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!wr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $i(t,e){for(e&=~b0,e&=~xh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vr(e),r=1<<n;t[n]=-1,e&=~r}}function PS(t){if(ke&6)throw Error(V(327));ha();var e=gd(t,0);if(!(e&1))return _n(t,dt()),null;var n=Pd(t,e);if(t.tag!==0&&n===2){var r=lv(t);r!==0&&(e=r,n=Fv(t,r))}if(n===1)throw n=ku,Js(t,0),$i(t,e),_n(t,dt()),n;if(n===6)throw Error(V(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bs(t,hn,ei),_n(t,dt()),null}function I0(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Aa=dt()+500,Th&&bs())}}function so(t){Hi!==null&&Hi.tag===0&&!(ke&6)&&ha();var e=ke;ke|=1;var n=Qn.transition,r=Fe;try{if(Qn.transition=null,Fe=1,t)return t()}finally{Fe=r,Qn.transition=n,ke=e,!(ke&6)&&bs()}}function T0(){An=na.current,Qe(na)}function Js(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,P4(n)),pt!==null)for(n=pt.return;n!==null;){var r=n;switch(o0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wd();break;case 3:Ia(),Qe(mn),Qe(Vt),g0();break;case 5:p0(r);break;case 4:Ia();break;case 13:Qe(nt);break;case 19:Qe(nt);break;case 10:c0(r.type._context);break;case 22:case 23:T0()}n=n.return}if(kt=t,pt=t=is(t.current,null),Lt=An=e,Et=0,ku=null,b0=xh=io=0,hn=ru=null,Gs!==null){for(e=0;e<Gs.length;e++)if(n=Gs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Gs=null}return t}function eA(t,e){do{var n=pt;try{if(u0(),Gf.current=kd,Rd){for(var r=it.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Rd=!1}if(ro=0,At=_t=it=null,tu=!1,Tu=0,S0.current=null,n===null||n.return===null){Et=1,ku=e,pt=null;break}e:{var s=t,o=n.return,l=n,c=e;if(e=Lt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=wS(o);if(y!==null){y.flags&=-257,ES(y,o,l,s,e),y.mode&1&&yS(s,f,e),e=y,c=f;var T=e.updateQueue;if(T===null){var C=new Set;C.add(c),e.updateQueue=C}else T.add(c);break e}else{if(!(e&1)){yS(s,f,e),A0();break e}c=Error(V(426))}}else if(et&&l.mode&1){var A=wS(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),ES(A,o,l,s,e),a0(Ta(c,l));break e}}s=c=Ta(c,l),Et!==4&&(Et=2),ru===null?ru=[s]:ru.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=MT(s,c,e);dS(s,v);break e;case 1:l=c;var E=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(ns===null||!ns.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=UT(s,l,e);dS(s,x);break e}}s=s.return}while(s!==null)}rA(n)}catch(M){e=M,pt===n&&n!==null&&(pt=n=n.return);continue}break}while(1)}function tA(){var t=xd.current;return xd.current=kd,t===null?kd:t}function A0(){(Et===0||Et===3||Et===2)&&(Et=4),kt===null||!(io&268435455)&&!(xh&268435455)||$i(kt,Lt)}function Pd(t,e){var n=ke;ke|=2;var r=tA();(kt!==t||Lt!==e)&&(ei=null,Js(t,e));do try{i6();break}catch(i){eA(t,i)}while(1);if(u0(),ke=n,xd.current=r,pt!==null)throw Error(V(261));return kt=null,Lt=0,Et}function i6(){for(;pt!==null;)nA(pt)}function s6(){for(;pt!==null&&!x3();)nA(pt)}function nA(t){var e=sA(t.alternate,t,An);t.memoizedProps=t.pendingProps,e===null?rA(t):pt=e,S0.current=null}function rA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=X4(n,e),n!==null){n.flags&=32767,pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,pt=null;return}}else if(n=J4(n,e,An),n!==null){pt=n;return}if(e=e.sibling,e!==null){pt=e;return}pt=e=t}while(e!==null);Et===0&&(Et=5)}function Bs(t,e,n){var r=Fe,i=Qn.transition;try{Qn.transition=null,Fe=1,o6(t,e,n,r)}finally{Qn.transition=i,Fe=r}return null}function o6(t,e,n,r){do ha();while(Hi!==null);if(ke&6)throw Error(V(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(V(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(B3(t,s),t===kt&&(pt=kt=null,Lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tf||(Tf=!0,oA(pd,function(){return ha(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Qn.transition,Qn.transition=null;var o=Fe;Fe=1;var l=ke;ke|=4,S0.current=null,e6(t,n),JT(n,t),T4(pv),md=!!hv,pv=hv=null,t.current=n,t6(n),N3(),ke=l,Fe=o,Qn.transition=s}else t.current=n;if(Tf&&(Tf=!1,Hi=t,Od=i),s=t.pendingLanes,s===0&&(ns=null),D3(n.stateNode),_n(t,dt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Nd)throw Nd=!1,t=Dv,Dv=null,t;return Od&1&&t.tag!==0&&ha(),s=t.pendingLanes,s&1?t===Lv?iu++:(iu=0,Lv=t):iu=0,bs(),null}function ha(){if(Hi!==null){var t=FI(Od),e=Qn.transition,n=Fe;try{if(Qn.transition=null,Fe=16>t?16:t,Hi===null)var r=!1;else{if(t=Hi,Hi=null,Od=0,ke&6)throw Error(V(331));var i=ke;for(ke|=4,Z=t.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var f=l[c];for(Z=f;Z!==null;){var h=Z;switch(h.tag){case 0:case 11:case 15:nu(8,h,s)}var p=h.child;if(p!==null)p.return=h,Z=p;else for(;Z!==null;){h=Z;var m=h.sibling,y=h.return;if(qT(h),h===f){Z=null;break}if(m!==null){m.return=y,Z=m;break}Z=y}}}var T=s.alternate;if(T!==null){var C=T.child;if(C!==null){T.child=null;do{var A=C.sibling;C.sibling=null,C=A}while(C!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:nu(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Z=v;break e}Z=s.return}}var E=t.current;for(Z=E;Z!==null;){o=Z;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,Z=I;else e:for(o=E;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:kh(9,l)}}catch(M){lt(l,l.return,M)}if(l===o){Z=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,Z=x;break e}Z=l.return}}if(ke=i,bs(),Or&&typeof Or.onPostCommitFiberRoot=="function")try{Or.onPostCommitFiberRoot(Eh,t)}catch{}r=!0}return r}finally{Fe=n,Qn.transition=e}}return!1}function DS(t,e,n){e=Ta(n,e),e=MT(t,e,1),t=ts(t,e,1),e=tn(),t!==null&&(Zu(t,1,e),_n(t,e))}function lt(t,e,n){if(t.tag===3)DS(t,t,n);else for(;e!==null;){if(e.tag===3){DS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ns===null||!ns.has(r))){t=Ta(n,t),t=UT(e,t,1),e=ts(e,t,1),t=tn(),e!==null&&(Zu(e,1,t),_n(e,t));break}}e=e.return}}function a6(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=tn(),t.pingedLanes|=t.suspendedLanes&n,kt===t&&(Lt&n)===n&&(Et===4||Et===3&&(Lt&130023424)===Lt&&500>dt()-C0?Js(t,0):b0|=n),_n(t,e)}function iA(t,e){e===0&&(t.mode&1?(e=mf,mf<<=1,!(mf&130023424)&&(mf=4194304)):e=1);var n=tn();t=di(t,e),t!==null&&(Zu(t,e,n),_n(t,n))}function l6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iA(t,n)}function u6(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(V(314))}r!==null&&r.delete(e),iA(t,n)}var sA;sA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mn.current)pn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pn=!1,Q4(t,e,n);pn=!!(t.flags&131072)}else pn=!1,et&&e.flags&1048576&&lT(e,bd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Kf(t,e),t=e.pendingProps;var i=Sa(e,Vt.current);da(e,n),i=v0(null,e,r,t,i,n);var s=_0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vn(r)?(s=!0,Ed(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,d0(e),i.updater=Ah,e.stateNode=i,i._reactInternals=e,bv(e,r,t,n),e=Tv(null,e,r,!0,s,n)):(e.tag=0,et&&s&&s0(e),Xt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Kf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=f6(r),t=cr(r,t),i){case 0:e=Iv(null,e,r,t,n);break e;case 1:e=CS(null,e,r,t,n);break e;case 11:e=SS(null,e,r,t,n);break e;case 14:e=bS(null,e,r,cr(r.type,t),n);break e}throw Error(V(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cr(r,i),Iv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cr(r,i),CS(t,e,r,i,n);case 3:e:{if(WT(e),t===null)throw Error(V(387));r=e.pendingProps,s=e.memoizedState,i=s.element,dT(t,e),Td(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ta(Error(V(423)),e),e=IS(t,e,r,n,i);break e}else if(r!==i){i=Ta(Error(V(424)),e),e=IS(t,e,r,n,i);break e}else for(Rn=es(e.stateNode.containerInfo.firstChild),xn=e,et=!0,hr=null,n=mT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ba(),r===i){e=hi(t,e,n);break e}Xt(t,e,r,n)}e=e.child}return e;case 5:return vT(e),t===null&&wv(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,gv(r,i)?o=null:s!==null&&gv(r,s)&&(e.flags|=32),jT(t,e),Xt(t,e,o,n),e.child;case 6:return t===null&&wv(e),null;case 13:return zT(t,e,n);case 4:return h0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ca(e,null,r,n):Xt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cr(r,i),SS(t,e,r,i,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ge(Cd,r._currentValue),r._currentValue=o,s!==null)if(wr(s.value,o)){if(s.children===i.children&&!mn.current){e=hi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=li(-1,n&-n),c.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?c.next=c:(c.next=h.next,h.next=c),f.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Ev(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(V(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ev(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Xt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,da(e,n),i=Jn(i),r=r(i),e.flags|=1,Xt(t,e,r,n),e.child;case 14:return r=e.type,i=cr(r,e.pendingProps),i=cr(r.type,i),bS(t,e,r,i,n);case 15:return $T(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:cr(r,i),Kf(t,e),e.tag=1,vn(r)?(t=!0,Ed(e)):t=!1,da(e,n),pT(e,r,i),bv(e,r,i,n),Tv(null,e,r,!0,t,n);case 19:return VT(t,e,n);case 22:return BT(t,e,n)}throw Error(V(156,e.tag))};function oA(t,e){return OI(t,e)}function c6(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(t,e,n,r){return new c6(t,e,n,r)}function R0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function f6(t){if(typeof t=="function")return R0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===K_)return 11;if(t===q_)return 14}return 2}function is(t,e){var n=t.alternate;return n===null?(n=Yn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")R0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ho:return Xs(n.children,i,s,e);case H_:o=8,i|=8;break;case Km:return t=Yn(12,n,e,i|2),t.elementType=Km,t.lanes=s,t;case qm:return t=Yn(13,n,e,i),t.elementType=qm,t.lanes=s,t;case Ym:return t=Yn(19,n,e,i),t.elementType=Ym,t.lanes=s,t;case gI:return Nh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hI:o=10;break e;case pI:o=9;break e;case K_:o=11;break e;case q_:o=14;break e;case Li:o=16,r=null;break e}throw Error(V(130,t==null?t:typeof t,""))}return e=Yn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Xs(t,e,n,r){return t=Yn(7,t,r,e),t.lanes=n,t}function Nh(t,e,n,r){return t=Yn(22,t,r,e),t.elementType=gI,t.lanes=n,t.stateNode={isHidden:!1},t}function im(t,e,n){return t=Yn(6,t,null,e),t.lanes=n,t}function sm(t,e,n){return e=Yn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function d6(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$g(0),this.expirationTimes=$g(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$g(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function k0(t,e,n,r,i,s,o,l,c){return t=new d6(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Yn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},d0(s),t}function h6(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Go,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function aA(t){if(!t)return gs;t=t._reactInternals;e:{if(mo(t)!==t||t.tag!==1)throw Error(V(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(V(171))}if(t.tag===1){var n=t.type;if(vn(n))return oT(t,n,e)}return e}function lA(t,e,n,r,i,s,o,l,c){return t=k0(n,r,!0,t,i,s,o,l,c),t.context=aA(null),n=t.current,r=tn(),i=rs(n),s=li(r,i),s.callback=e??null,ts(n,s,i),t.current.lanes=i,Zu(t,i,r),_n(t,r),t}function Oh(t,e,n,r){var i=e.current,s=tn(),o=rs(i);return n=aA(n),e.context===null?e.context=n:e.pendingContext=n,e=li(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ts(i,e,o),t!==null&&(_r(t,i,o,s),Vf(t,i,o)),o}function Dd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function LS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function x0(t,e){LS(t,e),(t=t.alternate)&&LS(t,e)}function p6(){return null}var uA=typeof reportError=="function"?reportError:function(t){console.error(t)};function N0(t){this._internalRoot=t}Ph.prototype.render=N0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(V(409));Oh(t,e,null,null)};Ph.prototype.unmount=N0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;so(function(){Oh(null,t,null,null)}),e[fi]=null}};function Ph(t){this._internalRoot=t}Ph.prototype.unstable_scheduleHydration=function(t){if(t){var e=$I();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ui.length&&e!==0&&e<Ui[n].priority;n++);Ui.splice(n,0,t),n===0&&jI(t)}};function O0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function FS(){}function g6(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=Dd(o);s.call(f)}}var o=lA(e,r,t,0,null,!1,!1,"",FS);return t._reactRootContainer=o,t[fi]=o.current,Eu(t.nodeType===8?t.parentNode:t),so(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=Dd(c);l.call(f)}}var c=k0(t,0,!1,null,null,!1,!1,"",FS);return t._reactRootContainer=c,t[fi]=c.current,Eu(t.nodeType===8?t.parentNode:t),so(function(){Oh(e,c,n,r)}),c}function Lh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var c=Dd(o);l.call(c)}}Oh(e,o,t,i)}else o=g6(n,e,t,i,r);return Dd(o)}MI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jl(e.pendingLanes);n!==0&&(J_(e,n|1),_n(e,dt()),!(ke&6)&&(Aa=dt()+500,bs()))}break;case 13:so(function(){var r=di(t,1);if(r!==null){var i=tn();_r(r,t,1,i)}}),x0(t,1)}};X_=function(t){if(t.tag===13){var e=di(t,134217728);if(e!==null){var n=tn();_r(e,t,134217728,n)}x0(t,134217728)}};UI=function(t){if(t.tag===13){var e=rs(t),n=di(t,e);if(n!==null){var r=tn();_r(n,t,e,r)}x0(t,e)}};$I=function(){return Fe};BI=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};sv=function(t,e,n){switch(e){case"input":if(Xm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ih(r);if(!i)throw Error(V(90));vI(r),Xm(r,i)}}}break;case"textarea":yI(t,n);break;case"select":e=n.value,e!=null&&la(t,!!n.multiple,e,!1)}};TI=I0;AI=so;var m6={usingClientEntryPoint:!1,Events:[tc,Qo,Ih,CI,II,I0]},Tl={findFiberByHostInstance:Vs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},v6={bundleType:Tl.bundleType,version:Tl.version,rendererPackageName:Tl.rendererPackageName,rendererConfig:Tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xI(t),t===null?null:t.stateNode},findFiberByHostInstance:Tl.findFiberByHostInstance||p6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Af.isDisabled&&Af.supportsFiber)try{Eh=Af.inject(v6),Or=Af}catch{}}Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m6;Dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!O0(e))throw Error(V(200));return h6(t,e,null,n)};Dn.createRoot=function(t,e){if(!O0(t))throw Error(V(299));var n=!1,r="",i=uA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=k0(t,1,!1,null,null,n,!1,r,i),t[fi]=e.current,Eu(t.nodeType===8?t.parentNode:t),new N0(e)};Dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(V(188)):(t=Object.keys(t).join(","),Error(V(268,t)));return t=xI(e),t=t===null?null:t.stateNode,t};Dn.flushSync=function(t){return so(t)};Dn.hydrate=function(t,e,n){if(!Dh(e))throw Error(V(200));return Lh(null,t,e,!0,n)};Dn.hydrateRoot=function(t,e,n){if(!O0(t))throw Error(V(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=uA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=lA(e,null,t,1,n??null,i,!1,s,o),t[fi]=e.current,Eu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ph(e)};Dn.render=function(t,e,n){if(!Dh(e))throw Error(V(200));return Lh(null,t,e,!1,n)};Dn.unmountComponentAtNode=function(t){if(!Dh(t))throw Error(V(40));return t._reactRootContainer?(so(function(){Lh(null,null,t,!1,function(){t._reactRootContainer=null,t[fi]=null})}),!0):!1};Dn.unstable_batchedUpdates=I0;Dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Dh(n))throw Error(V(200));if(t==null||t._reactInternals===void 0)throw Error(V(38));return Lh(t,e,n,!1,r)};Dn.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=Dn})(p3);var MS=Vm;zm.createRoot=MS.createRoot,zm.hydrateRoot=MS.hydrateRoot;/**
 * @remix-run/router v1.3.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xu(){return xu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xu.apply(this,arguments)}var Ki;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ki||(Ki={}));const US="popstate";function _6(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:l="",hash:c=""}=vo(i.location.hash.substr(1));return Uv("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=i.location.href,f=c.indexOf("#");l=f===-1?c:c.slice(0,f)}return l+"#"+(typeof s=="string"?s:Ld(s))}function r(i,s){y6(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return E6(e,n,r,t)}function St(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function y6(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function w6(){return Math.random().toString(36).substr(2,8)}function $S(t,e){return{usr:t.state,key:t.key,idx:e}}function Uv(t,e,n,r){return n===void 0&&(n=null),xu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?vo(e):e,{state:n,key:e&&e.key||r||w6()})}function Ld(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function vo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function E6(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Ki.Pop,c=null,f=h();f==null&&(f=0,o.replaceState(xu({},o.state,{idx:f}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=Ki.Pop;let A=h(),v=A==null?null:A-f;f=A,c&&c({action:l,location:C.location,delta:v})}function m(A,v){l=Ki.Push;let E=Uv(C.location,A,v);n&&n(E,A),f=h()+1;let I=$S(E,f),x=C.createHref(E);try{o.pushState(I,"",x)}catch{i.location.assign(x)}s&&c&&c({action:l,location:C.location,delta:1})}function y(A,v){l=Ki.Replace;let E=Uv(C.location,A,v);n&&n(E,A),f=h();let I=$S(E,f),x=C.createHref(E);o.replaceState(I,"",x),s&&c&&c({action:l,location:C.location,delta:0})}function T(A){let v=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof A=="string"?A:Ld(A);return St(v,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,v)}let C={get action(){return l},get location(){return t(i,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(US,p),c=A,()=>{i.removeEventListener(US,p),c=null}},createHref(A){return e(i,A)},createURL:T,encodeLocation(A){let v=T(A);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:y,go(A){return o.go(A)}};return C}var BS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(BS||(BS={}));function S6(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?vo(e):e,i=dA(r.pathname||"/",n);if(i==null)return null;let s=cA(t);b6(s);let o=null;for(let l=0;o==null&&l<s.length;++l)o=O6(s[l],L6(i));return o}function cA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(St(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=ss([r,c.relativePath]),h=n.concat(c);s.children&&s.children.length>0&&(St(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),cA(s.children,e,h,f)),!(s.path==null&&!s.index)&&e.push({path:f,score:x6(f,s.index),routesMeta:h})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of fA(s.path))i(s,o,c)}),e}function fA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=fA(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function b6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:N6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const C6=/^:\w+$/,I6=3,T6=2,A6=1,R6=10,k6=-2,jS=t=>t==="*";function x6(t,e){let n=t.split("/"),r=n.length;return n.some(jS)&&(r+=k6),e&&(r+=T6),n.filter(i=>!jS(i)).reduce((i,s)=>i+(C6.test(s)?I6:s===""?A6:R6),r)}function N6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function O6(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,f=i==="/"?e:e.slice(i.length)||"/",h=P6({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f);if(!h)return null;Object.assign(r,h.params);let p=l.route;s.push({params:r,pathname:ss([i,h.pathname]),pathnameBase:$6(ss([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=ss([i,h.pathnameBase]))}return s}function P6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=D6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,h,p)=>{if(h==="*"){let m=l[p]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}return f[h]=F6(l[p]||"",h),f},{}),pathname:s,pathnameBase:o,pattern:t}}function D6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),P0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,l)=>(r.push(l),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function L6(t){try{return decodeURI(t)}catch(e){return P0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function F6(t,e){try{return decodeURIComponent(t)}catch(n){return P0(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function dA(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function P0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function M6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?vo(t):t;return{pathname:n?n.startsWith("/")?n:U6(n,e):e,search:B6(r),hash:j6(i)}}function U6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function om(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function pA(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=vo(t):(i=xu({},t),St(!i.pathname||!i.pathname.includes("?"),om("?","pathname","search",i)),St(!i.pathname||!i.pathname.includes("#"),om("#","pathname","hash",i)),St(!i.search||!i.search.includes("#"),om("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(r||o==null)l=n;else{let p=e.length-1;if(o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}l=p>=0?e[p]:"/"}let c=M6(i,l),f=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}const ss=t=>t.join("/").replace(/\/\/+/g,"/"),$6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),B6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,j6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function W6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const z6=["post","put","patch","delete"];[...z6];/**
 * React Router v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $v(){return $v=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$v.apply(this,arguments)}function V6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const G6=typeof Object.is=="function"?Object.is:V6,{useState:H6,useEffect:K6,useLayoutEffect:q6,useDebugValue:Y6}=cd;function Q6(t,e,n){const r=e(),[{inst:i},s]=H6({inst:{value:r,getSnapshot:e}});return q6(()=>{i.value=r,i.getSnapshot=e,am(i)&&s({inst:i})},[t,r,e]),K6(()=>(am(i)&&s({inst:i}),t(()=>{am(i)&&s({inst:i})})),[t]),Y6(r),r}function am(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!G6(n,r)}catch{return!0}}function J6(t,e,n){return e()}const X6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Z6=!X6,eU=Z6?J6:Q6;"useSyncExternalStore"in cd&&(t=>t.useSyncExternalStore)(cd);const gA=k.createContext(null),mA=k.createContext(null),Fh=k.createContext(null),Mh=k.createContext(null),Wa=k.createContext({outlet:null,matches:[]}),vA=k.createContext(null);function tU(t,e){let{relative:n}=e===void 0?{}:e;rc()||St(!1);let{basename:r,navigator:i}=k.useContext(Fh),{hash:s,pathname:o,search:l}=_A(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:ss([r,o])),i.createHref({pathname:c,search:l,hash:s})}function rc(){return k.useContext(Mh)!=null}function za(){return rc()||St(!1),k.useContext(Mh).location}function nU(){rc()||St(!1);let{basename:t,navigator:e}=k.useContext(Fh),{matches:n}=k.useContext(Wa),{pathname:r}=za(),i=JSON.stringify(hA(n).map(l=>l.pathnameBase)),s=k.useRef(!1);return k.useEffect(()=>{s.current=!0}),k.useCallback(function(l,c){if(c===void 0&&(c={}),!s.current)return;if(typeof l=="number"){e.go(l);return}let f=pA(l,JSON.parse(i),r,c.relative==="path");t!=="/"&&(f.pathname=f.pathname==="/"?t:ss([t,f.pathname])),(c.replace?e.replace:e.push)(f,c.state,c)},[t,e,i,r])}function _A(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=k.useContext(Wa),{pathname:i}=za(),s=JSON.stringify(hA(r).map(o=>o.pathnameBase));return k.useMemo(()=>pA(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function rU(t,e){rc()||St(!1);let{navigator:n}=k.useContext(Fh),r=k.useContext(mA),{matches:i}=k.useContext(Wa),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let c=za(),f;if(e){var h;let C=typeof e=="string"?vo(e):e;l==="/"||(h=C.pathname)!=null&&h.startsWith(l)||St(!1),f=C}else f=c;let p=f.pathname||"/",m=l==="/"?p:p.slice(l.length)||"/",y=S6(t,{pathname:m}),T=aU(y&&y.map(C=>Object.assign({},C,{params:Object.assign({},o,C.params),pathname:ss([l,n.encodeLocation?n.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?l:ss([l,n.encodeLocation?n.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,r||void 0);return e&&T?k.createElement(Mh.Provider,{value:{location:$v({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ki.Pop}},T):T}function iU(){let t=fU(),e=W6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,s)}class sU extends k.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location?{error:e.error,location:e.location}:{error:e.error||n.error,location:n.location}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?k.createElement(Wa.Provider,{value:this.props.routeContext},k.createElement(vA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oU(t){let{routeContext:e,match:n,children:r}=t,i=k.useContext(gA);return i&&i.static&&i.staticContext&&n.route.errorElement&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Wa.Provider,{value:e},r)}function aU(t,e,n){if(e===void 0&&(e=[]),t==null)if(n!=null&&n.errors)t=n.matches;else return null;let r=t,i=n?.errors;if(i!=null){let s=r.findIndex(o=>o.route.id&&i?.[o.route.id]);s>=0||St(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,o,l)=>{let c=o.route.id?i?.[o.route.id]:null,f=n?o.route.errorElement||k.createElement(iU,null):null,h=e.concat(r.slice(0,l+1)),p=()=>k.createElement(oU,{match:o,routeContext:{outlet:s,matches:h}},c?f:o.route.element!==void 0?o.route.element:s);return n&&(o.route.errorElement||l===0)?k.createElement(sU,{location:n.location,component:f,error:c,children:p(),routeContext:{outlet:null,matches:h}}):p()},null)}var WS;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator"})(WS||(WS={}));var Fd;(function(t){t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"})(Fd||(Fd={}));function lU(t){let e=k.useContext(mA);return e||St(!1),e}function uU(t){let e=k.useContext(Wa);return e||St(!1),e}function cU(t){let e=uU(),n=e.matches[e.matches.length-1];return n.route.id||St(!1),n.route.id}function fU(){var t;let e=k.useContext(vA),n=lU(Fd.UseRouteError),r=cU(Fd.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function yA(t){St(!1)}function dU(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ki.Pop,navigator:s,static:o=!1}=t;rc()&&St(!1);let l=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:l,navigator:s,static:o}),[l,s,o]);typeof r=="string"&&(r=vo(r));let{pathname:f="/",search:h="",hash:p="",state:m=null,key:y="default"}=r,T=k.useMemo(()=>{let C=dA(f,l);return C==null?null:{pathname:C,search:h,hash:p,state:m,key:y}},[l,f,h,p,m,y]);return T==null?null:k.createElement(Fh.Provider,{value:c},k.createElement(Mh.Provider,{children:n,value:{location:T,navigationType:i}}))}function hU(t){let{children:e,location:n}=t,r=k.useContext(gA),i=r&&!e?r.router.routes:Bv(e);return rU(i,n)}var zS;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(zS||(zS={}));new Promise(()=>{});function Bv(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,i)=>{if(!k.isValidElement(r))return;if(r.type===k.Fragment){n.push.apply(n,Bv(r.props.children,e));return}r.type!==yA&&St(!1),!r.props.index||!r.props.children||St(!1);let s=[...e,i],o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(o.children=Bv(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jv(){return jv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jv.apply(this,arguments)}function pU(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function gU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mU(t,e){return t.button===0&&(!e||e==="_self")&&!gU(t)}const vU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function _U(t){let{basename:e,children:n,window:r}=t,i=k.useRef();i.current==null&&(i.current=_6({window:r,v5Compat:!0}));let s=i.current,[o,l]=k.useState({action:s.action,location:s.location});return k.useLayoutEffect(()=>s.listen(l),[s]),k.createElement(dU,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:s})}const yU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wU=k.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:c,to:f,preventScrollReset:h}=e,p=pU(e,vU),m,y=!1;if(yU&&typeof f=="string"&&/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(f)){m=f;let v=new URL(window.location.href),E=f.startsWith("//")?new URL(v.protocol+f):new URL(f);E.origin===v.origin?f=E.pathname+E.search+E.hash:y=!0}let T=tU(f,{relative:i}),C=EU(f,{replace:o,state:l,target:c,preventScrollReset:h,relative:i});function A(v){r&&r(v),v.defaultPrevented||C(v)}return k.createElement("a",jv({},p,{href:m||T,onClick:y||s?r:A,ref:n,target:c}))});var VS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(VS||(VS={}));var GS;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(GS||(GS={}));function EU(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,l=nU(),c=za(),f=_A(t,{relative:o});return k.useCallback(h=>{if(mU(h,n)){h.preventDefault();let p=r!==void 0?r:Ld(c)===Ld(f);l(t,{replace:p,state:i,preventScrollReset:s,relative:o})}},[c,l,f,r,i,n,t,s,o])}const wA=0,EA=1,SA=2,bA=3,CA=4,IA=5;var w={error:console.error,warn:console.warn,info:console.log,debug:console.log,verbose:function(...t){}};function D0(t){w.error=t>=1?console.error:function(...e){},w.warn=t>=2?console.warn:function(...e){},w.info=t>=3?console.log:function(...e){},w.debug=t>=4?console.log:function(...e){},w.verbose=t>=5?console.log:function(...e){}}typeof window<"u"&&(window.DEBUG_LEVEL_NONE=wA,window.DEBUG_LEVEL_ERROR=EA,window.DEBUG_LEVEL_WARN=SA,window.DEBUG_LEVEL_INFO=bA,window.DEBUG_LEVEL_DEBUG=CA,window.DEBUG_LEVEL_VERBOSE=IA,window.setLoggingLevel=D0);globalThis&&(globalThis.DEBUG_LEVEL_NONE=wA,globalThis.DEBUG_LEVEL_ERROR=EA,globalThis.DEBUG_LEVEL_WARN=SA,globalThis.DEBUG_LEVEL_INFO=bA,globalThis.DEBUG_LEVEL_DEBUG=CA,globalThis.DEBUG_LEVEL_VERBOSE=IA,globalThis.setLoggingLevel=D0);function Uh(t,e){var n=[];for(let r=0;r<e;r++){const i=t&255;n.push(i),t=t>>8}return n}new Date().getTime()%2147483647;function ie(t){return new Promise(e=>setTimeout(e,t))}const L0=()=>({events:{},emit(t,...e){(this.events[t]||[]).forEach(n=>{n(...e)})},on(t,e){return(this.events[t]=this.events[t]||[]).push(e),()=>this.events[t]=(this.events[t]||[]).filter(n=>n!==e)}});function Nu(t,e,n,r,i){if(n==e)return r/2+i/2;let s=Math.min(e,n),o=Math.max(e,n);t<s?t=s:t>o&&(t=o);let l=(t-e)*(i-r)/(n-e)+r;return s=Math.min(r,i),o=Math.max(r,i),l<s?l=s:l>o&&(l=o),l}function Mo(t){return F0(t,5)}function F0(t,e){var n=[];for(let r=0;r<e;r++)r<t.length?n.push(t.charCodeAt(r)):n.push(0);return n}function SU(t){if(!t)return[0,0,0];let e=t.match(/#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i);if(!e)return console.error('Wrong color code: "'+t+'"'),[0,0,0];let n=parseInt(e[1],16),r=parseInt(e[2],16),i=parseInt(e[3],16);return[n,r,i]}function bU(t){const e=Nu(t,-100,100,-2147483647,2147483647);return Uh(Math.floor(e),4)}function CU(t){var e=t.split(":"),n=e.map(function(r){return parseInt(r,16)});return n}function ne(t,e){let n=Math.round(t);var r=[];for(let i=0;i<e;i++){const s=n&255;r.push(s),n=n>>8}return r}const TA=typeof window<"u"&&"flutter_inappwebview"in window;function jo(){return TA}const ms=typeof navigator>"u"?"":navigator.userAgent.toLowerCase(),IU=ms.indexOf("android")>-1;function Ou(){return IU}const TU=ms.indexOf("iphone")>-1;function AU(){return TU}const RU=ms.indexOf("macintosh")>-1;function lm(){return RU}const kU=ms.indexOf("windows")>-1;function um(){return kU}const xU=ms.indexOf("linux")>-1;function NU(){return xU}const OU=ms.indexOf("chrome")>-1;function Al(){return OU&&!TA}ms.indexOf("safari")>-1&&ms.indexOf("chrome")==-1;function PU(t,e){let n=new TextEncoder,r={name:"HMAC",hash:"SHA-256"},i=new Uint8Array(t);return crypto.subtle.importKey("raw",n.encode(e),r,!1,["sign","verify"]).then(s=>crypto.subtle.sign(r.name,s,i)).then(s=>new Uint8Array(s))}function Wv(t,e){if(t.length%2!=0)throw"Invalid hexString";e||(e=t.length/2);let n=new Uint8Array(e);for(let r=0;r<e;r++){const i=parseInt(t.substr(r*2,2),16);i!==NaN?n[r]=i:n[r]=0}return n}function HS(t){return[...new Uint8Array(t)].map(e=>e.toString(16).padStart(2,"0")).join("")}function DU(t){return t.replace(/č/g,"c").replace(/š/g,"s").replace(/ř/g,"r").replace(/ž/g,"z").replace(/ý/g,"y").replace(/á/g,"a").replace(/é/g,"e").replace(/í/g,"i").replace(/ó/g,"o").replace(/ú/g,"u").replace(/ů/g,"u").replace(/ě/g,"e").replace(/ť/g,"t").replace(/ď/g,"d").replace(/ň/g,"n").replace(/Š/g,"S").replace(/Ž/g,"Z").replace(/Ý/g,"Y").replace(/Á/g,"A").replace(/É/g,"E").replace(/Í/g,"I").replace(/Ó/g,"O").replace(/Ú/g,"U").replace(/Ů/g,"U").replace(/Ě/g,"E").replace(/Ť/g,"T").replace(/Ď/g,"D").replace(/Ň/g,"N")}const cm=()=>typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,fm=()=>"wakeLock"in navigator;class LU{constructor(){if(!(typeof window>"u"))if(this.enabled=!1,fm()){this._wakeLock=null;const e=()=>{this._wakeLock!==null&&document.visibilityState==="visible"&&this.enable()};document.addEventListener("visibilitychange",e),document.addEventListener("fullscreenchange",e)}else cm()?this.noSleepTimer=null:w.error("NoSleep is not available")}_addSourceToVideo(e,n,r){var i=document.createElement("source");i.src=r,i.type=`video/${n}`,e.appendChild(i)}get isEnabled(){return this.enabled}enable(){if(fm())return navigator.wakeLock.request("screen").then(e=>{this._wakeLock=e,this.enabled=!0,console.info("Wake Lock active."),this._wakeLock.addEventListener("release",()=>{console.info("Wake Lock released.")})}).catch(e=>{throw this.enabled=!1,console.error(`${e.name}, ${e.message}`),e});if(cm())return this.disable(),console.warn(`
        NoSleep enabled for older iOS devices. This can interrupt
        active or long-running network requests from completing successfully.
        See https://github.com/richtr/NoSleep.js/issues/15 for more details.
      `),this.enabled=!0,Promise.resolve()}disable(){fm()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):cm()&&this.noSleepTimer&&(console.warn(`
          NoSleep now disabled for older iOS devices.
        `),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null),this.enabled=!1}}const zv=new LU,FU="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",MU=FU.split(" ").map(function(t){return parseInt(t,16)});function KS(t){for(var e=-1,n=0,r=t.length;n<r;n++)e=e>>>8^MU[(e^t[n])&255];return(e^-1)>>>0}const UU="005EBCE2613FDD83C29C7E20A3FD1F419DC3217FFCA2401E5F01E3BD3E6082DC237D9FC1421CFEA0E1BF5D0380DE3C62BEE0025CDF81633D7C22C09E1D43A1FF4618FAA427799BC584DA3866E5BB5907DB856739BAE406581947A5FB7826C49A653BD987045AB8E6A7F91B45C6987A24F8A6441A99C7257B3A6486D85B05E7B98CD2306EEDB3510F4E10F2AC2F7193CD114FADF3702ECC92D38D6F31B2EC0E50AFF1134DCE90722C6D33D18F0C52B0EE326C8ED0530DEFB1F0AE4C1291CF2D73CA947628ABF517490856B4EA6937D58B5709EBB536688AD495CB2977F4AA4816E9B7550B88D6346A2B7597C94A14F6A8742AC896154BA9F7B6E80A54D7896B35";function Vv(t){if(!t.length)return[];var e=t.match(/[0-9a-f]{2}/gi);return e=e.map(n=>parseInt(n,16)),new Uint8Array(e)}Vv(UU);function dm(t){var e=t.toString(16);return e.length==1?"0"+e:e}function $U(t,e,n){return"#"+dm(t)+dm(e)+dm(n)}function BU(t){if(!t)return[0,"0s"];if(typeof t=="number"&&(t=t.toString()),t=t.trim(),t=="inf"||t=="Inf"||t=="infinity"||t=="Infinity")return[2147483647,"Infinity"];if(t=="-inf"||t=="-Inf"||t=="-infinity"||t=="-Infinity")return[-2147483648,"-Infinity"];isNaN(t)||(t+="s");let e=t.match(/([+-]? *[0-9]+[.]?[0-9]*|[.][0-9]+)\s*d/gi),n=t.match(/([+-]? *[0-9]+[.]?[0-9]*|[.][0-9]+)\s*h/gi),r=t.match(/([+-]? *[0-9]+[.]?[0-9]*|[.][0-9]+)\s*m(?!s)/gi),i=t.match(/([+-]? *[0-9]+[.]?[0-9]*|[.][0-9]+)\s*s/gi),s=t.match(/([+-]? *[0-9]+[.]?[0-9]*|[.][0-9]+)\s*(t|ms)/gi),o="",l=0;for(w.verbose(e),w.verbose(n),w.verbose(r),w.verbose(i),w.verbose(s);e&&e.length;){let c=parseFloat(e[0].replace(/\s/,""));o+=c+"d ",l+=c*864e5,e.shift()}for(;n&&n.length;){let c=parseFloat(n[0].replace(/\s/,""));o+=c+"h ",l+=c*36e5,n.shift()}for(;r&&r.length;){let c=parseFloat(r[0].replace(/\s/,""));o+=c+"m ",l+=c*6e4,r.shift()}for(;i&&i.length;){let c=parseFloat(i[0].replace(/\s/,""));o+=c+"s ",l+=c*1e3,i.shift()}for(;s&&s.length;){let c=parseFloat(s[0].replace(/\s/,""));o+=c+"ms ",l+=c,s.shift()}return l>=2147483647?[2147483647,"Infinity"]:l<=-2147483648?[-2147483648,"-Infinity"]:o===""?[0,"0s"]:[l,o.trim()]}if(typeof window<"u"){window.validateTimestamp=BU,window.noSleep=zv;var hm=document.createElement("script");hm.src="//cdn.jsdelivr.net/npm/eruda",hm.setAttribute("defer",!0),document.body.appendChild(hm)}class _o{constructor(e,n){this.memory_=0,this.paused_=!1,this.eventEmitter_=L0(),n&&this.pause(),e?this.setMillis(e):this.setMillis(0)}millis(){return this.paused_?this.memory_:Date.now()-this.memory_}setState(e,n){(n&&!this.paused_||!n&&this.paused_)&&(this.paused_=n,this.memory_=Date.now()-this.memory_),this.memory_=this.paused_?e:Date.now()-e,this.eventEmitter_.emit("change",{target:this})}setMillis(e){this.memory_=this.paused_?e:Date.now()-e,this.eventEmitter_.emit("change",{target:this})}pause(){this.paused_||(this.paused_=!0,this.memory_=Date.now()-this.memory_,this.eventEmitter_.emit("change",{target:this}))}unpause(){this.paused_&&(this.paused_=!1,this.memory_=Date.now()-this.memory_,this.eventEmitter_.emit("change",{target:this}))}paused(){return this.paused_}}class Ct{constructor(e){this._dataView=e,this._index=0}peekValue(e,n){const r=[0,128,32768,8388608,2147483648],i=[0,256,65536,16777216,4294967296];if(this._index+e>this._dataView.byteLength)throw console.error("End of the data"),"PeekOutOfRange";let s=0;for(let o=e;o>0;o--)s<<=8,s|=this._dataView.getUint8(this._index+o-1);if(n)return s>>>0;if(e<4){if(s>>>=0,s&r[e])return s-i[e]}else return s}readValue(e,n){try{const r=this.peekValue(e,n);return this.forward(e),r}catch{throw"Read_Out_Of_Range"}}readBytes(e){if(this._index+e<=this._dataView.byteLength){let n=[];for(let r=0;r<e;r++)n.push(this._dataView.getUint8(this._index+r));return this.forward(e),n}else throw console.error("End of the data"),"Bytes read out of range"}readString(e){if(this._index+e<=this._dataView.byteLength){let n="",r=!1;for(let i=0;i<e;i++){let s=this._dataView.getUint8(this._index+i);s===0&&(r=!0),r||(n+=String.fromCharCode(s))}return n}else throw console.warn("End of the data"),"Bytes read out of range"}peekFlag(){return this.peekValue(1,!0)}readFlag(){return this.readValue(1,!0)}readInt8(){return this.readValue(1,!1)}readUint8(){return this.readValue(1,!0)}readInt16(){return this.readValue(2,!1)}readUint16(){return this.readValue(2,!0)}readInt32(){return this.readValue(4,!1)}readUint32(){return this.readValue(4,!0)}readInt48(){return this.readValue(6,!1)}readUint48(){return this.readValue(6,!0)}readInt64(){return this.readValue(8,!1)}readUint64(){return this.readValue(8,!0)}get available(){return this._dataView.byteLength-this._index}forward(e){this._index+e<=this._dataView.byteLength?this._index+=e:this._index=this._dataView.byteLength}back(e){this._index>=e?this._index-=e:this._index=0}}class Mi{constructor(e=65535){this._buffer=new ArrayBuffer(e),this._dataView=new DataView(this._buffer),this._index=0}writeValue(e,n){if(this._index+n<=this._dataView.byteLength)for(let r=0;r<n;r++)this._dataView.setUint8(this._index++,e&255),e=Math.floor(e/Math.pow(2,8));else throw console.warn("End of the data"),"Tried to write out of range"}writeBytes(e,n){if(n===null&&(n=e.byteLength),this._index+n<=this._dataView.byteLength)for(let r=0;r<n;r++)r<e.byteLength?this._dataView.setUint8(this._index++,e[r]):this._dataView.setUint8(this._index++,0);else throw console.warn("End of the data"),"Tried to write out of range"}writeString(e,n){if(n===null&&(n=e.length),this._index+n<=this._dataView.byteLength)for(let r=0;r<n;r++)this._dataView.setUint8(this._index++,e.charCodeAt(r));else throw console.warn("End of the data"),"Tried to write out of range"}writeFlag(e){return this.writeValue(e,1)}writeUint8(e){return this.writeValue(e,1)}writeInt16(e){return this.writeValue(e,2)}writeUint16(e){return this.writeValue(e,2)}writeInt32(e){return this.writeValue(e,4)}writeUint32(e){return this.writeValue(e,4)}get available(){return this._dataView.byteLength-this._index}forward(e){this._index+e<=this._dataView.byteLength?this._index+=e:this._index=this._dataView.byteLength}back(e){this._index>=e?this._index-=e:this._index=0}get bytes(){return new DataView(this._buffer.slice(0,this._index))}get written(){return this._index}}class pm{#e;#t;#n;#r;#a;#i;constructor(e,n=!1,r="DUMMY_0.0.0_00000000"){this.type=n?"edummy":"dummy",this.#e=e,this.#r=n,this.#a=r,this.#t=!1,this.#n=!1,this.#i=new _o(0,!1)}#s(e){return this.#r?Math.random()<e:!1}userSelect(e){return w.verbose("userSelect(criteria=",e,")"),new Promise(async(n,r)=>{if(this.#n&&await this.disconnect(),await ie(Math.random()*1e3),this.#s(.25)){r("UserCanceledSelection");return}if(this.#s(.1)){r("SelectionFailed");return}this.#t=!0,n({connector:this.type})})}autoSelect(e,n,r){return w.verbose("autoSelect(criteria=",e,", scan_period=",n,"timeout=",r,")"),new Promise(async(i,s)=>{if(this.#n&&await this.disconnect(),await ie(Math.random()*1e3),this.#s(.1)){s("SelectionFailed");return}this.#t=!0,i({connector:this.type})})}selected(){return w.verbose("selected()"),new Promise(async(e,n)=>{this.#t?e({connector:this.type}):e()})}unselect(){return w.verbose("unselect()"),new Promise(async(e,n)=>{this.#n&&await this.disconnect(),await ie(10),this.#t=!1,e()})}scan(e,n){return Promise.resolve("{}")}connect(e){return w.verbose(`connect(timeout=${e})`),new Promise(async(n,r)=>{if(!this.#t){r("DeviceNotSelected");return}if(await ie(Math.random()*1e3),this.#s(.1)){r("ConnectionFailed");return}this.#n=!0,this.#e.emit("#connected"),n({connector:this.type})})}disconnect(){return w.verbose("disconnect()"),new Promise(async(e,n)=>{this.#n&&(await ie(100),this.#n=!1,this.#e.emit("#disconnected")),e()})}connected(){return w.verbose("connected()"),new Promise(async(e,n)=>{this.#n?e({connector:this.type}):e()})}deliver(e,n){return w.verbose(`deliver(payload=${e}, timeout=${n})`),new Promise(async(r,i)=>{if(!this.#n){i("DeviceDisconnected");return}if(await ie(25),this.#s(.1)){i("DeliverFailed");return}this.#e.emit("wasm_execute",e),r()})}transmit(e,n){return w.verbose(`transmit(payload=${e}, timeout=${n})`),new Promise(async(r,i)=>{if(!this.#n){i("DeviceDisconnected");return}if(await ie(10),this.#s(.1)){i("TransmitFailed");return}this.#e.emit("wasm_execute",e),r()})}request(e,n=!0,r){w.verbose(`request(payload=${e}, read_response=${n?"true":"false"}, timeout=${r})`);const i=0,s=[18764998447377,37529996894754,56294995342131,75059993789508,93824992236885,0x666666666666,0x777777777777,0x888888888888];return new Promise(async(o,l)=>{if(!this.#n){l("DeviceDisconnected");return}if(await ie(50),this.#s(.1)){l("RequestFailed");return}this.#e.emit("wasm_request",e);let c=new Ct(new DataView(new Uint8Array(e).buffer));switch(c.peekFlag()){case G.FLAG_ADOPT_REQUEST:{c.readFlag();const f=c.readUint32();let h=i,p=new Mi(64);p.writeFlag(G.FLAG_ADOPT_RESPONSE),p.writeUint32(f),p.writeUint8(h),p.writeValue(s[Math.floor(Math.random()*s.length)],6),o(p.bytes)}break;case G.FLAG_CONFIG_UPDATE_REQUEST:{c.readFlag();const f=c.readUint32();let h=i,p=new Mi(64);p.writeFlag(G.FLAG_CONFIG_UPDATE_RESPONSE),p.writeUint32(f),p.writeUint8(h),o(p.bytes)}break;case G.FLAG_TIMELINE_REQUEST:{c.readFlag();const f=c.readUint32();let h=new Mi(64);h.writeFlag(G.FLAG_TIMELINE_RESPONSE),h.writeUint32(f),h.writeInt32(0),h.writeInt32(0),h.writeUint8(0),o(h.bytes)}break;case G.FLAG_TNGL_FINGERPRINT_REQUEST:{c.readFlag();const f=c.readUint32();let h=i,p=new Mi(64);p.writeFlag(G.FLAG_TNGL_FINGERPRINT_RESPONSE),p.writeUint32(f),p.writeUint8(h),p.writeBytes(new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),32),o(p.bytes)}break;case G.FLAG_ERASE_OWNER_REQUEST:{c.readFlag();const f=c.readUint32();let h=i,p=new Mi(64);p.writeFlag(G.FLAG_ERASE_OWNER_RESPONSE),p.writeUint32(f),p.writeUint8(h),p.writeBytes(new Uint8Array([0,0,0,0,0,0]),6),o(p.bytes)}break;case G.FLAG_FW_VERSION_REQUEST:{c.readFlag();const f=c.readUint32();let h=i,p=new Mi(64);p.writeFlag(G.FLAG_FW_VERSION_RESPONSE),p.writeUint32(f),p.writeUint8(h),p.writeString(this.#a,32),o(p.bytes)}break;default:o([])}})}setClock(e){return w.verbose(`setClock(clock.millis()=${e.millis()})`),new Promise(async(n,r)=>{if(!this.#n){r("DeviceDisconnected");return}if(await ie(10),this.#s(.1)){r("ClockWriteFailed");return}this.#i.setMillis(e.millis()),this.#e.emit("wasm_clock",this.#i.millis()),n()})}getClock(){return w.verbose("getClock()"),new Promise(async(e,n)=>{if(!this.#n){n("DeviceDisconnected");return}if(await ie(50),this.#s(.1)){n("ClockReadFailed");return}this.#e.emit("wasm_clock",this.#i.millis()),e(this.#i)})}updateFW(e){return w.verbose(`updateFW(firmware=${e})`),new Promise(async(n,r)=>{if(!this.#n){r("DeviceDisconnected");return}if(this.#e.emit("ota_status","begin"),await ie(1e4),this.#s(.1)){this.#e.emit("ota_status","fail"),r("UpdateFailed");return}for(let i=1;i<=100;i++)if(this.#e.emit("ota_progress",i),await ie(25),this.#s(.01)){this.#e.emit("ota_status","fail"),r("UpdateFailed");return}if(await ie(1e3),this.#s(.1)){this.#e.emit("ota_status","fail"),r("UpdateFailed");return}this.#e.emit("ota_status","success"),n()})}destroy(){return w.verbose("destroy()"),this.disconnect().catch(()=>{}).then(()=>this.unselect()).catch(()=>{})}}class jU{#e;#t;#n;#r;#a;#i;#s;constructor(e){this.#e=e,this.#t=null,this.#n=null,this.#r=null,this.#a=null,this.#i=!1,this.#s=Math.floor(Math.random()*4294967295)}#o(){return this.#s>=4294967295&&(this.#s=0),++this.#s}#u(e,n,r){const i=this.#o(),s=12,l=(Ou()?212:512)-s;if(r)return new Promise(async(c,f)=>{let h=0,p=l;for(;h<n.length;){p>n.length&&(p=n.length);const m=[...ne(i,4),...ne(h,4),...ne(n.length,4),...n.slice(h,p)];try{await e.writeValueWithResponse(new Uint8Array(m))}catch(y){w.warn(y),f(y);return}h+=l,p=h+l}c()});{if(n.length>l)return w.error("The maximum bytes that can be written without response is "+l),Promise.reject("WriteError");const c=[...ne(i,4),...ne(0,4),...ne(n.length,4),...n.slice(0,n.length)];return e.writeValueWithoutResponse(new Uint8Array(c))}}#c(e){return new Promise(async(n,r)=>{let i=new Uint8Array((await e.readValue()).buffer),s=[...i];for(;i.length==512;)i=new Uint8Array((await e.readValue()).buffer),s=[...s,...i];n(new DataView(new Uint8Array(s).buffer))})}#l(e){this.#e.process(e.target.value)}#p(e){}attach(e,n,r,i){return this.#t=e,w.debug("> Getting Network Characteristics..."),this.#t.getCharacteristic(n).then(s=>(this.#n=s,this.#n.startNotifications().then(()=>{w.debug("> Network notifications started"),this.#n.oncharacteristicvaluechanged=o=>{this.#l(o)}}).catch(o=>{w.warn(o)}))).catch(s=>{throw w.warn(s),"ConnectionFailed"}).then(()=>(w.debug("> Getting Clock Characteristics..."),this.#t.getCharacteristic(r))).then(s=>{this.#r=s}).catch(s=>{throw w.warn(s),"ConnectionFailed"}).then(()=>(w.debug("> Getting Device Characteristics..."),this.#t.getCharacteristic(i))).then(s=>(this.#a=s,this.#a.startNotifications().then(()=>{w.debug("> Device notifications started"),this.#a.oncharacteristicvaluechanged=o=>{this.#p(o)}}).catch(o=>{w.warn(o)}))).catch(s=>{throw w.warn(s),"ConnectionFailed"})}deliver(e,n){return this.#n?this.#i?(w.warn("Communication in proccess"),Promise.reject("DeliverFailed")):(this.#i=!0,this.#u(this.#n,e,!0).catch(r=>{throw w.error(r),"DeliverFailed"}).finally(()=>{this.#i=!1})):(w.warn("Network characteristics is null"),Promise.reject("DeliverFailed"))}transmit(e,n){return this.#n?this.#i?(w.warn("Communication in proccess"),Promise.reject("TransmitFailed")):(this.#i=!0,this.#u(this.#n,e,!1).catch(r=>{throw w.error(r),"TransmitFailed"}).finally(()=>{this.#i=!1})):(w.warn("Network characteristics is null"),Promise.reject("TransmitFailed"))}request(e,n,r){return this.#a?this.#i?(w.warn("Communication in proccess"),Promise.reject("RequestFailed")):(this.#i=!0,this.#u(this.#a,e,!0).then(()=>n?this.#c(this.#a):Promise.resolve([])).catch(i=>{throw w.error(i),"RequestFailed"}).finally(()=>{this.#i=!1})):(w.warn("Device characteristics is null"),Promise.reject("RequestFailed"))}writeClock(e){if(!this.#r)return w.warn("Sync characteristics is null"),Promise.reject("ClockWriteFailed");if(this.#i)return w.warn("Communication in proccess"),Promise.reject("ClockWriteFailed");this.#i=!0;const n=Uh(e,8);return this.#r.writeValueWithoutResponse(new Uint8Array(n)).catch(r=>{throw w.error(r),"ClockWriteFailed"}).finally(()=>{this.#i=!1})}readClock(){return this.#r?this.#i?(w.warn("Communication in proccess"),Promise.reject("ClockReadFailed")):(this.#i=!0,this.#r.readValue().then(e=>new Ct(e).readUint64()).catch(e=>{throw w.error(e),"ClockReadFailed"}).finally(()=>{this.#i=!1})):(w.warn("Sync characteristics is null"),Promise.reject("ClockReadFailed"))}updateFirmware(e){return this.#a?this.#i?(w.warn("Communication in proccess"),Promise.reject("UpdateFailed")):(this.#i=!0,new Promise(async(n,r)=>{const i=Ou()?1008:4992;let s=0,o=i,l=0;w.debug("OTA UPDATE"),w.debug(e);const c=new Date().getTime();try{this.#e.emit("ota_status","begin");{w.debug("OTA RESET");const f=[G.FLAG_OTA_RESET,0,...ne(0,4)];await this.#u(this.#a,f,!0)}await ie(100);{w.debug("OTA BEGIN");const f=[G.FLAG_OTA_BEGIN,0,...ne(e.length,4)];await this.#u(this.#a,f,!0)}for(await ie(8e3),w.debug("OTA WRITE");l<e.length;){o>e.length&&(o=e.length);const f=[G.FLAG_OTA_WRITE,0,...ne(l,4),...e.slice(s,o)];await this.#u(this.#a,f,!0),l+=o-s;const h=Math.floor(l*1e4/e.length)/100;w.debug(h+"%"),this.#e.emit("ota_progress",h),s+=i,o=s+i}await ie(100);{w.debug("OTA END");const f=[G.FLAG_OTA_END,0,...ne(l,4)];await this.#u(this.#a,f,!0)}await ie(2e3),w.info("Firmware written in "+(new Date().getTime()-c)/1e3+" seconds"),this.#e.emit("ota_status","success"),n()}catch(f){w.error(f),this.#e.emit("ota_status","fail"),r("UpdateFailed")}}).finally(()=>{this.#i=!1})):(w.warn("Device characteristics is null"),Promise.reject("UpdateFailed"))}reset(){this.#t=null,this.#n=null,this.#r=null,this.#a=null,this.#i=!1}destroy(){this.reset(),this.#e=null}}class WU{#e;#t;#n;#r;#a;#i;constructor(e){this.type="webbluetooth",this.#e=e,this.FW_PRE_0_7_SERVICE_UUID="0000ffe0-0000-1000-8000-00805f9b34fb",this.FW_0_7_0_SERVICE_UUID="60cb125a-0000-0007-0000-5ad20c574c10",this.FW_0_7_1_SERVICE_UUID="60cb125a-0000-0007-0001-5ad20c574c10",this.FW_0_7_2_SERVICE_UUID="60cb125a-0000-0007-0002-5ad20c574c10",this.FW_0_7_3_SERVICE_UUID="60cb125a-0000-0007-0003-5ad20c574c10",this.FW_0_7_4_SERVICE_UUID="60cb125a-0000-0007-0004-5ad20c574c10",this.SPECTODA_SERVICE_UUID="cc540e31-80be-44af-b64a-5d2def886bf5",this.SPECTODA_ADOPTING_SERVICE_UUID="723247e6-3e2d-4279-ad8e-85a13b74d4a5",this.TERMINAL_CHAR_UUID="33a0937e-0c61-41ea-b770-007ade2c79fa",this.CLOCK_CHAR_UUID="7a1e0e3a-6b9b-49ef-b9b7-65c81b714a19",this.DEVICE_CHAR_UUID="9ebe2e4b-10c7-4a81-ac83-49540d1135a5",this.#t=null,this.#n=new jU(e),this.#r=!1,this.#a={},this.#i=!1,this.#e.on("#connected",()=>{this.#i=!0}),this.#e.on("#disconnected",()=>{this.#i=!1})}userSelect(e,n){if(this.#o())return this.disconnect().then(()=>ie(1e3)).then(()=>this.userSelect(e,n));e?Array.isArray(e)?this.#a=e:this.#a=[e]:this.#a=[];let r={filters:[],optionalServices:[this.SPECTODA_SERVICE_UUID]};if(this.#a.length==0)r.filters.push({services:[this.SPECTODA_SERVICE_UUID]});else{let i=!1;for(let s=0;s<this.#a.length;s++){const o=this.#a[s];if(o.legacy){i||(i=!0,r.filters.push({namePrefix:"Nara Al"}),r.filters.push({services:[this.FW_PRE_0_7_SERVICE_UUID]}),r.filters.push({services:[this.FW_0_7_0_SERVICE_UUID]}),r.filters.push({services:[this.FW_0_7_1_SERVICE_UUID]}),r.filters.push({services:[this.FW_0_7_2_SERVICE_UUID]}),r.filters.push({services:[this.FW_0_7_3_SERVICE_UUID]}),r.filters.push({services:[this.FW_0_7_4_SERVICE_UUID]}));continue}let l={services:[this.SPECTODA_SERVICE_UUID]};if(o.name?l.name=o.name:o.namePrefix&&(l.namePrefix=o.namePrefix),o.fwVersion||o.ownerSignature||o.productCode||o.adoptionFlag){delete l.services;let f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];if(o.productCode){if(o.productCode<0||o.productCode>65535)throw"InvalidProductCode";const p=2,m=[o.productCode&255,o.productCode>>8&255];for(let y=0;y<2;y++)f[p+y]=m[y],h[p+y]=255}if(o.ownerSignature){if(o.ownerSignature.length!=32)throw"InvalidOwnerSignature";const p=4,m=Wv(o.ownerSignature);for(let y=0;y<16;y++)f[p+y]=m[y],h[p+y]=255}if(o.adoptionFlag){let m=0;const y=255;o.adoptionFlag===!0&&(m|=1<<0),f[20]=m,h[20]=y}if(o.fwVersion){const m=o.fwVersion.match(/(!?)([\d]+).([\d]+).([\d]+)/),y=m[2]*1e4+m[3]*100+m[4]*1,T=[y&255,y>>8&255];if(m[1]==="!"){l.manufacturerData=[];for(let C=0;C<2;C++)for(let A=0;A<8;A++){for(let E=0;E<2;E++)f[0+E]=0,h[0+E]=0;f[0+C]=~(T[C]&1<<A),h[0+C]=1<<A;let v=JSON.parse(JSON.stringify(l));v.manufacturerData=[{companyIdentifier:741,dataPrefix:new Uint8Array(f),mask:new Uint8Array(h)}],r.filters.push(v)}}else{for(let C=0;C<2;C++)f[0+C]=T[C],h[0+C]=255;l.manufacturerData=[{companyIdentifier:741,dataPrefix:new Uint8Array(f),mask:new Uint8Array(h)}],r.filters.push(l)}}else l.manufacturerData=[{companyIdentifier:741,dataPrefix:new Uint8Array(f),mask:new Uint8Array(h)}],r.filters.push(l)}else r.filters.push(l)}}return r.filters.length==0&&(r={acceptAllDevices:!0,optionalServices:[this.SPECTODA_SERVICE_UUID]}),navigator.bluetooth.requestDevice(r).catch(i=>{throw w.error(i),"UserCanceledSelection"}).then(i=>(this.#t=i,this.#t.ongattserverdisconnected=()=>{this.#c()},{connector:this.type}))}autoSelect(e,n,r){return this.#o()?this.disconnect().then(()=>ie(1e3)).then(()=>this.autoSelect(e,n,r)):(this.#a=e,this.userSelect(e))}unselect(){return(this.#o()?this.disconnect():Promise.resolve()).then(()=>(this.#t=null,this.#n.reset(),Promise.resolve()))}#s(){return!!this.#t}selected(){return Promise.resolve(this.#s()?{connector:this.type}:null)}scan(e,n){return Promise.resolve("{}")}connect(e=1e4){if(w.verbose(`connect(timeout=${e}})`),e<=0)return w.debug("> Connect timeout have expired"),Promise.reject("ConnectionFailed");const n=new Date().getTime();if(this.#r=!0,!this.#s())return Promise.reject("DeviceNotSelected");if(this.#o())return w.debug("> Bluetooth Device is already connected"),Promise.resolve();const r=setTimeout(()=>{w.warn("Timeout triggered"),this.disconnect()},e<1e4?1e4:e);return w.debug("> Connecting to Bluetooth device..."),this.#t.gatt.connect().then(i=>(this.#n.reset(),w.debug("> Getting the Bluetooth Service..."),i.getPrimaryService(this.SPECTODA_SERVICE_UUID))).then(i=>(w.debug("> Getting the Service Characteristic..."),clearTimeout(r),this.#n.attach(i,this.TERMINAL_CHAR_UUID,this.CLOCK_CHAR_UUID,this.DEVICE_CHAR_UUID))).then(()=>(w.debug("> Bluetooth Device Connected"),this.#i||this.#e.emit("#connected"),{connector:"webbluetooth"})).catch(i=>{if(w.warn(i.name),clearTimeout(r),i.name=="NetworkError")return ie(1e3).then(()=>{if(this.#r){const s=new Date().getTime()-n;return this.connect(e-s)}else return Promise.reject("ConnectionFailed")});throw i})}#o(){return this.#t&&this.#t.gatt.connected}connected(){return Promise.resolve(this.#o()?{connector:this.type}:null)}#u(){this.#t.gatt.disconnect()}disconnect(){return this.#r=!1,w.debug("> Disconnecting from Bluetooth Device..."),this.#n.reset(),this.#o()?this.#u():w.debug("Bluetooth Device is already disconnected"),Promise.resolve()}#c=e=>{w.debug("> Bluetooth Device disconnected"),this.#n.reset(),this.#i&&(w.verbose("emitting #disconnected"),this.#e.emit("#disconnected"))};deliver(e,n){return this.#o()?this.#n.deliver(e,n):Promise.reject("DeviceDisconnected")}transmit(e,n){return this.#o()?this.#n.transmit(e,n):Promise.reject("DeviceDisconnected")}request(e,n,r){return this.#o()?this.#n.request(e,n,r):Promise.reject("DeviceDisconnected")}setClock(e){return w.verbose("setClock()"),this.#o()?new Promise(async(n,r)=>{for(let i=0;i<3;i++)try{await this.#n.writeClock(e.millis()),w.debug("Clock write success"),n();return}catch{w.warn("Clock write failed"),await ie(1e3)}r("ClockWriteFailed")}):Promise.reject("DeviceDisconnected")}getClock(){return w.verbose("getClock()"),this.#o()?new Promise(async(e,n)=>{for(let r=0;r<3;r++){await ie(1e3);try{const i=await this.#n.readClock();w.debug("Clock read success:",i),e(new _o(i));return}catch(i){w.warn("Clock read failed:",i)}}n("ClockReadFailed")}):Promise.reject("DeviceDisconnected")}updateFW(e){return this.#o()?this.#n.updateFirmware(e).finally(()=>this.disconnect()):Promise.reject("DeviceDisconnected")}destroy(){return this.disconnect().catch(()=>{}).then(()=>this.unselect()).catch(()=>{})}}class zU{constructor(){this.container=""}transform(e,n){this.container+=e;const r=this.container.split(`
`);this.container=r.pop(),r.forEach(i=>n.enqueue(i))}flush(e){e.enqueue(this.container)}}class VU{#e;#t;#n;#r;#a;#i;#s;#o;#u;#c;#l;#p;#h;#d;#m;constructor(e){this.type="webserial",this.#e=e,this.PORT_OPTIONS={baudRate:1e6,dataBits:8,stopBits:1,parity:"none",bufferSize:65535,flowControl:"none"},this.#t=null,this.#n=!1,this.#r=!1,this.#a=!1,this.#i=!1,this.#s=null,this.#o=null,this.#u=null,this.#c=null,this.#l=null,this.#p=8,this.#h=null,this.#d=null,this.#m=null,this.CODE_WRITE=100,this.CODE_READ=200,this.CHANNEL_NETWORK=1,this.CHANNEL_DEVICE=2,this.CHANNEL_CLOCK=3,this.INITIATE_NETWORK_WRITE=this.CODE_WRITE+this.CHANNEL_NETWORK,this.INITIATE_DEVICE_WRITE=this.CODE_WRITE+this.CHANNEL_DEVICE,this.INITIATE_CLOCK_WRITE=this.CODE_WRITE+this.CHANNEL_CLOCK,this.INITIATE_NETWORK_READ=this.CODE_READ+this.CHANNEL_NETWORK,this.INITIATE_DEVICE_READ=this.CODE_READ+this.CHANNEL_DEVICE,this.INITIATE_CLOCK_READ=this.CODE_READ+this.CHANNEL_CLOCK}async#f(){for(;;){let{value:e,done:n}=await this.#c.read().catch(r=>r.toString().includes("break condition")?(w.warn(r),{value:null,done:!0}):(w.error(r),{value:null,done:!0}));if(e&&(e=e.replace(/>>>[\w\d=]*<<</g,(r,i)=>{if(r===">>>BEGIN<<<")this.#h&&this.#h(!0);else if(r===">>>END<<<")this.disconnect();else if(r===">>>READY<<<")this.disconnect(),this.#h&&this.#h(!1),this.#d&&this.#d(!1);else if(r===">>>SUCCESS<<<")this.#d&&this.#d(!0);else if(r===">>>FAIL<<<")w.warn(r),this.#d&&this.#d(!1);else if(r.match(/>>>DATA=/)){w.verbose("match",r);let s=r.match(/>>>DATA=([0123456789abcdef]*)<<</i);s&&this.#m&&this.#m(Vv(s[1]))}else if(r.match(/>>>NOTIFY=/)){w.verbose("match",r);let s=r.match(/>>>NOTIFY=([0123456789abcdef]*)<<</i);s&&this.#e.process(new DataView(new Uint8Array(Vv(s[1])).buffer))}return""}),e.length!==0&&this.#e.emit("receive",{target:this,payload:e})),n){this.#c.releaseLock(),w.debug("Reader done");break}}this.#i||this.disconnect()}userSelect(e){return this.#r?this.disconnect().then(()=>this.userSelect(e)):(this.#t&&(this.#t=null),navigator.serial.requestPort().then(n=>(this.#t=n,Promise.resolve({connector:this.type}))))}autoSelect(e,n,r){return this.userSelect()}selected(){return Promise.resolve(this.#t?{connector:this.type}:null)}unselect(){return this.#r?this.disconnect().then(()=>this.unselect()):(this.#t=null,Promise.resolve())}scan(e,n){return Promise.resolve("{}")}connect(e=15e3){if(e<=0)return w.debug("> Connect timeout have expired"),Promise.reject("ConnectionFailed");const n=new Date().getTime();return this.#t?this.#r?(w.warn("Serial device already connected"),Promise.resolve()):this.#t.open(this.PORT_OPTIONS).then(()=>{this.#a=!0,this.#s=this.#t.writable,this.#u=this.#t.readable;let r=new window.TextDecoderStream;return this.#l=this.#u.pipeTo(r.writable),this.#u=r.readable.pipeThrough(new window.TransformStream(new zU)),this.#c=this.#u.getReader(),this.#f(),new Promise((i,s)=>{const o=setTimeout(()=>{w.warn("Connection timeouted"),this.#h=null,s("ConnectTimeout")},e);this.#h=l=>{clearTimeout(o),this.#h=null,setTimeout(()=>{if(l)this.#r=!0,w.debug("> Serial Connector Connected"),this.#e.emit("#connected"),i({connector:this.type});else{const c=new Date().getTime()-n;i(this.connect(e-c))}},4e3)},this.#o=this.#s.getWriter(),this.#o.write(new Uint8Array(F0(`>>>START<<<
`,12))),this.#o.releaseLock()})}).catch(r=>(w.error(r),this.disconnect().then(()=>{throw r}))):Promise.reject("NotSelected")}connected(){return Promise.resolve(this.#r?{connector:this.type}:null)}async disconnect(){return w.debug("> Closing serial port..."),this.#t?this.#a?this.#i?(w.debug("Serial port already disconnecting"),Promise.resolve()):(this.#i=!0,this.#u&&(this.#c&&(await this.#c.cancel().catch(()=>{}),await this.#l.catch(()=>{}),this.#c=null),this.#u=null),this.#s&&(this.#o&&(await this.#o.close().catch(()=>{}),this.#o=null),this.#s=null),this.#t.close().then(()=>{this.#a=!1,w.debug("> Serial port closed")}).catch(e=>{w.error("Failed to close serial port. Error: "+e)}).finally(()=>{this.#i=!1,this.#r&&(this.#r=!1,this.#e.emit("#disconnected"))})):(w.debug("Serial port already closed"),Promise.resolve()):(w.debug("No Serial Port selected"),Promise.resolve())}#v(e,n,r,i){if(!r)return Promise.reject("WriteFailed");n||(n=[]);const s=new Mi(32),o=(25+n.length/this.#p)*4;return i<o&&(i=o),w.debug(`timeout=${i}`),s.writeUint32(e),s.writeUint32(n.length),s.writeUint32(i),s.writeUint32(KS(n)),s.writeUint32(KS(new Uint8Array(s.bytes.buffer))),this.#o=this.#s.getWriter(),new Promise((l,c)=>{const f=setTimeout(()=>{w.error("ResponseTimeout"),this.#d=null,this.#o&&this.#o.releaseLock(),this.disconnect(),c("ResponseTimeout")},i);return this.#d=h=>{this.#d=null,clearInterval(f),h?setTimeout(()=>{this.#o&&this.#o.releaseLock(),l()},100):(w.debug("Trying to recover..."),setTimeout(()=>{this.#o&&this.#o.releaseLock(),l(this.#v(e,n,r-1,0))},100))},this.#o.write(new Uint8Array(s.bytes.buffer)).then(()=>this.#o.write(new Uint8Array(n))).catch(h=>{w.error(h)})})}#g(e,n,r){return this.#v(this.CODE_WRITE+e,n,3,r)}#_(e,n){let r=null;return this.#m=i=>{r=new DataView(i.buffer),this.#m=null},this.#v(this.CODE_READ+e,null,3,n).then(()=>r)}#y(e,n,r,i){return this.#g(e,n,i).then(()=>r?this.#_(e,i):Promise.resolve(null))}deliver(e,n){return this.#r?e?this.#g(this.CHANNEL_NETWORK,e,n):Promise.resolve():Promise.reject("DeviceDisconnected")}transmit(e,n){return this.#r?e?this.#g(this.CHANNEL_NETWORK,e,n):Promise.resolve():Promise.reject("DeviceDisconnected")}request(e,n,r){return this.#r?e?this.#y(this.CHANNEL_DEVICE,e,n,r):Promise.resolve():Promise.reject("DeviceDisconnected")}setClock(e){return this.#r?new Promise(async(n,r)=>{for(let i=0;i<3;i++)try{await this.#g(this.CHANNEL_CLOCK,[...Uh(e.millis(),8)]),w.debug("Clock write success"),n();return}catch{w.warn("Clock write failed"),await ie(1e3)}r("ClockWriteFailed")}):Promise.reject("DeviceDisconnected")}getClock(){return this.#r?new Promise(async(e,n)=>{for(let r=0;r<3;r++){await ie(1e3);try{const i=await this.#_(this.CHANNEL_CLOCK),o=new Ct(i).readUint64();w.debug("Clock read success:",o),e(new _o(o));return}catch(i){w.warn("Clock read failed:",i)}}n("ClockReadFailed")}):Promise.reject("DeviceDisconnected")}updateFW(e){return this.#t?this.#n?(w.warn("Communication in proccess"),Promise.reject("UpdateFailed")):(this.#n=!0,new Promise(async(n,r)=>{this.#p=32;let s=0,o=3984,l=0;w.debug("OTA UPDATE"),w.debug(e);const c=new Date().getTime();try{this.#e.emit("ota_status","begin");{w.debug("OTA RESET");const f=[G.FLAG_OTA_RESET,0,...ne(0,4)];await this.#g(this.CHANNEL_DEVICE,f)}await ie(100);{w.debug("OTA BEGIN");const f=[G.FLAG_OTA_BEGIN,0,...ne(e.length,4)];await this.#g(this.CHANNEL_DEVICE,f,2e4)}for(await ie(8e3),w.debug("OTA WRITE");l<e.length;){o>e.length&&(o=e.length);const f=[G.FLAG_OTA_WRITE,0,...ne(l,4),...e.slice(s,o)];await this.#g(this.CHANNEL_DEVICE,f),l+=o-s;const h=Math.floor(l*1e4/e.length)/100;w.debug(h+"%"),this.#e.emit("ota_progress",h),s+=3984,o=s+3984}await ie(100);{w.debug("OTA END");const f=[G.FLAG_OTA_END,0,...ne(l,4)];await this.#g(this.CHANNEL_DEVICE,f)}await ie(2e3),w.info("Firmware written in "+(new Date().getTime()-c)/1e3+" seconds"),this.#e.emit("ota_status","success"),n()}catch(f){w.error(f),this.#e.emit("ota_status","fail"),r("UpdateFailed")}}).finally(()=>{this.#p=8,this.#n=!1})):(w.warn("Serial Port is null"),Promise.reject("UpdateFailed"))}destroy(){return this.disconnect().catch(()=>{}).then(()=>this.unselect()).catch(()=>{})}}/*!
 * Socket.IO v4.4.1
 * (c) 2014-2022 Guillermo Rauch
 * Released under the MIT License.
 */var GU=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,HU=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Gv=function(t){var e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));for(var i,s,o=GU.exec(t||""),l={},c=14;c--;)l[HU[c]]=o[c]||"";return n!=-1&&r!=-1&&(l.source=e,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=function(f,h){var p=/\/{2,9}/g,m=h.replace(p,"/").split("/");return h.substr(0,1)!="/"&&h.length!==0||m.splice(0,1),h.substr(h.length-1,1)=="/"&&m.splice(m.length-1,1),m}(0,l.path),l.queryKey=(i=l.query,s={},i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(f,h,p){h&&(s[h]=p)}),s),l},Hv={exports:{}};try{Hv.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{Hv.exports=!1}var zl=Hv.exports,qi=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function AA(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||zl))return new XMLHttpRequest}catch{}if(!e)try{return new qi[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function RA(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const KU=setTimeout,qU=clearTimeout;function $h(t,e){e.useNativeTimers?(t.setTimeoutFn=KU.bind(qi),t.clearTimeoutFn=qU.bind(qi)):(t.setTimeoutFn=setTimeout.bind(qi),t.clearTimeoutFn=clearTimeout.bind(qi))}var Va=Jt;function Jt(t){if(t)return function(e){for(var n in Jt.prototype)e[n]=Jt.prototype[n];return e}(t)}Jt.prototype.on=Jt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},Jt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},Jt.prototype.off=Jt.prototype.removeListener=Jt.prototype.removeAllListeners=Jt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+t],this},Jt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e)}return this},Jt.prototype.emitReserved=Jt.prototype.emit,Jt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},Jt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const kr=Object.create(null);kr.open="0",kr.close="1",kr.ping="2",kr.pong="3",kr.message="4",kr.upgrade="5",kr.noop="6";const Jf=Object.create(null);Object.keys(kr).forEach(t=>{Jf[kr[t]]=t});const YU={type:"error",data:"parser error"},QU=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",JU=typeof ArrayBuffer=="function",kA=({type:t,data:e},n,r)=>QU&&e instanceof Blob?n?r(e):qS(e,r):JU&&(e instanceof ArrayBuffer||(zl=e,typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(zl):zl&&zl.buffer instanceof ArrayBuffer))?n?r(e):qS(new Blob([e]),r):r(kr[t]+(e||"")),qS=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+r)},n.readAsDataURL(t)};for(var YS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vl=typeof Uint8Array>"u"?[]:new Uint8Array(256),Rf=0;Rf<YS.length;Rf++)Vl[YS.charCodeAt(Rf)]=Rf;const XU=typeof ArrayBuffer=="function",xA=(t,e)=>{if(typeof t!="string")return{type:"message",data:NA(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:ZU(t.substring(1),e)}:Jf[n]?t.length>1?{type:Jf[n],data:t.substring(1)}:{type:Jf[n]}:YU},ZU=(t,e)=>{if(XU){const n=function(r){var i,s,o,l,c,f=.75*r.length,h=r.length,p=0;r[r.length-1]==="="&&(f--,r[r.length-2]==="="&&f--);var m=new ArrayBuffer(f),y=new Uint8Array(m);for(i=0;i<h;i+=4)s=Vl[r.charCodeAt(i)],o=Vl[r.charCodeAt(i+1)],l=Vl[r.charCodeAt(i+2)],c=Vl[r.charCodeAt(i+3)],y[p++]=s<<2|o>>4,y[p++]=(15&o)<<4|l>>2,y[p++]=(3&l)<<6|63&c;return m}(t);return NA(n,e)}return{base64:!0,data:t}},NA=(t,e)=>e==="blob"&&t instanceof ArrayBuffer?new Blob([t]):t,QS=String.fromCharCode(30);let OA=class extends Va{constructor(e){super(),this.writable=!1,$h(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,n){const r=new Error(e);return r.type="TransportError",r.description=n,super.emit("error",r),this}open(){return this.readyState!=="closed"&&this.readyState!==""||(this.readyState="opening",this.doOpen()),this}close(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(e){const n=xA(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emit("packet",e)}onClose(){this.readyState="closed",super.emit("close")}};var JS,PA="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),DA={},XS=0,Yi=0;function Kv(t){var e="";do e=PA[t%64]+e,t=Math.floor(t/64);while(t>0);return e}function qv(){var t=Kv(+new Date);return t!==JS?(XS=0,JS=t):t+"."+Kv(XS++)}for(;Yi<64;Yi++)DA[PA[Yi]]=Yi;qv.encode=Kv,qv.decode=function(t){var e=0;for(Yi=0;Yi<t.length;Yi++)e=64*e+DA[t.charAt(Yi)];return e};var LA=qv,M0={encode:function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},decode:function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}};let e5=class extends OA{constructor(){super(...arguments),this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){((n,r)=>{const i=n.split(QS),s=[];for(let o=0;o<i.length;o++){const l=xA(i[o],r);if(s.push(l),l.type==="error")break}return s})(e,this.socket.binaryType).forEach(n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose(),!1;this.onPacket(n)}),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,((n,r)=>{const i=n.length,s=new Array(i);let o=0;n.forEach((l,c)=>{kA(l,!1,f=>{s[c]=f,++o===i&&r(s.join(QS))})})})(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emit("drain")})})}uri(){let e=this.query||{};const n=this.opts.secure?"https":"http";let r="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=LA()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&(n==="https"&&Number(this.opts.port)!==443||n==="http"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port);const i=M0.encode(e);return n+"://"+(this.opts.hostname.indexOf(":")!==-1?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(i.length?"?"+i:"")}};function t5(){}const n5=new AA({xdomain:!1}).responseType!=null;let pa=class Xf extends Va{constructor(e,n){super(),$h(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.async=n.async!==!1,this.data=n.data!==void 0?n.data:null,this.create()}create(){const e=RA(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const n=this.xhr=new AA(e);try{n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(r){return void this.setTimeoutFn(()=>{this.onError(r)},0)}typeof document<"u"&&(this.index=Xf.requestsCount++,Xf.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(this.xhr!==void 0&&this.xhr!==null){if(this.xhr.onreadystatechange=t5,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Xf.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&this.onData(e)}abort(){this.cleanup()}};pa.requestsCount=0,pa.requests={},typeof document<"u"&&(typeof attachEvent=="function"?attachEvent("onunload",ZS):typeof addEventListener=="function"&&addEventListener("onpagehide"in qi?"pagehide":"unload",ZS,!1));function ZS(){for(let t in pa.requests)pa.requests.hasOwnProperty(t)&&pa.requests[t].abort()}const r5=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),Rl=qi.WebSocket||qi.MozWebSocket,eb=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";let i5=class FA extends OA{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,r=eb?{}:RA(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=eb?new Rl(e,n,r):n?new Rl(e,n):new Rl(e)}catch(i){return this.emit("error",i)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;kA(r,this.supportsBinary,s=>{try{this.ws.send(s)}catch{}i&&r5(()=>{this.writable=!0,this.emit("drain")},this.setTimeoutFn)})}}doClose(){this.ws!==void 0&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const n=this.opts.secure?"wss":"ws";let r="";this.opts.port&&(n==="wss"&&Number(this.opts.port)!==443||n==="ws"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=LA()),this.supportsBinary||(e.b64=1);const i=M0.encode(e);return n+"://"+(this.opts.hostname.indexOf(":")!==-1?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(i.length?"?"+i:"")}check(){return!(!Rl||"__initialize"in Rl&&this.name===FA.prototype.name)}};const s5={websocket:i5,polling:class extends e5{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port,this.xs=t.secure!==n}const e=t&&t.forceBase64;this.supportsBinary=n5&&!e}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new pa(this.uri(),t)}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",r=>{this.onError("xhr post error",r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",e=>{this.onError("xhr poll error",e)}),this.pollXhr=t}}};let MA=class Wo extends Va{constructor(e,n={}){super(),e&&typeof e=="object"&&(n=e,e=null),e?(e=Gv(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=Gv(n.host).host),$h(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},n),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=M0.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=function(i){const s={};for(let o in i)i.hasOwnProperty(o)&&(s[o]=i[o]);return s}(this.opts.query);n.EIO=4,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts.transportOptions[e],this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new s5[e](r)}open(){let e;if(this.opts.rememberUpgrade&&Wo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else{if(this.transports.length===0)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch{return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(e){let n=this.createTransport(e),r=!1;Wo.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",p=>{if(!r)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Wo.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(h(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=n.name,this.emitReserved("upgradeError",m)}}))};function s(){r||(r=!0,h(),n.close(),n=null)}const o=p=>{const m=new Error("probe error: "+p);m.transport=n.name,s(),this.emitReserved("upgradeError",m)};function l(){o("transport closed")}function c(){o("socket closed")}function f(p){n&&p.name!==n.name&&s()}const h=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",c),this.off("upgrading",f)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",c),this.once("upgrading",f),n.open()}onOpen(){if(this.readyState="open",Wo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(e,n,r){return this.sendPacket("message",e,n,r),this}send(e,n,r){return this.sendPacket("message",e,n,r),this}sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;(r=r||{}).compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return this.readyState!=="opening"&&this.readyState!=="open"||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){Wo.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){this.readyState!=="opening"&&this.readyState!=="open"&&this.readyState!=="closing"||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let r=0;const i=e.length;for(;r<i;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}};MA.protocol=4;const o5=typeof ArrayBuffer=="function",UA=Object.prototype.toString,a5=typeof Blob=="function"||typeof Blob<"u"&&UA.call(Blob)==="[object BlobConstructor]",l5=typeof File=="function"||typeof File<"u"&&UA.call(File)==="[object FileConstructor]";function U0(t){return o5&&(t instanceof ArrayBuffer||(e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(t))||a5&&t instanceof Blob||l5&&t instanceof File}function Zf(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Zf(t[n]))return!0;return!1}if(U0(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Zf(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Zf(t[n]))return!0;return!1}function u5(t){const e=[],n=t.data,r=t;return r.data=Yv(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Yv(t,e){if(!t)return t;if(U0(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=Yv(t[r],e);return n}if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=Yv(t[r],e));return n}return t}function c5(t,e){return t.data=Qv(t.data,e),t.attachments=void 0,t}function Qv(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Qv(t[n],e);else if(typeof t=="object")for(const n in t)t.hasOwnProperty(n)&&(t[n]=Qv(t[n],e));return t}var Re;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Re||(Re={}));class $0 extends Va{constructor(){super()}add(e){let n;if(typeof e=="string")n=this.decodeString(e),n.type===Re.BINARY_EVENT||n.type===Re.BINARY_ACK?(this.reconstructor=new f5(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n);else{if(!U0(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n))}}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Re[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Re.BINARY_EVENT||r.type===Re.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=function(o){try{return JSON.parse(o)}catch{return!1}}(e.substr(n));if(!$0.isPayloadValid(r.type,s))throw new Error("invalid payload");r.data=s}return r}static isPayloadValid(e,n){switch(e){case Re.CONNECT:return typeof n=="object";case Re.DISCONNECT:return n===void 0;case Re.CONNECT_ERROR:return typeof n=="string"||typeof n=="object";case Re.EVENT:case Re.BINARY_EVENT:return Array.isArray(n)&&n.length>0;case Re.ACK:case Re.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class f5{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=c5(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var d5=Object.freeze({__proto__:null,protocol:5,get PacketType(){return Re},Encoder:class{encode(t){return t.type!==Re.EVENT&&t.type!==Re.ACK||!Zf(t)?[this.encodeAsString(t)]:(t.type=t.type===Re.EVENT?Re.BINARY_EVENT:Re.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==Re.BINARY_EVENT&&t.type!==Re.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data)),e}encodeAsBinary(t){const e=u5(t),n=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(n),r}},Decoder:$0});function dr(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const h5=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class $A extends Va{constructor(e,n,r){super(),this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const e=this.io;this.subs=[dr(e,"open",this.onopen.bind(this)),dr(e,"packet",this.onpacket.bind(this)),dr(e,"error",this.onerror.bind(this)),dr(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(h5.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');n.unshift(e);const r={type:Re.EVENT,data:n,options:{}};if(r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const s=this.ids++,o=n.pop();this._registerAckCallback(s,o),r.id=s}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?this.packet(r):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,n){const r=this.flags.timeout;if(r===void 0)return void(this.acks[e]=n);const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===e&&this.sendBuffer.splice(s,1);n.call(this,new Error("operation has timed out"))},r);this.acks[e]=(...s)=>{this.io.clearTimeoutFn(i),n.apply(this,[null,...s])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this.packet({type:Re.CONNECT,data:e})}):this.packet({type:Re.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Re.CONNECT:if(e.data&&e.data.sid){const r=e.data.sid;this.onconnect(r)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Re.EVENT:case Re.BINARY_EVENT:this.onevent(e);break;case Re.ACK:case Re.BINARY_ACK:this.onack(e);break;case Re.DISCONNECT:this.ondisconnect();break;case Re.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n)}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e)}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Re.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>this.packet(e)),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Re.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}var p5=zo;function zo(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}zo.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=1&Math.floor(10*e)?t+n:t-n}return 0|Math.min(t,this.max)},zo.prototype.reset=function(){this.attempts=0},zo.prototype.setMin=function(t){this.ms=t},zo.prototype.setMax=function(t){this.max=t},zo.prototype.setJitter=function(t){this.jitter=t};class Jv extends Va{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,$h(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new p5({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||d5;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new MA(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=dr(n,"open",function(){r.onopen(),e&&e()}),s=dr(n,"error",o=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",o),e?e(o):r.maybeReconnectOnOpen()});if(this._timeout!==!1){const o=this._timeout;o===0&&i();const l=this.setTimeoutFn(()=>{i(),n.close(),n.emit("error",new Error("timeout"))},o);this.opts.autoUnref&&l.unref(),this.subs.push(function(){clearTimeout(l)})}return this.subs.push(i),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(dr(e,"ping",this.onping.bind(this)),dr(e,"data",this.ondata.bind(this)),dr(e,"error",this.onerror.bind(this)),dr(e,"close",this.onclose.bind(this)),dr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r||(r=new $A(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(function(){clearTimeout(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const kl={};function su(t,e){typeof t=="object"&&(e=t,t=void 0);const n=function(c,f="",h){let p=c;h=h||typeof location<"u"&&location,c==null&&(c=h.protocol+"//"+h.host),typeof c=="string"&&(c.charAt(0)==="/"&&(c=c.charAt(1)==="/"?h.protocol+c:h.host+c),/^(https?|wss?):\/\//.test(c)||(c=h!==void 0?h.protocol+"//"+c:"https://"+c),p=Gv(c)),p.port||(/^(http|ws)$/.test(p.protocol)?p.port="80":/^(http|ws)s$/.test(p.protocol)&&(p.port="443")),p.path=p.path||"/";const m=p.host.indexOf(":")!==-1?"["+p.host+"]":p.host;return p.id=p.protocol+"://"+m+":"+p.port+f,p.href=p.protocol+"://"+m+(h&&h.port===p.port?"":":"+p.port),p}(t,(e=e||{}).path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=kl[i]&&s in kl[i].nsps;let l;return e.forceNew||e["force new connection"]||e.multiplex===!1||o?l=new Jv(r,e):(kl[i]||(kl[i]=new Jv(r,e)),l=kl[i]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(su,{Manager:Jv,Socket:$A,io:su,connect:su});let gm=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const BA="https://ws.host.spectoda.com/";class g5{#e;#t;#n;#r;constructor(e){this.type="websockets",this.#e=e,this.#t=!1,this.#n=!1,this.socket=null,this.#r=null}userSelect(e){return this.#t=!0,Promise.resolve({connector:this.type})}autoSelect(e,n,r){return this.#t=!0,Promise.resolve({connector:this.type})}selected(){return Promise.resolve(this.#t?{connector:this.type}:null)}unselect(){return this.#t=!1,Promise.resolve()}scan(e,n){return Promise.resolve("{}")}connect(e){if(this.#t){if(this.#n)return Promise.resolve({connector:this.type});{const n=setTimeout(()=>{console.error("WebSockets timeout"),reject("ConnectionFailed")},e*1.5);return new Promise((r,i)=>{this.socket?this.socket.connect():(this.socket=su(BA,{transports:["websocket"]}),window.wssocket=this.socket,w.debug(this.socket),this.socket.on("connect",s=>{w.debug("> Connected to remote control"),this.#n=!0,this.#e.emit("#connected"),clearTimeout(n),r({connector:this.type})}),this.socket.on("disconnect",()=>{w.debug("> Disconnected from remote control"),this.#n=!1,this.#e.emit("#disconnected"),clearTimeout(n),i("ConnectionFailed")}),this.socket.on("connect_error",s=>{w.error(s),this.#n=!1,clearTimeout(n),i("ConnectionFailed")}))})}}else return Promise.reject("NotSelected")}connected(){return Promise.resolve(this.#n?{connector:this.type}:null)}disconnect(){return this.#t?(this.#n&&(this.#n=!1,this.socket.disconnect()),Promise.resolve()):Promise.reject("NotSelected")}deliver(e,n){if(this.#n){const r=gm();this.socket.emit("deliver",r,e);const i=this.socket;return this.#r=new Promise((s,o)=>{const l=setTimeout(()=>f(r,"timeout"),n);function c(h,p){h===h&&(s(p),i.off("response_error",f),clearTimeout(l))}function f(h,p){h===h&&(o(p),i.off("response_success",c),clearTimeout(l))}this.socket.once("response_success",c),this.socket.once("response_error",f)}),this.#r}else return Promise.reject("Disconnected")}transmit(e,n){if(this.#n){const r=gm();this.socket.emit("transmit",r,e);const i=this.socket;return this.#r=new Promise((s,o)=>{const l=setTimeout(()=>f(r,"timeout"),n);function c(h,p){h===h&&(s(p),i.off("response_error",f),clearTimeout(l))}function f(h,p){h===h&&(o(p),i.off("response_success",c),clearTimeout(l))}this.socket.once("response_success",c),this.socket.once("response_error",f)}),this.#r}else return Promise.reject("Disconnected")}request(e,n,r){if(this.#n){const i=gm();this.socket.emit("request",i,e,n);const s=this.socket;return this.#r=new Promise((o,l)=>{const c=setTimeout(()=>h(i,"timeout"),r);function f(p,m){p===p&&(o(new DataView(new Uint8Array(m).buffer)),s.off("response_error",h),clearTimeout(c))}function h(p,m){p===p&&(l(m),s.off("response_success",f),clearTimeout(c))}this.socket.once("response_success",f),this.socket.once("response_error",h)}),this.#r}else return Promise.reject("Disconnected")}setClock(e){return Promise.reject("Not Supported")}getClock(){return this.#n?Promise.resolve(new _o(0)):Promise.reject("Disconnected")}updateFW(e){return Promise.reject("Not supported")}destroy(){return this.disconnect().catch(()=>{}).then(()=>this.unselect()).catch(()=>{})}}class m5{constructor(){if(window.flutterConnection){w.debug("FlutterConnection already inited");return}if(w.debug("Initing FlutterConnection"),window.flutterConnection={},window.flutterConnection.resolve=null,window.flutterConnection.reject=null,window.flutterConnection.emit=null,this.available())w.debug("Flutter Connector available"),window.addEventListener("#resolve",i=>{const s=i.detail.value;w.debug(`Triggered #resolve: [${s}]`),window.flutterConnection.resolve(s)}),window.addEventListener("#reject",i=>{const s=i.detail.value;w.debug(`Triggered #reject: [${s}]`),window.flutterConnection.reject(s)}),window.addEventListener("#emit",i=>{const s=i.detail.value;w.debug(`Triggered #emit: ${s}`,s),window.flutterConnection.emit(s)}),window.addEventListener("#process",i=>{const s=i.detail.value;w.debug(`Triggered #process: [${s}]`,s),window.flutterConnection.process(s)});else{let i=function(s){return!1};var r=i;w.debug("flutter_inappwebview in window NOT detected"),w.info("Simulating Flutter Functions");var e=!1,n=!1;window.flutter_inappwebview={},window.flutter_inappwebview.callHandler=async function(s,o,l,c,f){switch(s){case"userSelect":{if(e&&await window.flutter_inappwebview.callHandler("disconnect"),await ie(Math.random()*5e3),i()){window.flutterConnection.reject("UserCanceledSelection");return}if(i()){window.flutterConnection.reject("SelectionFailed");return}n=!0,window.flutterConnection.resolve('{"connector":"spectodaconnect"}')}break;case"autoSelect":{if(e&&await window.flutter_inappwebview.callHandler("disconnect"),await ie(Math.random()*5e3),i()){window.flutterConnection.reject("SelectionFailed");return}n=!0,window.flutterConnection.resolve('{"connector":"spectodaconnect"}')}break;case"selected":n?window.flutterConnection.resolve('{"connector":"spectodaconnect"}'):window.flutterConnection.resolve();break;case"unselect":e&&await window.flutterConnection.disconnect(),await ie(10),n=!1,window.flutterConnection.resolve();break;case"scan":{if(e&&await window.flutter_inappwebview.callHandler("disconnect"),await ie(Math.random()*5e3),i()){window.flutterConnection.reject("SelectionFailed");return}n=!0,window.flutterConnection.resolve('{"connector":"spectodaconnect"}')}break;case"connect":{if(!n){window.flutterConnection.reject("DeviceNotSelected");return}if(await ie(Math.random()*5e3),i()){window.flutterConnection.reject("ConnectionFailed");return}e=!0,window.flutterConnection.resolve('{"connector":"spectodaconnect"}'),await ie(1e3),window.flutterConnection.emit("#connected"),setTimeout(()=>{window.flutterConnection.emit("#disconnected"),e=!1},6e4)}break;case"disconnect":e&&(await ie(100),e=!1,window.flutterConnection.emit("#disconnected")),window.flutterConnection.resolve();break;case"connected":e?window.flutterConnection.resolve('{"connector":"spectodaconnect"}'):window.flutterConnection.resolve();break;case"deliver":{if(!e){window.flutterConnection.reject("DeviceDisconnected");return}if(await ie(25),i()){window.flutterConnection.reject("DeliverFailed");return}window.flutterConnection.resolve()}break;case"transmit":{if(!e){window.flutterConnection.reject("DeviceDisconnected");return}if(await ie(10),i()){window.flutterConnection.reject("TransmitFailed");return}window.flutterConnection.resolve()}break;case"request":{if(!e){window.flutterConnection.reject("DeviceDisconnected");return}if(await ie(50),i()){window.flutterConnection.reject("RequestFailed");return}window.flutterConnection.resolve([246,1,0,0,0,188,251,18,0,212,247,18,0,0])}break;case"writeClock":{if(!e){window.flutterConnection.reject("DeviceDisconnected");return}if(await ie(10),i()){window.flutterConnection.reject("ClockWriteFailed");return}window.flutterConnection.resolve()}break;case"readClock":{if(!e){window.flutterConnection.reject("DeviceDisconnected");return}if(await ie(50),i()){window.flutterConnection.reject("ClockReadFailed");return}window.flutterConnection.resolve([0,0,0,0])}break;case"updateFW":{if(!e){window.flutterConnection.reject("DeviceDisconnected");return}if(window.flutterConnection.emit("ota_status","begin"),await ie(1e4),i()){window.flutterConnection.emit("ota_status","fail"),window.flutterConnection.reject("UpdateFailed");return}for(let h=1;h<=100;h++)if(window.flutterConnection.emit("ota_progress",h),await ie(25),i()){window.flutterConnection.emit("ota_status","fail"),window.flutterConnection.reject("UpdateFailed");return}if(await ie(1e3),i()){window.flutterConnection.emit("ota_status","fail"),window.flutterConnection.reject("UpdateFailed");return}window.flutterConnection.emit("ota_status","success"),window.flutterConnection.resolve()}break;default:w.error("Unknown handler");break}}}}available(){return"flutter_inappwebview"in window}}class v5 extends m5{#e;#t;constructor(e){super(),this.type="spectodaconnect",this.#e=e,this.#t=null,window.flutterConnection.emit=n=>{this.#e.emit(n,null)},window.flutterConnection.process=n=>{this.#e.process(new DataView(new Uint8Array(n).buffer))}}#n(e,n,r){let i=setTimeout(()=>{window.flutterConnection.reject("ResponseTimeout "+r)},n);return e.finally(()=>{clearTimeout(i)})}async ping(){console.time("ping_measure");for(let e=0;e<1e3;e++)this.#t=new Promise((n,r)=>{window.flutterConnection.resolve=n,window.flutterConnection.reject=r}),window.flutterConnection.ping(),await this.#t;return console.timeEnd("ping_measure"),this.#n(this.#t,1e4,"ping")}userSelect(e,n=6e4){const r=JSON.stringify(e);return w.debug(`userSelect(criteria=${r}, timeout=${n})`),this.#t=new Promise((i,s)=>{window.flutterConnection.resolve=function(o){i(o?JSON.parse(o):null)},window.flutterConnection.reject=s}),window.flutter_inappwebview.callHandler("userSelect",r,n),this.#n(this.#t,n*2,"userSelect")}autoSelect(e,n=1e3,r=1e4){const i=JSON.stringify(e);return w.debug(`autoSelect(criteria=${i}, scan_period=${n}, timeout=${r})`),this.#t=new Promise((s,o)=>{window.flutterConnection.resolve=function(l){s(l?JSON.parse(l):null)},window.flutterConnection.reject=o}),window.flutter_inappwebview.callHandler("autoSelect",i,n,r),this.#n(this.#t,r*2,"autoSelect")}selected(){return w.debug("selected()"),this.#t=new Promise((e,n)=>{window.flutterConnection.resolve=function(r){e(r?JSON.parse(r):null)},window.flutterConnection.reject=n}),window.flutter_inappwebview.callHandler("selected"),this.#n(this.#t,1e3)}unselect(){return w.debug("unselect()"),this.#t=new Promise((e,n)=>{window.flutterConnection.resolve=e,window.flutterConnection.reject=n}),window.flutter_inappwebview.callHandler("unselect"),this.#n(this.#t,1e3,"unselect")}scan(e,n=5e3){const r=JSON.stringify(e);return w.debug(`scan(criteria=${r}, scan_period=${n})`),this.#t=new Promise((i,s)=>{window.flutterConnection.resolve=function(o){i(o?JSON.parse(o):null)},window.flutterConnection.reject=s}),window.flutter_inappwebview.callHandler("scan",r,n),this.#n(this.#t,n*2,"scan")}connect(e=1e4){return w.debug(`connect(timeout=${e})`),e<=0?Promise.reject("ConnectionTimeout"):(this.#t=new Promise((n,r)=>{window.flutterConnection.resolve=function(i){n(i?JSON.parse(i):null)},window.flutterConnection.reject=r}),window.flutter_inappwebview.callHandler("connect",e<1e3?1e3:e),this.#n(this.#t,e<5e3?1e4:e*2,"connect").then(()=>(w.debug("Sleeping for 200ms"),ie(200))))}disconnect(){return w.debug("disconnect()"),this.#t=new Promise((e,n)=>{window.flutterConnection.resolve=e,window.flutterConnection.reject=n}),window.flutter_inappwebview.callHandler("disconnect"),this.#n(this.#t,1e4,"disconnect")}connected(){return w.debug("connected()"),this.#t=new Promise((e,n)=>{window.flutterConnection.resolve=function(r){e(r?JSON.parse(r):null)},window.flutterConnection.reject=n}),window.flutter_inappwebview.callHandler("connected"),this.#n(this.#t,1e3,"connected")}deliver(e,n=5e3){return w.debug(`deliver(payload=[${e}], timeout=${n})`),this.#t=new Promise((r,i)=>{window.flutterConnection.resolve=r,window.flutterConnection.reject=i}),window.flutter_inappwebview.callHandler("deliver",e,n),this.#n(this.#t,n*1.5,"deliver")}transmit(e,n=1e3){return w.debug(`transmit(payload=[${e}], timeout=${n})`),this.#t=new Promise((r,i)=>{window.flutterConnection.resolve=r,window.flutterConnection.reject=i}),window.flutter_inappwebview.callHandler("transmit",e,n),this.#n(this.#t,n*1.5,"transmit")}request(e,n=!0,r=5e3){return w.debug(`request(payload=[${e}], read_response=${n?"true":"false"}, timeout=${r})`),this.#t=new Promise((i,s)=>{window.flutterConnection.resolve=o=>{i(new DataView(new Uint8Array(o).buffer))},window.flutterConnection.reject=s}),window.flutter_inappwebview.callHandler("request",e,n,r),this.#n(this.#t,r*1.5,"request")}setClock(e){return w.debug("setClock()"),new Promise(async(n,r)=>{for(let i=0;i<3;i++){await ie(1e3);try{this.#t=new Promise((l,c)=>{window.flutterConnection.resolve=l,window.flutterConnection.reject=c});const s=e.millis(),o=Uh(s,8);window.flutter_inappwebview.callHandler("writeClock",o),await this.#n(this.#t,5e3,"writeClock"),w.debug("Clock write success:",s),n();return}catch(s){w.warn("Clock write failed: "+s)}}r("Clock write failed")})}getClock(){return w.debug("getClock()"),new Promise(async(e,n)=>{for(let r=0;r<3;r++)try{this.#t=new Promise((l,c)=>{window.flutterConnection.resolve=l,window.flutterConnection.reject=c}),window.flutter_inappwebview.callHandler("readClock");const i=await this.#n(this.#t,5e3,"readClock"),o=new Ct(new DataView(new Uint8Array(i).buffer)).readUint64();w.debug("Clock read success:",o),e(new _o(o));return}catch(i){w.warn("Clock read failed:",i),await ie(1e3)}n("Clock read failed")})}updateFW(e){return w.debug(`updateFW(firmware_bytes.length=${e.length})`),this.#e.requestWakeLock(),new Promise(async(n,r)=>{const i=Ou()?480:3984;let s=0,o=i,l=0;w.info("OTA UPDATE"),w.verbose(e);const c=new Date().getTime();await ie(100);try{this.#e.emit("ota_status","begin");{w.info("OTA RESET");const h=[G.FLAG_OTA_RESET,0,...ne(0,4)];await this.request(h,!1)}await ie(100);{w.info("OTA BEGIN");const h=[G.FLAG_OTA_BEGIN,0,...ne(e.length,4)];await this.request(h,!1,2e4)}for(await ie(8e3),w.info("OTA WRITE");l<e.length;){o>e.length&&(o=e.length);const h=[G.FLAG_OTA_WRITE,0,...ne(l,4),...e.slice(s,o)];await this.request(h,!1),l+=o-s;const p=Math.floor(l*1e4/e.length)/100;w.debug(p+"%"),this.#e.emit("ota_progress",p),s+=i,o=s+i}await ie(100);{w.info("OTA END");const h=[G.FLAG_OTA_END,0,...ne(l,4)];await this.request(h,!1)}await ie(100),w.info("Rebooting device...");const f=[G.FLAG_DEVICE_REBOOT_REQUEST];await this.request(f,!1),w.debug("Firmware written in "+(new Date().getTime()-c)/1e3+" seconds"),this.#e.emit("ota_status","success"),n(null)}catch(f){this.#e.emit("ota_status","fail"),r(f)}}).then(()=>this.disconnect()).finally(()=>{this.#e.releaseWakeLock()})}destroy(){return this.disconnect().catch(()=>{}).then(()=>this.unselect()).catch(()=>{})}}function os(t){return os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},os(t)}function Ur(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $r(t,e,n){return e&&tb(t.prototype,e),n&&tb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function as(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xv(t,e){return Xv=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Xv(t,e)}function Bh(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xv(t,e)}function ic(t,e){if(e&&(os(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return as(t)}function Mr(t){return Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Mr(t)}function Cs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _5(t){if(Array.isArray(t))return t}function y5(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w5(t,e){if(t){if(typeof t=="string")return nb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nb(t,e)}}function E5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S5(t){return _5(t)||y5(t)||w5(t)||E5()}function rb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ib(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rb(Object(n),!0).forEach(function(r){Cs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var b5={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,n){console&&console[e]&&console[e].apply(console,n)}},C5=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ur(this,t),this.init(e,n)}return $r(t,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=n||b5,this.options=r,this.debug=r.debug}},{key:"setDebug",value:function(n){this.debug=n}},{key:"log",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this.forward(r,"log","",!0)}},{key:"warn",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this.forward(r,"warn","",!0)}},{key:"error",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this.forward(r,"error","")}},{key:"deprecate",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(n,r,i,s){return s&&!this.debug?null:(typeof n[0]=="string"&&(n[0]="".concat(i).concat(this.prefix," ").concat(n[0])),this.logger[r](n))}},{key:"create",value:function(n){return new t(this.logger,ib(ib({},{prefix:"".concat(this.prefix,":").concat(n,":")}),this.options))}}]),t}(),Nr=new C5,vs=function(){function t(){Ur(this,t),this.observers={}}return $r(t,[{key:"on",value:function(n,r){var i=this;return n.split(" ").forEach(function(s){i.observers[s]=i.observers[s]||[],i.observers[s].push(r)}),this}},{key:"off",value:function(n,r){if(this.observers[n]){if(!r){delete this.observers[n];return}this.observers[n]=this.observers[n].filter(function(i){return i!==r})}}},{key:"emit",value:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];if(this.observers[n]){var o=[].concat(this.observers[n]);o.forEach(function(c){c.apply(void 0,i)})}if(this.observers["*"]){var l=[].concat(this.observers["*"]);l.forEach(function(c){c.apply(c,[n].concat(i))})}}}]),t}();function xl(){var t,e,n=new Promise(function(r,i){t=r,e=i});return n.resolve=t,n.reject=e,n}function sb(t){return t==null?"":""+t}function I5(t,e,n){t.forEach(function(r){e[r]&&(n[r]=e[r])})}function B0(t,e,n){function r(l){return l&&l.indexOf("###")>-1?l.replace(/###/g,"."):l}function i(){return!t||typeof t=="string"}for(var s=typeof e!="string"?[].concat(e):e.split(".");s.length>1;){if(i())return{};var o=r(s.shift());!t[o]&&n&&(t[o]=new n),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={}}return i()?{}:{obj:t,k:r(s.shift())}}function ob(t,e,n){var r=B0(t,e,Object),i=r.obj,s=r.k;i[s]=n}function T5(t,e,n,r){var i=B0(t,e,Object),s=i.obj,o=i.k;s[o]=s[o]||[],r&&(s[o]=s[o].concat(n)),r||s[o].push(n)}function Md(t,e){var n=B0(t,e),r=n.obj,i=n.k;if(r)return r[i]}function ab(t,e,n){var r=Md(t,n);return r!==void 0?r:Md(e,n)}function jA(t,e,n){for(var r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?n&&(t[r]=e[r]):jA(t[r],e[r],n):t[r]=e[r]);return t}function Uo(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var A5={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function R5(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,function(e){return A5[e]}):t}var jh=typeof window<"u"&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,k5=[" ",",","?","!",";"];function x5(t,e,n){e=e||"",n=n||"";var r=k5.filter(function(l){return e.indexOf(l)<0&&n.indexOf(l)<0});if(r.length===0)return!0;var i=new RegExp("(".concat(r.map(function(l){return l==="?"?"\\?":l}).join("|"),")")),s=!i.test(t);if(!s){var o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s}function lb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lb(Object(n),!0).forEach(function(r){Cs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N5(t){var e=O5();return function(){var r=Mr(t),i;if(e){var s=Mr(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ic(this,i)}}function O5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function WA(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(t){if(t[e])return t[e];for(var r=e.split(n),i=t,s=0;s<r.length;++s){if(!i||typeof i[r[s]]=="string"&&s+1<r.length)return;if(i[r[s]]===void 0){for(var o=2,l=r.slice(s,s+o).join(n),c=i[l];c===void 0&&r.length>s+o;)o++,l=r.slice(s,s+o).join(n),c=i[l];if(c===void 0)return;if(e.endsWith(l)){if(typeof c=="string")return c;if(l&&typeof c[l]=="string")return c[l]}var f=r.slice(s+o).join(n);return f?WA(c,f,n):void 0}i=i[r[s]]}return i}}var P5=function(t){Bh(n,t);var e=N5(n);function n(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Ur(this,n),i=e.call(this),jh&&vs.call(as(i)),i.data=r||{},i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return $r(n,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var s=this.options.ns.indexOf(i);s>-1&&this.options.ns.splice(s,1)}},{key:"getResource",value:function(i,s,o){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},c=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,f=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure,h=[i,s];o&&typeof o!="string"&&(h=h.concat(o)),o&&typeof o=="string"&&(h=h.concat(c?o.split(c):o)),i.indexOf(".")>-1&&(h=i.split("."));var p=Md(this.data,h);return p||!f||typeof o!="string"?p:WA(this.data&&this.data[i]&&this.data[i][s],o,c)}},{key:"addResource",value:function(i,s,o,l){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},f=this.options.keySeparator;f===void 0&&(f=".");var h=[i,s];o&&(h=h.concat(f?o.split(f):o)),i.indexOf(".")>-1&&(h=i.split("."),l=s,s=h[1]),this.addNamespaces(s),ob(this.data,h,l),c.silent||this.emit("added",i,s,o,l)}},{key:"addResources",value:function(i,s,o){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var c in o)(typeof o[c]=="string"||Object.prototype.toString.apply(o[c])==="[object Array]")&&this.addResource(i,s,c,o[c],{silent:!0});l.silent||this.emit("added",i,s,o)}},{key:"addResourceBundle",value:function(i,s,o,l,c){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},h=[i,s];i.indexOf(".")>-1&&(h=i.split("."),l=o,o=s,s=h[1]),this.addNamespaces(s);var p=Md(this.data,h)||{};l?jA(p,o,c):p=kf(kf({},p),o),ob(this.data,h,p),f.silent||this.emit("added",i,s,o)}},{key:"removeResourceBundle",value:function(i,s){this.hasResourceBundle(i,s)&&delete this.data[i][s],this.removeNamespaces(s),this.emit("removed",i,s)}},{key:"hasResourceBundle",value:function(i,s){return this.getResource(i,s)!==void 0}},{key:"getResourceBundle",value:function(i,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?kf(kf({},{}),this.getResource(i,s)):this.getResource(i,s)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"hasLanguageSomeTranslations",value:function(i){var s=this.getDataByLanguage(i),o=s&&Object.keys(s)||[];return!!o.find(function(l){return s[l]&&Object.keys(s[l]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),n}(vs),zA={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,n,r,i,s){var o=this;return e.forEach(function(l){o.processors[l]&&(n=o.processors[l].process(n,r,i,s))}),n}};function ub(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ub(Object(n),!0).forEach(function(r){Cs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ub(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function D5(t){var e=L5();return function(){var r=Mr(t),i;if(e){var s=Mr(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ic(this,i)}}function L5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var cb={},fb=function(t){Bh(n,t);var e=D5(n);function n(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ur(this,n),i=e.call(this),jh&&vs.call(as(i)),I5(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r,as(i)),i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=Nr.create("translator"),i}return $r(n,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var o=this.resolve(i,s);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(i,s){var o=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,c=s.ns||this.options.defaultNS||[],f=o&&i.indexOf(o)>-1,h=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!x5(i,o,l);if(f&&!h){var p=i.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:i,namespaces:c};var m=i.split(o);(o!==l||o===l&&this.options.ns.indexOf(m[0])>-1)&&(c=m.shift()),i=m.join(l)}return typeof c=="string"&&(c=[c]),{key:i,namespaces:c}}},{key:"translate",value:function(i,s,o){var l=this;if(os(s)!=="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),s||(s={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,f=this.extractFromKey(i[i.length-1],s),h=f.key,p=f.namespaces,m=p[p.length-1],y=s.lng||this.language,T=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y&&y.toLowerCase()==="cimode"){if(T){var C=s.nsSeparator||this.options.nsSeparator;return m+C+h}return h}var A=this.resolve(i,s),v=A&&A.res,E=A&&A.usedKey||h,I=A&&A.exactUsedKey||h,x=Object.prototype.toString.apply(v),M=["[object Number]","[object Function]","[object RegExp]"],W=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,B=!this.i18nFormat||this.i18nFormat.handleAsObject,Q=typeof v!="string"&&typeof v!="boolean"&&typeof v!="number";if(B&&v&&Q&&M.indexOf(x)<0&&!(typeof W=="string"&&x==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(E,v,Tn(Tn({},s),{},{ns:p})):"key '".concat(h," (").concat(this.language,")' returned an object instead of string.");if(c){var q=x==="[object Array]",H=q?[]:{},pe=q?I:E;for(var Ue in v)if(Object.prototype.hasOwnProperty.call(v,Ue)){var ot="".concat(pe).concat(c).concat(Ue);H[Ue]=this.translate(ot,Tn(Tn({},s),{joinArrays:!1,ns:p})),H[Ue]===ot&&(H[Ue]=v[Ue])}v=H}}else if(B&&typeof W=="string"&&x==="[object Array]")v=v.join(W),v&&(v=this.extendTranslation(v,i,s,o));else{var we=!1,Ce=!1,xt=s.count!==void 0&&typeof s.count!="string",Je=n.hasDefaultValue(s),Y=xt?this.pluralResolver.getSuffix(y,s.count,s):"",ee=s["defaultValue".concat(Y)]||s.defaultValue;!this.isValidLookup(v)&&Je&&(we=!0,v=ee),this.isValidLookup(v)||(Ce=!0,v=h);var re=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,se=re&&Ce?void 0:v,De=Je&&ee!==v&&this.options.updateMissing;if(Ce||we||De){if(this.logger.log(De?"updateKey":"missingKey",y,m,h,De?ee:v),c){var jr=this.resolve(h,Tn(Tn({},s),{},{keySeparator:!1}));jr&&jr.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Ht=[],Kt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Kt&&Kt[0])for(var Mt=0;Mt<Kt.length;Mt++)Ht.push(Kt[Mt]);else this.options.saveMissingTo==="all"?Ht=this.languageUtils.toResolveHierarchy(s.lng||this.language):Ht.push(s.lng||this.language);var Wr=function(Fn,Ja,As){var Rs=Je&&As!==v?As:se;l.options.missingKeyHandler?l.options.missingKeyHandler(Fn,m,Ja,Rs,De,s):l.backendConnector&&l.backendConnector.saveMissing&&l.backendConnector.saveMissing(Fn,m,Ja,Rs,De,s),l.emit("missingKey",Fn,m,Ja,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&xt?Ht.forEach(function(zr){l.pluralResolver.getSuffixes(zr,s).forEach(function(Fn){Wr([zr],h+Fn,s["defaultValue".concat(Fn)]||ee)})}):Wr(Ht,h,ee))}v=this.extendTranslation(v,i,s,A,o),Ce&&v===h&&this.options.appendNamespaceToMissingKey&&(v="".concat(m,":").concat(h)),(Ce||we)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?v=this.options.parseMissingKeyHandler(h,we?v:void 0):v=this.options.parseMissingKeyHandler(v))}return v}},{key:"extendTranslation",value:function(i,s,o,l,c){var f=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,o,l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(Tn(Tn({},o),{interpolation:Tn(Tn({},this.options.interpolation),o.interpolation)}));var h=typeof i=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),p;if(h){var m=i.match(this.interpolator.nestingRegexp);p=m&&m.length}var y=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(y=Tn(Tn({},this.options.interpolation.defaultVariables),y)),i=this.interpolator.interpolate(i,y,o.lng||this.language,o),h){var T=i.match(this.interpolator.nestingRegexp),C=T&&T.length;p<C&&(o.nest=!1)}o.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var E=arguments.length,I=new Array(E),x=0;x<E;x++)I[x]=arguments[x];return c&&c[0]===I[0]&&!o.context?(f.logger.warn("It seems you are nesting recursively key: ".concat(I[0]," in key: ").concat(s[0])),null):f.translate.apply(f,I.concat([s]))},o)),o.interpolation&&this.interpolator.reset()}var A=o.postProcess||this.options.postProcess,v=typeof A=="string"?[A]:A;return i!=null&&v&&v.length&&o.applyPostProcessor!==!1&&(i=zA.handle(v,i,s,this.options&&this.options.postProcessPassResolved?Tn({i18nResolved:l},o):o,this)),i}},{key:"resolve",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l,c,f,h,p;return typeof i=="string"&&(i=[i]),i.forEach(function(m){if(!s.isValidLookup(l)){var y=s.extractFromKey(m,o),T=y.key;c=T;var C=y.namespaces;s.options.fallbackNS&&(C=C.concat(s.options.fallbackNS));var A=o.count!==void 0&&typeof o.count!="string",v=A&&!o.ordinal&&o.count===0&&s.pluralResolver.shouldUseIntlApi(),E=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",I=o.lngs?o.lngs:s.languageUtils.toResolveHierarchy(o.lng||s.language,o.fallbackLng);C.forEach(function(x){s.isValidLookup(l)||(p=x,!cb["".concat(I[0],"-").concat(x)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(p)&&(cb["".concat(I[0],"-").concat(x)]=!0,s.logger.warn('key "'.concat(c,'" for languages "').concat(I.join(", "),`" won't get resolved as namespace "`).concat(p,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),I.forEach(function(M){if(!s.isValidLookup(l)){h=M;var W=[T];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(W,T,M,x,o);else{var B;A&&(B=s.pluralResolver.getSuffix(M,o.count,o));var Q="_zero";if(A&&(W.push(T+B),v&&W.push(T+Q)),E){var q="".concat(T).concat(s.options.contextSeparator).concat(o.context);W.push(q),A&&(W.push(q+B),v&&W.push(q+Q))}}for(var H;H=W.pop();)s.isValidLookup(l)||(f=H,l=s.getResource(M,x,H,o))}}))})}}),{res:l,usedKey:c,exactUsedKey:f,usedLng:h,usedNS:p}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,s,o){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,s,o,l):this.resourceStore.getResource(i,s,o,l)}}],[{key:"hasDefaultValue",value:function(i){var s="defaultValue";for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&s===o.substring(0,s.length)&&i[o]!==void 0)return!0;return!1}}]),n}(vs);function mm(t){return t.charAt(0).toUpperCase()+t.slice(1)}var F5=function(){function t(e){Ur(this,t),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Nr.create("languageUtils")}return $r(t,[{key:"getScriptPartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return null;var r=n.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}},{key:"getLanguagePartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return n;var r=n.split("-");return this.formatLanguageCode(r[0])}},{key:"formatLanguageCode",value:function(n){if(typeof n=="string"&&n.indexOf("-")>-1){var r=["hans","hant","latn","cyrl","cans","mong","arab"],i=n.split("-");return this.options.lowerCaseLng?i=i.map(function(s){return s.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=mm(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=mm(i[1].toLowerCase())),r.indexOf(i[2].toLowerCase())>-1&&(i[2]=mm(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}},{key:"isSupportedCode",value:function(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}},{key:"getBestMatchFromCodes",value:function(n){var r=this;if(!n)return null;var i;return n.forEach(function(s){if(!i){var o=r.formatLanguageCode(s);(!r.options.supportedLngs||r.isSupportedCode(o))&&(i=o)}}),!i&&this.options.supportedLngs&&n.forEach(function(s){if(!i){var o=r.getLanguagePartFromCode(s);if(r.isSupportedCode(o))return i=o;i=r.options.supportedLngs.find(function(l){if(l.indexOf(o)===0)return l})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(n,r){if(!n)return[];if(typeof n=="function"&&(n=n(r)),typeof n=="string"&&(n=[n]),Object.prototype.toString.apply(n)==="[object Array]")return n;if(!r)return n.default||[];var i=n[r];return i||(i=n[this.getScriptPartFromCode(r)]),i||(i=n[this.formatLanguageCode(r)]),i||(i=n[this.getLanguagePartFromCode(r)]),i||(i=n.default),i||[]}},{key:"toResolveHierarchy",value:function(n,r){var i=this,s=this.getFallbackCodes(r||this.options.fallbackLng||[],n),o=[],l=function(f){f&&(i.isSupportedCode(f)?o.push(f):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(f)))};return typeof n=="string"&&n.indexOf("-")>-1?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(n))):typeof n=="string"&&l(this.formatLanguageCode(n)),s.forEach(function(c){o.indexOf(c)<0&&l(i.formatLanguageCode(c))}),o}}]),t}(),M5=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],U5={1:function(e){return Number(e>1)},2:function(e){return Number(e!=1)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(e==1?0:e>=2&&e<=4?1:2)},7:function(e){return Number(e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(e==1?0:e==2?1:e!=8&&e!=11?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(e==1?0:e==2?1:e<7?2:e<11?3:4)},11:function(e){return Number(e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(e!==0)},14:function(e){return Number(e==1?0:e==2?1:e==3?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:e!==0?1:2)},17:function(e){return Number(e==1||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(e==0?0:e==1?1:2)},19:function(e){return Number(e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(e==1?0:e==0||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3)}},$5=["v1","v2","v3"],db={zero:0,one:1,two:2,few:3,many:4,other:5};function B5(){var t={};return M5.forEach(function(e){e.lngs.forEach(function(n){t[n]={numbers:e.nr,plurals:U5[e.fc]}})}),t}var j5=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ur(this,t),this.languageUtils=e,this.options=n,this.logger=Nr.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=B5()}return $r(t,[{key:"addRule",value:function(n,r){this.rules[n]=r}},{key:"getRule",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(n,{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}},{key:"needsPlural",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(n,r);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,i).map(function(s){return"".concat(r).concat(s)})}},{key:"getSuffixes",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(n,i);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort(function(o,l){return db[o]-db[l]}).map(function(o){return"".concat(r.options.prepend).concat(o)}):s.numbers.map(function(o){return r.getSuffix(n,o,i)}):[]}},{key:"getSuffix",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getRule(n,i);return s?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(s.select(r)):this.getSuffixRetroCompatible(s,r):(this.logger.warn("no plural rule found for: ".concat(n)),"")}},{key:"getSuffixRetroCompatible",value:function(n,r){var i=this,s=n.noAbs?n.plurals(r):n.plurals(Math.abs(r)),o=n.numbers[s];this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var l=function(){return i.options.prepend&&o.toString()?i.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):l():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1?l():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}},{key:"shouldUseIntlApi",value:function(){return!$5.includes(this.options.compatibilityJSON)}}]),t}();function hb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ar(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hb(Object(n),!0).forEach(function(r){Cs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var W5=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ur(this,t),this.logger=Nr.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(n){return n},this.init(e)}return $r(t,[{key:"init",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});var r=n.interpolation;this.escape=r.escape!==void 0?r.escape:R5,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?Uo(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?Uo(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?Uo(r.nestingPrefix):r.nestingPrefixEscaped||Uo("$t("),this.nestingSuffix=r.nestingSuffix?Uo(r.nestingSuffix):r.nestingSuffixEscaped||Uo(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var n="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(n,"g");var r="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(r,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(n,r,i,s){var o=this,l,c,f,h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function p(A){return A.replace(/\$/g,"$$$$")}var m=function(v){if(v.indexOf(o.formatSeparator)<0){var E=ab(r,h,v);return o.alwaysFormat?o.format(E,void 0,i,ar(ar(ar({},s),r),{},{interpolationkey:v})):E}var I=v.split(o.formatSeparator),x=I.shift().trim(),M=I.join(o.formatSeparator).trim();return o.format(ab(r,h,x),M,i,ar(ar(ar({},s),r),{},{interpolationkey:x}))};this.resetRegExp();var y=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,T=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,C=[{regex:this.regexpUnescape,safeValue:function(v){return p(v)}},{regex:this.regexp,safeValue:function(v){return o.escapeValue?p(o.escape(v)):p(v)}}];return C.forEach(function(A){for(f=0;l=A.regex.exec(n);){var v=l[1].trim();if(c=m(v),c===void 0)if(typeof y=="function"){var E=y(n,l,s);c=typeof E=="string"?E:""}else if(s&&s.hasOwnProperty(v))c="";else if(T){c=l[0];continue}else o.logger.warn("missed to pass in variable ".concat(v," for interpolating ").concat(n)),c="";else typeof c!="string"&&!o.useRawValueToEscape&&(c=sb(c));var I=A.safeValue(c);if(n=n.replace(l[0],I),T?(A.regex.lastIndex+=I.length,A.regex.lastIndex-=l[0].length):A.regex.lastIndex=0,f++,f>=o.maxReplaces)break}}),n}},{key:"nest",value:function(n,r){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,l,c=ar({},s);c.applyPostProcessor=!1,delete c.defaultValue;function f(y,T){var C=this.nestingOptionsSeparator;if(y.indexOf(C)<0)return y;var A=y.split(new RegExp("".concat(C,"[ ]*{"))),v="{".concat(A[1]);y=A[0],v=this.interpolate(v,c),v=v.replace(/'/g,'"');try{c=JSON.parse(v),T&&(c=ar(ar({},T),c))}catch(E){return this.logger.warn("failed parsing options string in nesting for key ".concat(y),E),"".concat(y).concat(C).concat(v)}return delete c.defaultValue,y}for(;o=this.nestingRegexp.exec(n);){var h=[],p=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var m=o[1].split(this.formatSeparator).map(function(y){return y.trim()});o[1]=m.shift(),h=m,p=!0}if(l=r(f.call(this,o[1].trim(),c),c),l&&o[0]===n&&typeof l!="string")return l;typeof l!="string"&&(l=sb(l)),l||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(n)),l=""),p&&(l=h.reduce(function(y,T){return i.format(y,T,s.lng,ar(ar({},s),{},{interpolationkey:o[1].trim()}))},l.trim())),n=n.replace(o[0],l),this.regexp.lastIndex=0}return n}}]),t}();function pb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pb(Object(n),!0).forEach(function(r){Cs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function z5(t){var e=t.toLowerCase().trim(),n={};if(t.indexOf("(")>-1){var r=t.split("(");e=r[0].toLowerCase().trim();var i=r[1].substring(0,r[1].length-1);if(e==="currency"&&i.indexOf(":")<0)n.currency||(n.currency=i.trim());else if(e==="relativetime"&&i.indexOf(":")<0)n.range||(n.range=i.trim());else{var s=i.split(";");s.forEach(function(o){if(o){var l=o.split(":"),c=S5(l),f=c[0],h=c.slice(1),p=h.join(":");n[f.trim()]||(n[f.trim()]=p.trim()),p.trim()==="false"&&(n[f.trim()]=!1),p.trim()==="true"&&(n[f.trim()]=!0),isNaN(p.trim())||(n[f.trim()]=parseInt(p.trim(),10))}})}}return{formatName:e,formatOptions:n}}var V5=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ur(this,t),this.logger=Nr.create("formatter"),this.options=e,this.formats={number:function(r,i,s){return new Intl.NumberFormat(i,s).format(r)},currency:function(r,i,s){return new Intl.NumberFormat(i,Oi(Oi({},s),{},{style:"currency"})).format(r)},datetime:function(r,i,s){return new Intl.DateTimeFormat(i,Oi({},s)).format(r)},relativetime:function(r,i,s){return new Intl.RelativeTimeFormat(i,Oi({},s)).format(r,s.range||"day")},list:function(r,i,s){return new Intl.ListFormat(i,Oi({},s)).format(r)}},this.init(e)}return $r(t,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},i=r.interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}},{key:"add",value:function(n,r){this.formats[n.toLowerCase().trim()]=r}},{key:"format",value:function(n,r,i,s){var o=this,l=r.split(this.formatSeparator),c=l.reduce(function(f,h){var p=z5(h),m=p.formatName,y=p.formatOptions;if(o.formats[m]){var T=f;try{var C=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},A=C.locale||C.lng||s.locale||s.lng||i;T=o.formats[m](f,A,Oi(Oi(Oi({},y),s),C))}catch(v){o.logger.warn(v)}return T}else o.logger.warn("there was no format function for ".concat(m));return f},n);return c}}]),t}();function gb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gb(Object(n),!0).forEach(function(r){Cs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G5(t){var e=H5();return function(){var r=Mr(t),i;if(e){var s=Mr(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ic(this,i)}}function H5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function K5(t,e){for(var n=t.indexOf(e);n!==-1;)t.splice(n,1),n=t.indexOf(e)}var q5=function(t){Bh(n,t);var e=G5(n);function n(r,i,s){var o,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Ur(this,n),o=e.call(this),jh&&vs.call(as(o)),o.backend=r,o.store=i,o.services=s,o.languageUtils=s.languageUtils,o.options=l,o.logger=Nr.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(s,l.backend,l),o}return $r(n,[{key:"queueLoad",value:function(i,s,o,l){var c=this,f=[],h=[],p=[],m=[];return i.forEach(function(y){var T=!0;s.forEach(function(C){var A="".concat(y,"|").concat(C);!o.reload&&c.store.hasResourceBundle(y,C)?c.state[A]=2:c.state[A]<0||(c.state[A]===1?h.indexOf(A)<0&&h.push(A):(c.state[A]=1,T=!1,h.indexOf(A)<0&&h.push(A),f.indexOf(A)<0&&f.push(A),m.indexOf(C)<0&&m.push(C)))}),T||p.push(y)}),(f.length||h.length)&&this.queue.push({pending:h,loaded:{},errors:[],callback:l}),{toLoad:f,pending:h,toLoadLanguages:p,toLoadNamespaces:m}}},{key:"loaded",value:function(i,s,o){var l=i.split("|"),c=l[0],f=l[1];s&&this.emit("failedLoading",c,f,s),o&&this.store.addResourceBundle(c,f,o),this.state[i]=s?-1:2;var h={};this.queue.forEach(function(p){T5(p.loaded,[c],f),K5(p.pending,i),s&&p.errors.push(s),p.pending.length===0&&!p.done&&(Object.keys(p.loaded).forEach(function(m){h[m]||(h[m]=[]),p.loaded[m].length&&p.loaded[m].forEach(function(y){h[m].indexOf(y)<0&&h[m].push(y)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(function(p){return!p.done})}},{key:"read",value:function(i,s,o){var l=this,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:350,h=arguments.length>5?arguments[5]:void 0;return i.length?this.backend[o](i,s,function(p,m){if(p&&m&&c<5){setTimeout(function(){l.read.call(l,i,s,o,c+1,f*2,h)},f);return}h(p,m)}):h(null,{})}},{key:"prepareLoading",value:function(i,s){var o=this,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),c&&c();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof s=="string"&&(s=[s]);var f=this.queueLoad(i,s,l,c);if(!f.toLoad.length)return f.pending.length||c(),null;f.toLoad.forEach(function(h){o.loadOne(h)})}},{key:"load",value:function(i,s,o){this.prepareLoading(i,s,{},o)}},{key:"reload",value:function(i,s,o){this.prepareLoading(i,s,{reload:!0},o)}},{key:"loadOne",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=i.split("|"),c=l[0],f=l[1];this.read(c,f,"read",void 0,void 0,function(h,p){h&&s.logger.warn("".concat(o,"loading namespace ").concat(f," for language ").concat(c," failed"),h),!h&&p&&s.logger.log("".concat(o,"loaded namespace ").concat(f," for language ").concat(c),p),s.loaded(i,h,p)})}},{key:"saveMissing",value:function(i,s,o,l,c){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}o==null||o===""||(this.backend&&this.backend.create&&this.backend.create(i,s,o,l,null,mb(mb({},f),{},{isUpdate:c})),!(!i||!i[0])&&this.store.addResource(i[0],s,o,l))}}]),n}(vs);function Y5(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var n={};if(os(e[1])==="object"&&(n=e[1]),typeof e[1]=="string"&&(n.defaultValue=e[1]),typeof e[2]=="string"&&(n.tDescription=e[2]),os(e[2])==="object"||os(e[3])==="object"){var r=e[3]||e[2];Object.keys(r).forEach(function(i){n[i]=r[i]})}return n},interpolation:{escapeValue:!0,format:function(e,n,r,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function vb(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function _b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_b(Object(n),!0).forEach(function(r){Cs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_b(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q5(t){var e=J5();return function(){var r=Mr(t),i;if(e){var s=Mr(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ic(this,i)}}function J5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xf(){}function X5(t){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(t));e.forEach(function(n){typeof t[n]=="function"&&(t[n]=t[n].bind(t))})}var Ud=function(t){Bh(n,t);var e=Q5(n);function n(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(Ur(this,n),r=e.call(this),jh&&vs.call(as(r)),r.options=vb(i),r.services={},r.logger=Nr,r.modules={external:[]},X5(as(r)),s&&!r.isInitialized&&!i.isClone){if(!r.options.initImmediate)return r.init(i,s),ic(r,as(r));setTimeout(function(){r.init(i,s)},0)}return r}return $r(n,[{key:"init",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(o=s,s={}),!s.defaultNS&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));var l=Y5();this.options=Tr(Tr(Tr({},l),this.options),vb(s)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Tr(Tr({},l.interpolation),this.options.interpolation)),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function c(v){return v?typeof v=="function"?new v:v:null}if(!this.options.isClone){this.modules.logger?Nr.init(c(this.modules.logger),this.options):Nr.init(null,this.options);var f;this.modules.formatter?f=this.modules.formatter:typeof Intl<"u"&&(f=V5);var h=new F5(this.options);this.store=new P5(this.options.resources,this.options);var p=this.services;p.logger=Nr,p.resourceStore=this.store,p.languageUtils=h,p.pluralResolver=new j5(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),f&&(!this.options.interpolation.format||this.options.interpolation.format===l.interpolation.format)&&(p.formatter=c(f),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new W5(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new q5(c(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(v){for(var E=arguments.length,I=new Array(E>1?E-1:0),x=1;x<E;x++)I[x-1]=arguments[x];i.emit.apply(i,[v].concat(I))}),this.modules.languageDetector&&(p.languageDetector=c(this.modules.languageDetector),p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=c(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new fb(this.services,this.options),this.translator.on("*",function(v){for(var E=arguments.length,I=new Array(E>1?E-1:0),x=1;x<E;x++)I[x-1]=arguments[x];i.emit.apply(i,[v].concat(I))}),this.modules.external.forEach(function(v){v.init&&v.init(i)})}if(this.format=this.options.interpolation.format,o||(o=xf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var m=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);m.length>0&&m[0]!=="dev"&&(this.options.lng=m[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var y=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];y.forEach(function(v){i[v]=function(){var E;return(E=i.store)[v].apply(E,arguments)}});var T=["addResource","addResources","addResourceBundle","removeResourceBundle"];T.forEach(function(v){i[v]=function(){var E;return(E=i.store)[v].apply(E,arguments),i}});var C=xl(),A=function(){var E=function(x,M){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),C.resolve(M),o(x,M)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return E(null,i.t.bind(i));i.changeLanguage(i.options.lng,E)};return this.options.resources||!this.options.initImmediate?A():setTimeout(A,0),C}},{key:"loadResources",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xf,l=o,c=typeof i=="string"?i:this.language;if(typeof i=="function"&&(l=i),!this.options.resources||this.options.partialBundledLanguages){if(c&&c.toLowerCase()==="cimode")return l();var f=[],h=function(y){if(y){var T=s.services.languageUtils.toResolveHierarchy(y);T.forEach(function(C){f.indexOf(C)<0&&f.push(C)})}};if(c)h(c);else{var p=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);p.forEach(function(m){return h(m)})}this.options.preload&&this.options.preload.forEach(function(m){return h(m)}),this.services.backendConnector.load(f,this.options.ns,function(m){!m&&!s.resolvedLanguage&&s.language&&s.setResolvedLanguage(s.language),l(m)})}else l(null)}},{key:"reloadResources",value:function(i,s,o){var l=xl();return i||(i=this.languages),s||(s=this.options.ns),o||(o=xf),this.services.backendConnector.reload(i,s,function(c){l.resolve(),o(c)}),l}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&zA.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"setResolvedLanguage",value:function(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(var s=0;s<this.languages.length;s++){var o=this.languages[s];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(i,s){var o=this;this.isLanguageChangingTo=i;var l=xl();this.emit("languageChanging",i);var c=function(m){o.language=m,o.languages=o.services.languageUtils.toResolveHierarchy(m),o.resolvedLanguage=void 0,o.setResolvedLanguage(m)},f=function(m,y){y?(c(y),o.translator.changeLanguage(y),o.isLanguageChangingTo=void 0,o.emit("languageChanged",y),o.logger.log("languageChanged",y)):o.isLanguageChangingTo=void 0,l.resolve(function(){return o.t.apply(o,arguments)}),s&&s(m,function(){return o.t.apply(o,arguments)})},h=function(m){!i&&!m&&o.services.languageDetector&&(m=[]);var y=typeof m=="string"?m:o.services.languageUtils.getBestMatchFromCodes(m);y&&(o.language||c(y),o.translator.language||o.translator.changeLanguage(y),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage(y)),o.loadResources(y,function(T){f(T,y)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?h(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(h):h(i),l}},{key:"getFixedT",value:function(i,s,o){var l=this,c=function f(h,p){var m;if(os(p)!=="object"){for(var y=arguments.length,T=new Array(y>2?y-2:0),C=2;C<y;C++)T[C-2]=arguments[C];m=l.options.overloadTranslationOptionHandler([h,p].concat(T))}else m=Tr({},p);m.lng=m.lng||f.lng,m.lngs=m.lngs||f.lngs,m.ns=m.ns||f.ns;var A=l.options.keySeparator||".",v=o?"".concat(o).concat(A).concat(h):h;return l.t(v,m)};return typeof i=="string"?c.lng=i:c.lngs=i,c.ns=s,c.keyPrefix=o,c}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var l=this.resolvedLanguage||this.languages[0],c=this.options?this.options.fallbackLng:!1,f=this.languages[this.languages.length-1];if(l.toLowerCase()==="cimode")return!0;var h=function(y,T){var C=s.services.backendConnector.state["".concat(y,"|").concat(T)];return C===-1||C===2};if(o.precheck){var p=o.precheck(this,h);if(p!==void 0)return p}return!!(this.hasResourceBundle(l,i)||!this.services.backendConnector.backend||h(l,i)&&(!c||h(f,i)))}},{key:"loadNamespaces",value:function(i,s){var o=this,l=xl();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(c){o.options.ns.indexOf(c)<0&&o.options.ns.push(c)}),this.loadResources(function(c){l.resolve(),s&&s(c)}),l):(s&&s(),Promise.resolve())}},{key:"loadLanguages",value:function(i,s){var o=xl();typeof i=="string"&&(i=[i]);var l=this.options.preload||[],c=i.filter(function(f){return l.indexOf(f)<0});return c.length?(this.options.preload=l.concat(c),this.loadResources(function(f){o.resolve(),s&&s(f)}),o):(s&&s(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";var s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"];return s.indexOf(this.services.languageUtils.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xf,l=Tr(Tr(Tr({},this.options),s),{isClone:!0}),c=new n(l),f=["store","services","language"];return f.forEach(function(h){c[h]=i[h]}),c.services=Tr({},this.services),c.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},c.translator=new fb(c.services,c.options),c.translator.on("*",function(h){for(var p=arguments.length,m=new Array(p>1?p-1:0),y=1;y<p;y++)m[y-1]=arguments[y];c.emit.apply(c,[h].concat(m))}),c.init(l,o),c.translator.options=c.options,c.translator.backendConnector.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},c}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}(vs);Cs(Ud,"createInstance",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Ud(t,e)});var sn=Ud.createInstance();sn.createInstance=Ud.createInstance;sn.createInstance;sn.init;sn.loadResources;sn.reloadResources;sn.use;sn.changeLanguage;sn.getFixedT;sn.t;sn.exists;sn.setDefaultNamespace;sn.hasLoadedNamespace;sn.loadNamespaces;sn.loadLanguages;const yb={'Aktivujte prosím Bluetooth a vyberte svou lampu ze seznamu Pro spárování nové lampy prosím stiskněte tlačítko "Přidat zařízení".':'Aktivujte prosím Bluetooth a vyberte svou lampu ze seznamu. Pro spárování nové lampy prosím stiskněte tlačítko "Přidat zařízení".',"Chyba: ":"Chyba: ","Connected to remote control":"Připojeno k websocketům","Disconnected from remote control":"Odpojeno od websoket","Jsou zařízení blízko sebe?":"Jsou zařízení blízko sebe?","Nastavení rychlejšího přenosu dat se nezdařilo.":"Nastavení rychlejšího přenosu dat se nezdařilo.","Nastaví rychlejší přenos dat, který ale nemá takový dosah.":"Nastaví rychlejší přenos dat, který ale nemá takový dosah.","Název obsahuje nepovolené znaky":"Název obsahuje nepovolené znaky","Pojmenujte svoji lampu":"Pojmenujte svoji lampu","Zkontrolujte, prosím, že máte aktivní Bluetooth v telefonu a lampa je zapojená v zásuvce.":"Zkontrolujte, prosím, že máte aktivní Bluetooth v telefonu a lampa je zapojená v zásuvce.","Přidání se nezdařilo":"Přidání se nezdařilo","Přidělte ID svému zařízení":"Přidělte ID svému zařízení","Připojení selhalo":"Připojení selhalo","Pro připojení již spárované lampy prosím stiskněte jakýkoli symbol":"Pro připojení již spárované lampy prosím stiskněte jakýkoli symbol","Prosím, zadejte ID zařízení v rozmezí 0-255.":"Prosím, zadejte ID zařízení v rozmezí 0-255.","Spárování nové lampy se nezdařilo":"Spárování nové lampy se nezdařilo","Unikátní jméno pro vaši lampu vám ji pomůže odlišit od ostatních.":"Unikátní jméno pro vaši lampu vám ji pomůže odlišit od ostatních.","Zkusit znovu":"Zkusit znovu","Zkuste to, prosím, později.":"Zkuste to, prosím, později.",Zpět:"Zpět","Prohlížeč není podporován":"Prohlížeč není podporován","Z tohoto webového prohlížeče bohužel není možné NARU ovládat. Prosím, otevřete aplikace v prohlížeči Google Chrome.":"Z tohoto webového prohlížeče bohužel není možné NARU ovládat. Prosím, otevřete aplikace v prohlížeči Google Chrome.","Z tohoto webového prohlížeče bohužel není možné NARU ovládat. Prosím, otevřete aplikace v prohlížeči Bluefy.":"Z tohoto webového prohlížeče bohužel není možné NARU ovládat. Prosím, otevřete aplikace v prohlížeči Bluefy.","Z tohoto webového prohlížeče bohužel není možné NARU ovládat. Prosím, stáhněte si aplikaci Spectoda Connect.":"Z tohoto webového prohlížeče bohužel není možné NARU ovládat. Prosím, stáhněte si aplikaci Spectoda Connect.","Z tohoto webového prohlížeče bohužel nejspíš není možné NARU ovládat.":"Z tohoto webového prohlížeče bohužel nejspíš není možné NARU ovládat.","Zkontrolujte, zda jste v Nastavení povolili aplikaci přístup k mikrofonu.":"Zkontrolujte, zda jste v Nastavení povolili aplikaci přístup k mikrofonu."},wb={'Aktivujte prosím Bluetooth a vyberte svou lampu ze seznamu Pro spárování nové lampy prosím stiskněte tlačítko "Přidat zařízení".':'Please activate Bluetooth and select your lamp from the list. To pair a new lamp, please press the " Add device " button.',"Chyba: ":"Error: ","Connected to remote control":"Connected to remote control","Disconnected from remote control":"Disconnected from remote control","Jsou zařízení blízko sebe?":"Are the devices close to each other?","Nastavení rychlejšího přenosu dat se nezdařilo.":"Failed to set up faster data transfer.","Nastaví rychlejší přenos dat, který ale nemá takový dosah.":"Sets up faster data transfer, but it doesn't have that range.","Název obsahuje nepovolené znaky":"The name contains illegal characters","Pojmenujte svoji lampu":"Give name to your lamp","Zkontrolujte, prosím, že máte aktivní Bluetooth v telefonu a lampa je zapojená v zásuvce.":"Please make sure you have Bluetooth active and the lamp is plugged in.","Přidání se nezdařilo":"Add failed","Přidělte ID svému zařízení":"Assign an ID to your device","Připojení selhalo":"Connection failed.","Pro připojení již spárované lampy prosím stiskněte jakýkoli symbol":"To connect an already paired lamp, please press any symbol","Prosím, zadejte ID zařízení v rozmezí 0-255.":"Please enter a device ID in the range 0-255","Spárování nové lampy se nezdařilo":"New lamp pairing failed","Unikátní jméno pro vaši lampu vám ji pomůže odlišit od ostatních.":"A unique name for your lamp will help you distinguish it from others.","Zkusit znovu":"Try again","Zkuste to, prosím, později.":"Try again later please",Zpět:"Back","Prohlížeč není podporován":"This browser is not supported","Z tohoto webového prohlížeče bohužel není možné NARU ovládat. Prosím, otevřete aplikace v prohlížeči Google Chrome.":"Unfortunately, it is not possible to control NARA from this web browser. Please open app in Google Chrome.","Z tohoto webového prohlížeče bohužel není možné NARU ovládat. Prosím, otevřete aplikace v prohlížeči Bluefy.":"Unfortunately, it is not possible to control NARA from this web browser. Please open the app in the Bluefy browser.","Z tohoto webového prohlížeče bohužel není možné NARU ovládat. Prosím, stáhněte si aplikaci Spectoda Connect.":"Unfortunately, it is not possible to control NARA from this web browser. Please download the Spectoda Connect app.","Z tohoto webového prohlížeče bohužel nejspíš není možné NARU ovládat.":"Unfortunately, it is probably not possible to control NARA from this web browser.","Zkontrolujte, zda jste v Nastavení povolili aplikaci přístup k mikrofonu.":"Make sure you've enabled Bluefy's microphone access in Settings. If so, refresh the current page, delete cookies and try again."},Wh=sn.createInstance();Wh.init({lng:"en",debug:!1,resources:{cs:{translation:yb},"cs-CZ":{translation:yb},en:{translation:wb},"en-US":{translation:wb}},keySeparator:"__",contextSeparator:"__"},(t,e)=>{});const Z5=Wh.changeLanguage,vt=Wh.t;typeof window<"u"&&(window.i18js=Wh);const G=Object.freeze({FLAG_UNSUPPORTED_COMMND_RESPONSE:255,FLAG_OTA_BEGIN:255,FLAG_OTA_WRITE:0,FLAG_OTA_END:254,FLAG_OTA_RESET:253,FLAG_DEVICE_REBOOT_REQUEST:5,FLAG_DEVICE_DISCONNECT_REQUEST:6,FLAG_CONFIG_UPDATE_REQUEST:10,FLAG_CONFIG_UPDATE_RESPONSE:11,FLAG_PEER_CONNECTED:101,FLAG_PEER_DISCONNECTED:102,FLAG_REINTERPRET_TNGL:104,FLAG_SET_TIMELINE:105,FLAG_EMIT_EVENT:111,FLAG_EMIT_TIMESTAMP_EVENT:112,FLAG_EMIT_COLOR_EVENT:113,FLAG_EMIT_PERCENTAGE_EVENT:114,FLAG_EMIT_LABEL_EVENT:115,FLAG_EVENT_HISTORY_BC_REQUEST:212,FLAG_EVENT_HISTORY_BC_RESPONSE:213,FLAG_VISIBLE_PEERS_REQUEST:214,FLAG_VISIBLE_PEERS_RESPONSE:215,FLAG_FW_UPDATE_PEER_REQUEST:216,FLAG_FW_UPDATE_PEER_RESPONSE:217,FLAG_SYNC_STATE_REQUEST:218,FLAG_SYNC_STATE_RESPONSE:219,FLAG_SAVE_STATE_REQUEST:220,FLAG_SAVE_STATE_RESPONSE:221,FLAG_SLEEP_REQUEST:222,FLAG_SLEEP_RESPONSE:223,FLAG_CONNECTED_PEERS_INFO_REQUEST:224,FLAG_CONNECTED_PEERS_INFO_RESPONSE:225,FLAG_DEVICE_CONFIG_REQUEST:226,FLAG_DEVICE_CONFIG_RESPONSE:227,FLAG_ROM_PHY_VDD33_REQUEST:228,FLAG_ROM_PHY_VDD33_RESPONSE:229,FLAG_VOLTAGE_ON_PIN_REQUEST:230,FLAG_VOLTAGE_ON_PIN_RESPONSE:231,FLAG_CHANGE_DATARATE_REQUEST:232,FLAG_CHANGE_DATARATE_RESPONSE:233,FLAG_FW_VERSION_REQUEST:234,FLAG_FW_VERSION_RESPONSE:235,FLAG_ERASE_OWNER_REQUEST:236,FLAG_ERASE_OWNER_RESPONSE:237,FLAG_TNGL_FINGERPRINT_REQUEST:242,FLAG_TNGL_FINGERPRINT_RESPONSE:243,FLAG_TIMELINE_REQUEST:244,FLAG_TIMELINE_RESPONSE:245,FLAG_CONNECT_REQUEST:238,FLAG_CONNECT_RESPONSE:239,FLAG_ADOPT_REQUEST:240,FLAG_ADOPT_RESPONSE:241});class fe{static TYPE_EXECUTE=1;static TYPE_DELIVER=2;static TYPE_TRANSMIT=3;static TYPE_USERSELECT=4;static TYPE_AUTOSELECT=5;static TYPE_SELECTED=6;static TYPE_UNSELECT=7;static TYPE_SCAN=16;static TYPE_CONNECT=8;static TYPE_CONNECTED=9;static TYPE_DISCONNECT=10;static TYPE_REQUEST=11;static TYPE_SET_CLOCK=12;static TYPE_GET_CLOCK=13;static TYPE_FIRMWARE_UPDATE=14;static TYPE_DESTROY=15;constructor(e,n=null,r=null,i=null,s=null){this.type=e,this.a=n,this.b=r,this.c=i,this.d=s,this.promise=new Promise((o,l)=>{this.reject=l,this.resolve=o})}}class e${#e;#t;#n;#r;#a;#i;#s;#o;#u;#c;#l;#p;#h;constructor(e,n=1e3){this.#e=e,this.clock=new _o(0),this.connector=null,this.#t=L0(),this.#n=null,this.#r=[],this.#a=!1,this.#i=208,this.#s=!1,this.#o=!1,this.#u=null,this.#c=n,this.#l=!1,this.#p=new Date().getTime(),this.#h=0,this.onConnected=r=>{},this.onDisconnected=r=>{},this.#t.on("ota_progress",r=>{const i=new Date().getTime(),s=i-this.lastUpdateTime;w.verbose("time_delta:",s),this.lastUpdateTime=i;const o=r-this.lastUpdatePercentage;w.verbose("percentage_delta:",o),this.lastUpdatePercentage=r;const l=100-r;w.verbose("percentage_left:",l);const c=l/o*s;w.verbose("time_left:",c),this.emit("ota_timeleft",c)}),this.#t.on("#connected",r=>{this.#d(r)}),this.#t.on("#disconnected",r=>{this.#m(r)}),jo()&&document.querySelector("body").addEventListener("click",function(r){r.preventDefault(),function(s,o,l){s.composedPath||(s.composedPath=function(){if(this.path)return this.path;var c=this.target;for(this.path=[];c.parentNode!==null;)this.path.push(c),c=c.parentNode;return this.path.push(o,l),this.path})}(Event.prototype,document,window);const i=r.path||r.composedPath&&r.composedPath();for(let s of i)if(s.tagName==="A"&&s.getAttribute("target")==="_blank"){r.preventDefault();const o=s.getAttribute("href");w.verbose(o),w.debug("Openning external url",o),window.flutter_inappwebview.callHandler("openExternalUrl",o);break}}),window.addEventListener("beforeunload",r=>{this.destroyConnector()})}addEventListener(e,n){return this.#t.on(e,n)}on(e,n){return this.#t.on(e,n)}emit(e,...n){this.#t.emit(e,...n)}requestWakeLock(){return w.debug("> Activating wakeLock..."),jo()?window.flutter_inappwebview.callHandler("setWakeLock",!0):zv.enable()}releaseWakeLock(){return w.debug("> Deactivating wakeLock..."),jo()?window.flutter_inappwebview.callHandler("setWakeLock",!1):(zv.disable(),Promise.resolve())}assignConnector(e="default"){return e===null&&(e="none"),e==""&&(e="default"),w.info(`> Assigning ${e} connector...`),!this.connector&&e==="none"||this.connector&&this.connector.type===e?(w.warn("Trying to reassign current connector."),Promise.resolve()):((e=="default"||e=="automatic")&&(jo()?e="flutter":navigator.bluetooth?e="webbluetooth":e="none"),(this.connector?this.destroyConnector():Promise.resolve()).catch(()=>{}).then(()=>{switch(e){case"none":this.connector=null;break;case"dummy":this.connector=new pm(this,!1);break;case"vdummy":return window.prompt("Simulace FW verze dummy connecoru","VDUMMY_0.8.1_20220301","Zvolte FW verzi dummy connecoru","text",{placeholder:"DUMMY_0.0.0_00000000",regex:/^[\w\d]+_\d.\d.\d_[\d]{8}/,invalidText:"FW verze není správná",maxlength:32}).then(n=>{this.connector=new pm(this,!1,n)});case"edummy":this.connector=new pm(this,!0);break;case"webbluetooth":Ou()&&Al()||lm()&&Al()||um()&&Al()||NU()&&Al()?this.connector=new WU(this):(AU()?window.confirm(vt("Z tohoto webového prohlížeče bohužel není možné NARU ovládat. Prosím, stáhněte si aplikaci Spectoda Connect."),vt("Prohlížeč není podporován")).then(n=>{n&&window.location.replace("https://apps.apple.com/us/app/id1635118423")}):lm()?window.confirm(vt("Z tohoto webového prohlížeče bohužel není možné NARU ovládat. Prosím, otevřete aplikace v prohlížeči Google Chrome."),vt("Prohlížeč není podporován")).then(n=>{n&&window.location.replace("https://www.google.com/intl/cs_CZ/chrome/")}):Ou()?window.confirm(vt("Z tohoto webového prohlížeče bohužel není možné NARU ovládat. Prosím, stáhněte si aplikaci Spectoda Connect."),vt("Prohlížeč není podporován")).then(n=>{n&&window.location.replace("https://play.google.com/store/apps/details?id=com.spectoda.spectodaconnect")}):um()?window.confirm(vt("Z tohoto webového prohlížeče bohužel není možné NARU ovládat. Prosím, otevřete aplikace v prohlížeči Google Chrome."),vt("Prohlížeč není podporován")).then(n=>{n&&window.location.replace("https://www.google.com/intl/cs_CZ/chrome/")}):window.confirm(vt("Z tohoto webového prohlížeče bohužel nejspíš není možné NARU ovládat.")),w.error("Error: Assigning unsupported connector"),this.connector=null);break;case"webserial":Al()?this.connector=new VU(this):(w.error("Error: Assigning unsupported connector"),this.connector=null);break;case"flutter":jo()||um()||lm()?this.connector=new v5(this):(w.error("Error: Assigning unsupported connector"),this.connector=null);break;case"websockets":this.connector=new g5(this);break;default:throw w.warn("Selected unknown connector"),"UnknownConnector"}}))}reconnection(e){this.#s=e}userSelect(e,n=6e5){if(n<1e3)return w.error("Timeout is too short."),Promise.reject("InvalidTimeout");if(this.#o)return Promise.reject("SelectingInProgress");this.#o=!0,e===null?e=[]:Array.isArray(e)||(e=[e]),w.debug(`userSelect(criteria=${JSON.stringify(e)}, timeout=${n}`);const r=new fe(fe.TYPE_USERSELECT,e,n);return this.#f(r),r.promise.finally(()=>{this.#o=!1})}autoSelect(e,n=4e3,r=1e4){if(r<1e3)return w.error("Timeout is too short."),Promise.reject("InvalidTimeout");if(this.#o)return Promise.reject("SelectingInProgress");this.#o=!0,e===null?e=[]:Array.isArray(e)||(e=[e]),w.debug(`autoSelect(criteria=${JSON.stringify(e)}, scan_period=${n}, timeout=${r}`);const i=new fe(fe.TYPE_AUTOSELECT,e,n,r);return this.#f(i),i.promise.finally(()=>{this.#o=!1})}unselect(){const e=new fe(fe.TYPE_UNSELECT);return this.#f(e),e.promise}selected(){const e=new fe(fe.TYPE_SELECTED);return this.#f(e),e.promise}scan(e,n=5e3){if(n<1e3)return w.error("Scan period is too short."),Promise.reject("InvalidScanPeriod");if(this.#o)return Promise.reject("SelectingInProgress");this.#o=!0,e===null?e=[]:Array.isArray(e)||(e=[e]);const r=new fe(fe.TYPE_SCAN,e,n);return this.#f(r),r.promise.finally(()=>{this.#o=!1})}connect(e=1e4,n=!1){if(e<1e3)return w.error("Timeout is too short."),Promise.reject("InvalidTimeout");const r=new fe(fe.TYPE_CONNECT,e,n);return this.#f(r),r.promise}#d=e=>{if(this.#l){w.error("Connecting logic error. #connected called when already connected?"),w.warn("Ignoring the #connected event");return}this.#l=!0,this.onConnected(e)};disconnect(){this.#s=!1;const e=new fe(fe.TYPE_DISCONNECT);return this.#f(e),e.promise}#m=e=>{if(!this.#l){w.error("Connecting logic error. #disconnected called when already disconnected?"),w.warn("Ignoring the #disconnected event");return}this.#l=!1,this.onDisconnected(e),this.#s&&this.#c&&(w.info("Reconnecting..."),setTimeout(()=>(w.debug("Reconnecting device"),this.connect(this.#c).catch(()=>{w.warn("Reconnection failed.")})),2e3)),this.#u&&this.#u.resolve()};connected(){const e=new fe(fe.TYPE_CONNECTED);return this.#f(e),e.promise}execute(e,n,r=5e3){if(r<100)return w.error("Timeout is too short."),Promise.reject("InvalidTimeout");w.verbose("execute",{bytes:e,bytes_label:n,timeout:r});const i=new fe(fe.TYPE_EXECUTE,e,n,r);if(i.b){for(let s=0;s<this.#r.length;s++)if(this.#r[s].type===fe.TYPE_EXECUTE&&this.#r[s].b===i.b){this.#r[s].resolve(),this.#r.splice(s,1);break}}return this.#f(i),i.promise}request(e,n=!0,r=5e3){if(r<100)return w.error("Timeout is too short."),Promise.reject("InvalidTimeout");w.verbose("request",{bytes:e,read_response:n,timeout:r});const i=new fe(fe.TYPE_REQUEST,e,n,r);return this.#f(i),i.promise}syncClock(){const e=new fe(fe.TYPE_GET_CLOCK,this.clock);for(let n=0;n<this.#r.length;n++)if(this.#r[n].type===fe.TYPE_GET_CLOCK){this.#r[n].reject("MultipleClockReads"),this.#r.splice(n,1);break}return this.#f(e),e.promise.then(n=>{w.debug(`Clock synchronized at time=${n.millis()}ms`),this.clock=n})}updateFW(e){const n=new fe(fe.TYPE_FIRMWARE_UPDATE,e);for(let r=0;r<this.#r.length;r++)if(this.#r[r].type===fe.TYPE_FIRMWARE_UPDATE){this.#r[r].reject("Multiple FW Updates"),this.#r.splice(r,1);break}return this.#f(n),n.promise}destroyConnector(){const e=new fe(fe.TYPE_DESTROY);for(let n=0;n<this.#r.length;n++)if(this.#r[n].type===fe.TYPE_DESTROY){this.#r[n].reject("Multiple Connector destroy()"),this.#r.splice(n,1);break}return this.#f(e),e.promise}#f(e){e&&this.#r.push(e),this.#a||(this.#a=!0,(async()=>{await ie(.001);try{for(;this.#r.length>0;){const n=this.#r.shift();if(this.connector===null||this.connector===void 0){w.warn("Trying to do something while connector is not assigned"),n.reject("ConnectorNotAssigned");continue}switch(n.type){case fe.TYPE_USERSELECT:this.#s=!1,await this.connector.userSelect(n.a,n.b).then(c=>{n.resolve(c)}).catch(c=>{n.reject(c)});break;case fe.TYPE_AUTOSELECT:this.#s=!1,await this.connector.autoSelect(n.a,n.b,n.c).then(c=>{n.resolve(c)}).catch(c=>{n.reject(c)});break;case fe.TYPE_SELECTED:await this.connector.selected().then(c=>{n.resolve(c)}).catch(c=>{n.reject(c)});break;case fe.TYPE_UNSELECT:this.#s=!1,await this.connector.unselect().then(()=>{n.resolve()}).catch(c=>{n.reject(c)});break;case fe.TYPE_SCAN:await this.connector.scan(n.a,n.b).then(c=>{n.resolve(c)}).catch(c=>{n.reject(c)});break;case fe.TYPE_CONNECT:this.#s=!0,w.verbose("TYPE_CONNECT begin"),await this.connector.connect(n.a,n.b).then(c=>(this.#l||(w.error("Connection logic error. #connected not called during successful connect()?"),w.warn("Emitting #connected"),this.#t.emit("#connected")),this.connector.getClock().then(f=>{this.clock=f,n.resolve(c)}).catch(f=>{w.error(f),this.clock=null,n.resolve(c)}))).catch(c=>{this.disconnect(),n.reject(c)});break;case fe.TYPE_CONNECTED:await this.connector.connected().then(c=>{n.resolve(c)}).catch(c=>{n.reject(c)});break;case fe.TYPE_DISCONNECT:this.#s=!1,this.#u=new fe,await this.connector.request([G.FLAG_DEVICE_DISCONNECT_REQUEST],!1).catch(()=>{}).then(()=>this.connector.disconnect()).then(this.#u.promise).then(()=>{this.#u=null,n.resolve()}).catch(c=>{n.reject(c)});break;case fe.TYPE_EXECUTE:let r=new Uint8Array(65535),i=0;const s=n.c;r.set(n.a,i),i+=n.a.length;let o=[n];for(;this.#r.length&&this.#r[0].type==fe.TYPE_EXECUTE;){const c=this.#r.shift();if(i+c.a.length<=this.#i)r.set(c.a,i),i+=c.a.length,o.push(c);else{this.#r.unshift(c);break}}const l=r.slice(0,i);w.debug("EXECUTE",HS(l)),await this.connector.deliver(l,s).then(()=>{try{this.process(new DataView(l.buffer))}catch(c){w.error(c)}o.forEach(c=>c.resolve())}).catch(c=>{o.forEach(f=>f.reject(c))});break;case fe.TYPE_REQUEST:w.debug("REQUEST",HS(n.a)),await this.connector.request(n.a,n.b,n.c).then(c=>{n.resolve(c)}).catch(c=>{n.reject(c)});break;case fe.TYPE_SET_CLOCK:await this.connector.setClock(n.a).then(c=>{n.resolve(c)}).catch(c=>{n.reject(c)});break;case fe.TYPE_GET_CLOCK:await this.connector.getClock().then(c=>{n.resolve(c)}).catch(c=>{n.reject(c)});break;case fe.TYPE_FIRMWARE_UPDATE:try{await this.requestWakeLock()}catch{}await this.connector.updateFW(n.a).then(c=>{n.resolve(c)}).catch(c=>{n.reject(c)}).finally(()=>{this.releaseWakeLock()});break;case fe.TYPE_DESTROY:this.#s=!1,await this.connector.request([G.FLAG_DEVICE_DISCONNECT_REQUEST],!1).catch(()=>{}).then(()=>this.connector.disconnect()).then(()=>this.connector.destroy()).then(()=>{this.connector=null,n.resolve()}).catch(c=>{this.connector=null,n.reject(c)});break;default:break}}}catch(n){w.error(n)}finally{this.#a=!1}})())}process(e){let n=new Ct(e);const r=new Date().getTime();w.verbose(n);let i=[];for(;n.available>0;)switch(n.peekFlag()){case G.FLAG_REINTERPRET_TNGL:{w.verbose("FLAG_REINTERPRET_TNGL"),n.readFlag(),n.readUint48(),n.readUint8();const s=n.readUint32();n.forward(s),w.verbose(`tngl_size=${s}`)}break;case G.FLAG_EMIT_EVENT:case G.FLAG_EMIT_TIMESTAMP_EVENT:case G.FLAG_EMIT_COLOR_EVENT:case G.FLAG_EMIT_PERCENTAGE_EVENT:case G.FLAG_EMIT_LABEL_EVENT:{let s=null,o="unknown",l="",c="";switch(n.readFlag()){case G.FLAG_EMIT_EVENT:w.verbose("FLAG_EVENT"),s=null,o="none";break;case G.FLAG_EMIT_TIMESTAMP_EVENT:w.verbose("FLAG_TIMESTAMP_EVENT"),s=n.readInt32(),o="timestamp",c="ms";break;case G.FLAG_EMIT_COLOR_EVENT:w.verbose("FLAG_COLOR_EVENT");const m=n.readBytes(3);s=$U(m[0],m[1],m[2]),o="color";break;case G.FLAG_EMIT_PERCENTAGE_EVENT:w.verbose("FLAG_PERCENTAGE_EVENT"),s=Math.round(Nu(n.readInt32(),-2147483647,2147483647,-100,100)*1e6)/1e6,o="percentage",c="%";break;case G.FLAG_EMIT_LABEL_EVENT:w.verbose("FLAG_LABEL_EVENT"),s=String.fromCharCode(...n.readBytes(5)).match(/[\w\d_]*/g)[0],o="label",l="$";break}w.verbose(`event_value = ${s}`);const f=String.fromCharCode(...n.readBytes(5)).match(/[\w\d_]*/g)[0];w.verbose(`event_label = ${f}`);const h=n.readUint48();w.verbose(`event_timestamp = ${h} ms`);const p=n.readUint8();w.verbose(`event_device_id = ${p}`),i.push({type:o,value:s,label:f,timestamp:h,id:p,timestamp_utc:r,info:`${p.toString().padStart(3)} -> $${f}: ${l+s+c} [${h}ms]`})}break;case G.FLAG_SET_TIMELINE:{w.verbose("FLAG_SET_TIMELINE"),n.readFlag();const s=1<<4,o=n.readUint48(),l=n.readInt32(),c=n.readUint8();w.verbose(`clock_timestamp = ${o} ms`),w.verbose(`timeline_timestamp = ${l} ms`),w.verbose(`timeline_flags = ${c}`);const f=!!(c&s);if(w.verbose(`timeline_paused = ${f?"true":"false"}`),f)this.#e.timeline.pause(),this.#e.timeline.setMillis(l);else{const h=this.clock.millis()-o,p=l+h;this.#e.timeline.unpause(),this.#e.timeline.setMillis(p)}}break;case G.FLAG_PEER_CONNECTED:{w.verbose("FLAG_PEER_CONNECTED"),n.readFlag();const s=n.readBytes(6).map(o=>o.toString(16).padStart(2,"0")).join(":");this.#t.emit("peer_connected",s)}break;case G.FLAG_PEER_DISCONNECTED:{w.verbose("FLAG_PEER_DISCONNECTED"),n.readFlag();const s=n.readBytes(6).map(o=>o.toString(16).padStart(2,"0")).join(":");this.#t.emit("peer_disconnected",s)}break;case G.FLAG_OTA_BEGIN:w.verbose("FLAG_OTA_BEGIN"),n.readFlag(),n.readUint8(),n.readUint32();break;case G.FLAG_OTA_WRITE:w.verbose("FLAG_OTA_WRITE"),n.readFlag(),n.readUint8(),n.readUint32(),n.forward(n.available);break;case G.FLAG_OTA_END:w.verbose("FLAG_OTA_END"),n.readFlag(),n.readUint8(),n.readUint32();break;case G.FLAG_OTA_RESET:w.verbose("FLAG_OTA_RESET"),n.readFlag(),n.readUint8(),n.readUint32();break;default:w.error(`ERROR flag=${n.readFlag()}, available=${n.available}`),n.forward(n.available);break}if(i.length){this.emit("emitted_events",i);const s=i.map(o=>o.info);w.info(s.join(`
`))}}}const Nf=Object.freeze({MODIFIER_SWITCH_NONE:0,MODIFIER_SWITCH_RG:1,MODIFIER_SWITCH_GB:2,MODIFIER_SWITCH_BR:3}),z=Object.freeze({NONE:0,DRAWING_SET:1,DRAWING_ADD:2,DRAWING_SUB:3,DRAWING_SCALE:4,DRAWING_FILTER:5,LAYER_SET:6,LAYER_ADD:7,LAYER_SUB:8,LAYER_SCALE:9,LAYER_FILTER:10,SCOPE:11,CLIP:12,SIFTER_DEVICE:13,SIFTER_SEGMENT:14,SIFTER_CANVAS:15,INTERACTIVE:16,EVENT_CATCHER:17,DECLARE_VARIABLE:18,DEFINE_DEVICE:24,DEFINE_SEGMENT:25,DEFINE_CANVAS:26,DEFINE_MARKS:27,DEFINE_EMITTER:28,DEFINE_ANIMATION:29,ANIMATION_NONE:32,ANIMATION_FILL:33,ANIMATION_RAINBOW:34,ANIMATION_FADE:35,ANIMATION_PROJECTILE:36,ANIMATION_LOADING:37,ANIMATION_COLOR_ROLL:38,ANIMATION_COLOR_GRADIENT3:39,ANIMATION_COLOR_GRADIENT5:40,ANIMATION_COLOR_GRADIENT2:41,ANIMATION_COLOR_GRADIENT4:42,ANIMATION_INL_ANI:126,ANIMATION_DEFINED:127,MODIFIER_BRIGHTNESS:128,MODIFIER_TIMELINE:129,MODIFIER_FADE_IN:130,MODIFIER_FADE_OUT:131,MODIFIER_SWITCH_COLORS:132,MODIFIER_TIME_LOOP:133,MODIFIER_TIME_SCALE:134,MODIFIER_TIME_SCALE_SMOOTHED:135,MODIFIER_TIME_CHANGE:136,MODIFIER_TIME_SET:137,GENERATOR_LAST_EVENT_VALUE:144,GENERATOR_SMOOTHOUT:145,GENERATOR_LAG_VALUE:146,GENERATOR_SINE:150,GENERATOR_SAW:151,GENERATOR_TRIANGLE:152,GENERATOR_SQUARE:153,GENERATOR_PERLIN_NOISE:154,VARIABLE_READ:160,VARIABLE_ADD:161,VARIABLE_SUB:162,VARIABLE_MUL:163,VARIABLE_DIV:164,VARIABLE_MOD:165,VARIABLE_SCALE:166,VARIABLE_MAP:167,DEVICE:176,SEGMENT:177,SLICE:178,PORT:179,CANVAS:180,MARKS:181,ID:182,EVENT_SET_VALUE:184,EVENT_EMIT_LOCAL:185,EVENT_RANDOM_CHOICE:186,VALUE_ADDRESS:187,TIMESTAMP:188,COLOR:189,PERCENTAGE:190,LABEL:191,PIXELS:192,TUPLE:193,TIMESTAMP_ZERO:194,TIMESTAMP_MAX:195,TIMESTAMP_MIN:196,COLOR_WHITE:197,COLOR_BLACK:198,CONST_PERCENTAGE_ZERO:199,CONST_PERCENTAGE_MAX:200,CONST_PERCENTAGE_MIN:201,END_OF_SCOPE:254,END_OF_TNGL_BYTES:255});class t${#e;#t;#n;#r;constructor(){this.#e=new Mi,this.#t=1,this.#n=[],this.#r=[]}reset(){this.#t=1,this.#n.length=0,this.#r.length=0}compileUndefined(){this.#e.writeUint8(z.NONE)}compileFlag(e){this.#e.writeUint8(e)}compileByte(e){let n=e.match(/0x([0-9a-f][0-9a-f])(?![0-9a-f])/i);if(!n){w.error("Failed to compile a byte");return}this.#e.writeUint8(parseInt(n[1],16))}compileChar(e){let n=e.match(/(-?)'([\W\w])'/);if(!n){w.error("Failed to compile char");return}n[1]==="-"?this.#e.writeUint8(-n[2].charCodeAt(0)):this.#e.writeUint8(n[2].charCodeAt(0))}compileString(e){if(!e.match(/"([\w ]*)"/)){w.error("Failed to compile a string");return}for(let r=0;r<e.length;r++)this.#e.writeUint8(e.charCodeAt(r));this.#e.writeFlag(z.NONE)}compileInfinity(e){let n=e.match(/([+-]?Infinity)/);if(!n){w.error("Failed to compile a infinity");return}n[1]==="Infinity"||n[1]==="+Infinity"?this.#e.writeFlag(z.TIMESTAMP_MAX):n[1]==="-Infinity"?this.#e.writeFlag(z.TIMESTAMP_MIN):w.error("Error while compiling infinity")}compileVariableAddress(e){w.verbose(`compileVariableAddress(${e})`);let n=e.match(/&([a-z_][\w]*)/i);if(!n){w.error("Failed to compile variable address");return}const r=n[1];let i;for(let s=this.#n.length-1;s>=0;s--){const o=this.#n[s];if(o.name===r){i=o.address;break}}if(i===void 0)throw console.error(`Variable ${r} is not declated`),"CompilationError";w.verbose(`VALUE_ADDRESS name=${r}, address=${i}`),this.#e.writeFlag(z.VALUE_ADDRESS),this.#e.writeUint16(i)}compileTimestamp(e){if(!e){this.#e.writeFlag(z.TIMESTAMP_ZERO);return}if(e=e.trim(),e=="inf"||e=="Inf"||e=="infinity"||e=="Infinity"){this.#e.writeFlag(z.TIMESTAMP_MAX);return}if(e=="-inf"||e=="-Inf"||e=="-infinity"||e=="-Infinity"){this.#e.writeFlag(z.TIMESTAMP_MIN);return}isNaN(e)||(e+="s");let n=e.match(/([+-]?[0-9]+[.]?[0-9]*|[.][0-9]+)\s*d/gi),r=e.match(/([+-]?[0-9]+[.]?[0-9]*|[.][0-9]+)\s*h/gi),i=e.match(/([+-]?[0-9]+[.]?[0-9]*|[.][0-9]+)\s*m(?!s)/gi),s=e.match(/([+-]?[0-9]+[.]?[0-9]*|[.][0-9]+)\s*s/gi),o=e.match(/([+-]?[0-9]+[.]?[0-9]*|[.][0-9]+)\s*(t|ms)/gi),l=0;for(;n&&n.length;){let c=parseFloat(n[0]);l+=c*864e5,n.shift()}for(;r&&r.length;){let c=parseFloat(r[0]);l+=c*36e5,r.shift()}for(;i&&i.length;){let c=parseFloat(i[0]);l+=c*6e4,i.shift()}for(;s&&s.length;){let c=parseFloat(s[0]);l+=c*1e3,s.shift()}for(;o&&o.length;){let c=parseFloat(o[0]);l+=c,o.shift()}if(l>=2147483647){this.#e.writeFlag(z.TIMESTAMP_MAX);return}else if(l<=-2147483648){this.#e.writeFlag(z.TIMESTAMP_MIN);return}else if(l===0){this.#e.writeFlag(z.TIMESTAMP_ZERO);return}else{this.#e.writeFlag(z.TIMESTAMP),this.#e.writeInt32(l);return}}compileColor(e){let n=e.match(/#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i);if(!n){w.error("Failed to compile color");return}let r=parseInt(n[1],16),i=parseInt(n[2],16),s=parseInt(n[3],16);r===255&&i===255&&s===255?this.#e.writeFlag(z.COLOR_WHITE):r===0&&i===0&&s===0?this.#e.writeFlag(z.COLOR_BLACK):(this.#e.writeFlag(z.COLOR),this.#e.writeUint8(r),this.#e.writeUint8(i),this.#e.writeUint8(s))}compilePercentage(e){let n=e.match(/([+-]?[\d.]+)%/);if(!n){w.error("Failed to compile percentage");return}let r=parseFloat(n[1]);r>100&&(r=100),r<-100&&(r=-100);const i=(100- -100)/2**28;if(r>-i&&r<i)this.#e.writeFlag(z.CONST_PERCENTAGE_ZERO);else if(r>100-i)this.#e.writeFlag(z.CONST_PERCENTAGE_MAX);else if(r<-100+i)this.#e.writeFlag(z.CONST_PERCENTAGE_MIN);else{const s=Nu(r,-100,100,-2147483647,2147483647);this.#e.writeFlag(z.PERCENTAGE),this.#e.writeInt32(parseInt(s))}}compileLabel(e){let n=e.match(/\$([\w]*)/);if(!n){w.error("Failed to compile a label");return}this.#e.writeFlag(z.LABEL);for(let r=0;r<5;r++)this.#e.writeUint8(n[1].charCodeAt(r))}compilePixels(e){let n=e.match(/(-?[\d]+)px/);if(!n){w.error("Failed to compile pixels");return}let r=parseInt(n[1]);this.#e.writeFlag(z.PIXELS),this.#e.writeInt16(r)}compileConstVariableDeclaration(e){w.verbose(`compileConstVariableDeclaration(${e})`);let n=e.match(/const +([A-Za-z_][\w]*) *=/);if(!n){w.error("Failed to compile variable declaration");return}const r=n[1];let i=this.#t++;this.#n.push({name:r,address:i}),w.verbose(`DECLARE_VARIABLE name=${r} address=${i}`),this.#e.writeFlag(z.DECLARE_VARIABLE),this.#e.writeUint16(i)}compileWord(e){switch(e){case"setDrawing":this.#e.writeFlag(z.DRAWING_SET);break;case"addDrawing":this.#e.writeFlag(z.DRAWING_ADD);break;case"subDrawing":this.#e.writeFlag(z.DRAWING_SUB);break;case"scaDrawing":this.#e.writeFlag(z.DRAWING_SCALE);break;case"filDrawing":this.#e.writeFlag(z.DRAWING_FILTER);break;case"setLayer":this.#e.writeFlag(z.LAYER_SET);break;case"addLayer":this.#e.writeFlag(z.LAYER_ADD);break;case"subLayer":this.#e.writeFlag(z.LAYER_SUB);break;case"scaLayer":this.#e.writeFlag(z.LAYER_SCALE);break;case"filLayer":this.#e.writeFlag(z.LAYER_FILTER);break;case"scope":this.#e.writeFlag(z.SCOPE);break;case"animation":this.#e.writeFlag(z.ANIMATION_DEFINED);break;case"animNone":this.#e.writeFlag(z.ANIMATION_NONE);break;case"animFill":this.#e.writeFlag(z.ANIMATION_FILL);break;case"animRainbow":this.#e.writeFlag(z.ANIMATION_RAINBOW);break;case"animPlasmaShot":this.#e.writeFlag(z.ANIMATION_PROJECTILE);break;case"animLoadingBar":this.#e.writeFlag(z.ANIMATION_LOADING);break;case"animFade":this.#e.writeFlag(z.ANIMATION_FADE);break;case"animColorRoll":this.#e.writeFlag(z.ANIMATION_COLOR_ROLL);break;case"animColorGradient2":this.#e.writeFlag(z.ANIMATION_COLOR_GRADIENT2);break;case"animColorGradient3":this.#e.writeFlag(z.ANIMATION_COLOR_GRADIENT3);break;case"animColorGradient4":this.#e.writeFlag(z.ANIMATION_COLOR_GRADIENT4);break;case"animColorGradient5":this.#e.writeFlag(z.ANIMATION_COLOR_GRADIENT5);break;case"interactive":this.#e.writeFlag(z.INTERACTIVE);break;case"clip":this.#e.writeFlag(z.CLIP);break;case"defAnimation":this.#e.writeFlag(z.DEFINE_ANIMATION);break;case"defDevice":this.#e.writeFlag(z.DEFINE_DEVICE);break;case"defSegment":this.#e.writeFlag(z.DEFINE_SEGMENT);break;case"defCanvas":this.#e.writeFlag(z.DEFINE_CANVAS);break;case"defMarks":this.#e.writeFlag(z.DEFINE_MARKS);break;case"siftSegments":this.#e.writeFlag(z.SIFTER_SEGMENT);break;case"siftCanvases":this.#e.writeFlag(z.SIFTER_CANVAS);break;case"device":this.#e.writeFlag(z.DEVICE);break;case"segment":this.#e.writeFlag(z.SEGMENT);break;case"slice":this.#e.writeFlag(z.SLICE);break;case"port":this.#e.writeFlag(z.PORT);break;case"canvas":this.#e.writeFlag(z.CANVAS);break;case"marks":this.#e.writeFlag(z.MARKS);break;case"id":this.#e.writeFlag(z.ID);break;case"modifyBrightness":this.#e.writeFlag(z.MODIFIER_BRIGHTNESS);break;case"modifyTimeline":this.#e.writeFlag(z.MODIFIER_TIMELINE);break;case"modifyFadeIn":this.#e.writeFlag(z.MODIFIER_FADE_IN);break;case"modifyFadeOut":this.#e.writeFlag(z.MODIFIER_FADE_OUT);break;case"modifyColorSwitch":this.#e.writeFlag(z.MODIFIER_SWITCH_COLORS);break;case"modifyTimeLoop":this.#e.writeFlag(z.MODIFIER_TIME_LOOP);break;case"modifyTimeScale":this.#e.writeFlag(z.MODIFIER_TIME_SCALE);break;case"modifyTimeScaleSmoothed":this.#e.writeFlag(z.MODIFIER_TIME_SCALE_SMOOTHED);break;case"modifyTimeChange":this.#e.writeFlag(z.MODIFIER_TIME_CHANGE);break;case"modifyTimeSet":this.#e.writeFlag(z.MODIFIER_TIME_SET);break;case"catchEvent":this.#e.writeFlag(z.EVENT_CATCHER);break;case"setValue":this.#e.writeFlag(z.EVENT_SET_VALUE);break;case"emitAs":this.#e.writeFlag(z.EVENT_EMIT_LOCAL);break;case"randomChoice":this.#e.writeFlag(z.EVENT_RANDOM_CHOICE);break;case"genLastEventParam":this.#e.writeFlag(z.GENERATOR_LAST_EVENT_VALUE);break;case"genSine":this.#e.writeFlag(z.GENERATOR_SINE);break;case"genSaw":this.#e.writeFlag(z.GENERATOR_SAW);break;case"genTriangle":this.#e.writeFlag(z.GENERATOR_TRIANGLE);break;case"genSquare":this.#e.writeFlag(z.GENERATOR_SQUARE);break;case"genPerlinNoise":this.#e.writeFlag(z.GENERATOR_PERLIN_NOISE);break;case"genSmoothOut":this.#e.writeFlag(z.GENERATOR_SMOOTHOUT);break;case"genLagValue":this.#e.writeFlag(z.GENERATOR_LAG_VALUE);break;case"addValues":this.#e.writeFlag(z.VARIABLE_ADD);break;case"subValues":this.#e.writeFlag(z.VARIABLE_SUB);break;case"mulValues":this.#e.writeFlag(z.VARIABLE_MUL);break;case"divValues":this.#e.writeFlag(z.VARIABLE_DIV);break;case"modValues":this.#e.writeFlag(z.VARIABLE_MOD);break;case"scaValue":this.#e.writeFlag(z.VARIABLE_SCALE);break;case"mapValue":this.#e.writeFlag(z.VARIABLE_MAP);break;case"true":this.#e.writeUint8(1);break;case"false":this.#e.writeUint8(0);break;case"MODIFIER_SWITCH_NONE":this.#e.writeUint8(Nf.MODIFIER_SWITCH_NONE);break;case"MODIFIER_SWITCH_RG":case"MODIFIER_SWITCH_GR":this.#e.writeUint8(Nf.MODIFIER_SWITCH_RG);break;case"MODIFIER_SWITCH_GB":case"MODIFIER_SWITCH_BG":this.#e.writeUint8(Nf.MODIFIER_SWITCH_GB);break;case"MODIFIER_SWITCH_BR":case"MODIFIER_SWITCH_RB":this.#e.writeUint8(Nf.MODIFIER_SWITCH_BR);break;default:let n;for(let r=this.#n.length-1;r>=0;r--){const i=this.#n[r];if(i.name===e){n=i.address;break}}if(n!==void 0){w.debug(`VARIABLE_READ name=${e}, address=${n}`),this.#e.writeFlag(z.VARIABLE_READ),this.#e.writeUint16(n);break}w.warn("Unknown word >",e,"<");break}}compilePunctuation(e){switch(e){case"{":this.#r.push(this.#n.length);break;case"}":const n=this.#r.pop();this.#n.length=n,this.#e.writeFlag(z.END_OF_SCOPE);break}}get tnglBytes(){return new Uint8Array(this.#e.bytes.buffer,0,this.#e.written)}}class $d{#e;constructor(){this.#e=new t$}parseTnglCode(e){w.verbose(e),this.#e.reset();const n=this.#n(e,$d.#t);w.verbose(n);for(let i=0;i<n.length;i++){const s=n[i];switch(s.type){case"undefined":this.#e.compileUndefined();break;case"const_variale_declaration":this.#e.compileConstVariableDeclaration(s.token);break;case"comment":break;case"htmlrgb":this.#e.compileColor(s.token);break;case"infinity":this.#e.compileInfinity(s.token);break;case"string":this.#e.compileString(s.token);break;case"variable_address":this.#e.compileVariableAddress(s.token);break;case"timestamp":this.#e.compileTimestamp(s.token);break;case"label":this.#e.compileLabel(s.token);break;case"char":this.#e.compileChar(s.token);break;case"byte":this.#e.compileByte(s.token);break;case"pixels":this.#e.compilePixels(s.token);break;case"percentage":this.#e.compilePercentage(s.token);break;case"float":w.error('"Naked" float numbers are not permitted.');break;case"number":w.error('"Naked" numbers are not permitted.');break;case"word":this.#e.compileWord(s.token);break;case"whitespace":break;case"punctuation":this.#e.compilePunctuation(s.token);break;default:w.warn("Unknown token type >",s.type,"<");break}}this.#e.compileFlag(z.END_OF_TNGL_BYTES);let r=this.#e.tnglBytes;return w.verbose(r),w.info("Compiled tnglbytes length:",r.length),r}static#t={undefined:/undefined/,const_variale_declaration:/const +[A-Za-z_][\w]* *=/,comment:/\/\/[^\n]*/,htmlrgb:/#[0-9a-f]{6}/i,infinity:/[+-]?Infinity/,string:/"[\w ]*"/,variable_address:/&[a-z_][\w]*/i,timestamp:/(_?[+-]?[0-9]*[.]?[0-9]+(d|h|m(?!s)|s|t|ms))+/,label:/\$[\w]*/,char:/-?'[\W\w]'/,byte:/0x[0-9a-f][0-9a-f](?![0-9a-f])/i,pixels:/-?[\d]+px/,percentage:/[+-]?[\d.]+%/,float:/([+-]?[0-9]*[.][0-9]+)/,number:/([+-]?[0-9]+)/,word:/[a-z_][\w]*/i,whitespace:/\s+/,punctuation:/[^\w\s]/};#n(e,n,r){for(var i,s,o,l=[];e;){o=null,i=e.length;for(var c in n)s=n[c].exec(e),s&&s.index<i&&(o={token:s[0],type:c,matches:s.slice(1)},i=s.index);i&&l.push({token:e.substr(0,i),type:r||"unknown"}),o&&l.push(o),e=e.substr(i+(o?o.token.length:0))}return l}}let lr={};class n${#e;#t;#n;#r;#a;#i;#s;#o;#u;#c;constructor(e="default",n=1e3){typeof window>"u"||(this.timeline=new _o(0,!0),this.#e=Math.floor(Math.random()*4294967295),this.#t=null,this.#n=null,this.interface=new e$(this,n),e&&this.interface.assignConnector(e),this.#r=!1,this.#a=!1,this.#i=!1,this.#s=!1,this.#c=!1,this.interface.onConnected=r=>{this.#a?w.verbose("connected event skipped because of adopt"):(w.info("> Device connected"),this.interface.emit("connected",{target:this}),this.requestTimeline().catch(i=>{w.error("Timeline request after reconnection failed.",i)}))},this.interface.onDisconnected=r=>{this.#a?w.verbose("disconnected event skipped because of adopt"):(w.info("> Device disconnected"),this.interface.emit("disconnected",{target:this}))},setInterval(()=>{!this.#s&&this.interface.connector&&this.connected().then(r=>{r&&this.syncClock().catch(i=>{w.warn(i)})})},3e4))}requestWakeLock(){return this.interface.requestWakeLock()}releaseWakeLock(){return this.interface.releaseWakeLock()}setOwnerSignature(e){const n=e.match(/([\dabcdefABCDEF]{32})/g);if(!n[0])throw"InvalidSignature";return this.#t=n[0],!0}assignOwnerSignature(e){return this.setOwnerSignature(e)}getOwnerSignature(){return this.#t}setOwnerKey(e){const n=e.match(/([\dabcdefABCDEF]{32})/g);if(!n[0])throw"InvalidKey";return this.#n=n[0],!0}assignOwnerKey(e){return this.setOwnerKey(e)}getOwnerKey(){return this.#n}setConnector(e){this.interface.assignConnector(e)}assignConnector(e){return this.setConnector(e)}connectRemoteControl(){this.#c=!0,w.debug("> Connecting to Remote Control"),this.socket?this.socket.connect():(this.socket=su(BA,{transports:["websocket"]}),this.socket.on("connect",()=>{w.debug("> Connected to remote control"),window.alert(vt("Connected to remote control"))}),this.socket.on("disconnect",()=>{w.debug("> Disconnected from remote control"),window.alert(vt("Disconnected from remote control"))}),this.socket.on("request",async(e,n,r)=>{w.warn("request",e,n),this.interface.request(n,r).then(i=>{i=i,w.info({reqId:e,payload:i}),this.socket.emit("response_success",e,i)}).catch(i=>this.socket.emit("response_error",e,i))}),this.socket.on("connect_error",e=>{w.debug("connect_error",e),setTimeout(()=>{this.socket.connect()},1e3)}))}disconnectRemoteControl(){w.debug("> Disonnecting from the Remote Control"),this.#c=!1,this.socket?.disconnect()}#l(){return this.#e>=4294967295&&(this.#e=0),++this.#e}addEventListener(e,n){return this.interface.addEventListener(e,n)}on(e,n){return this.interface.on(e,n)}scan(e=5e3){return this.interface.scan([{}],e)}adopt(e=null,n=null,r=null,i=null,s=null,o=!1){if(this.#i)return Promise.reject("AdoptingInProgress");if(this.#i=!0,i&&this.setOwnerSignature(i),s&&this.setOwnerKey(s),!this.#t)throw"OwnerSignatureNotAssigned";if(!this.#n)throw"OwnerKeyNotAssigned";const l=[{adoptionFlag:!0}];return(o?this.interface.autoSelect(l,4e3):this.interface.userSelect(l,6e4)).then(()=>(this.#a=!0,this.interface.connect(1e4,!0))).then(async()=>{try{for(;!e||!e.match(/^[\w_ ]+/);){let c=!1;if(e=await window.prompt(vt("Unikátní jméno pro vaši lampu vám ji pomůže odlišit od ostatních."),"LED_",vt("Pojmenujte svoji lampu"),"text",{placeholder:"Spectoda",regex:/^[a-zA-Z0-9_ ]{1,16}$/,invalidText:vt("Název obsahuje nepovolené znaky"),maxlength:16}),!e)throw"AdoptionCanceled"}for(;!n||typeof n!="number"&&!n.match(/^[\d]+/);)if(n=await window.prompt(vt("Prosím, zadejte ID zařízení v rozmezí 0-255."),"0",vt("Přidělte ID svému zařízení"),"number",{min:0,max:255}),!n)throw"AdoptionCanceled";e=DU(e),e=e.replace(/((?![\w_ ]).)/g," "),e=e.trim(),e=e.match(/^[\w_ ]+/)[0],typeof n!="number"&&(n=Number(n.match(/^[\d]+/)[0]))}catch(c){return w.error(c),await this.disconnect(),Promise.reject("UserRefused")}return Promise.resolve()}).then(()=>{const c=Wv(this.#t,16),f=Wv(this.#n,16),h=F0(e.slice(0,11),16),p=n,m=this.#l(),y=[G.FLAG_ADOPT_REQUEST,...ne(m,4),...c,...f,...h,...ne(p,1)];return w.debug("> Adopting device..."),w.verbose(y),this.interface.request(y,!0).then(T=>{let C=new Ct(T);if(w.debug("> Got response:",T),C.readFlag()!==G.FLAG_ADOPT_RESPONSE||C.readUint32()!=m)throw"InvalidResponse";const v=C.readUint8(),E=v===0?C.readBytes(6):[0,0,0,0,0,0],I=Array.from(E,function(x){return("0"+(x&255).toString(16)).slice(-2)}).join(":");return w.verbose(`error_code=${v}, device_mac=${I}`),v===0?(w.info("Adopted ",e,"id: "+p,I,"successfully"),this.rebootAndDisconnectDevice().catch(x=>{w.error(x)}).then(()=>({mac:I,ownerSignature:this.#t,ownerKey:this.#n,name:e,id:n}))):(w.warn("Adoption refused."),window.alert(vt("Zkuste to, prosím, později."),vt("Přidání se nezdařilo"),{confirm:vt("OK")}),this.rebootAndDisconnectDevice().catch(()=>{throw"AdoptionRefused"}))}).catch(T=>{w.error(T),this.disconnect().finally(()=>{throw"AdoptionFailed"})})}).catch(c=>{if(w.warn(c),c==="UserCanceledSelection")return this.connected().then(f=>{if(!f)throw"UserCanceledSelection"})}).finally(()=>{this.#i=!1,this.#a=!1})}connect(e=null,n=!0,r=null,i=null,s=!1,o=""){if(w.info(`connect(devices=${e}, autoConnect=${n}, ownerSignature=${r}, ownerKey=${i}, connectAny=${s}, fwVersion=${o})`),this.#r)return Promise.reject("ConnectingInProgress");if(r&&this.setOwnerSignature(r),i&&this.setOwnerKey(i),!this.#t)throw"OwnerSignatureNotAssigned";if(!this.#n)throw"OwnerKeyNotAssigned";this.#r=!0;let l=[{ownerSignature:this.#t}];if(e&&e.length>0){let c=[];for(let f=0;f<e.length;f++){let h={};e[f].name?(h.ownerSignature=this.#t,h.name=e[f].name.slice(0,11),c.push(h)):e[f].mac&&(h.ownerSignature=this.#t,h.mac=e[f].mac,c.push(h))}c.length!=0&&(l=c)}if(s&&(jo()?l=[{}]:l=[{},{adoptionFlag:!0},{legacy:!0}]),typeof o=="string"&&o.match(/(!?)([\d]+).([\d]+).([\d]+)/))for(let c=0;c<l.length;c++)l[c].fwVersion=o;return(n?this.interface.autoSelect(l):this.interface.userSelect(l)).then(()=>this.interface.connect()).then(c=>this.readEventHistory().then(()=>c).catch(f=>{console.warn(f)})).catch(c=>{if(w.error(c),c==="UserCanceledSelection")throw"UserCanceledSelection";if(c==="SecurityError"){w.error(c);return}throw c.toString()}).finally(()=>{this.#r=!1})}disconnect(){return this.interface.disconnect().catch(e=>{w.warn(e)})}connected(){return this.#r||this.#a?Promise.resolve():this.interface.connected()}syncTngl(e,n=null,r=0){return w.verbose("syncTngl()"),e===null&&n===null?Promise.reject("InvalidParameters"):(n===null&&(n=new $d().parseTnglCode(e)),this.getTnglFingerprint(r).then(i=>PU(n,"fingerprint").then(s=>{for(let o=0;o<i.length;o++)if(i[o]!==s[o])return this.writeTngl(null,n,r)})))}writeTngl(e,n=null,r=0){if(w.verbose("writeTngl()"),r==null&&(r=0),e===null&&n===null)return Promise.reject("InvalidParameters");n===null&&(n=new $d().parseTnglCode(e));const i=this.timeline.paused()?16:0,s=[G.FLAG_SET_TIMELINE,...ne(this.interface.clock.millis(),6),...ne(this.timeline.millis(),4),i],o=[G.FLAG_REINTERPRET_TNGL,...ne(this.interface.clock.millis(),6),r,...ne(n.length,4),...n],l=[...s,...o];return this.interface.execute(l,"TNGL").then(()=>{})}emitEvent(e,n=[255],r=!0){w.verbose(`emitEvent(label=${e},id=${n},force=${r})`),lr[e]={value:null,type:"none"};const i=s=>{const o=[G.FLAG_EMIT_EVENT,...Mo(e),...ne(this.timeline.millis(),4),ne(s,2)];return this.interface.execute(o,r?null:"E"+e+s)};if(typeof n=="object"){let s=n.map(i);return Promise.all(s)}else return i(n)}resendAll(){Object.keys(lr).forEach(e=>{switch(lr[e].type){case"percentage":this.emitPercentageEvent(e,lr[e].value);break;case"timestamp":this.emitTimestampEvent(e,lr[e].value);break;case"color":this.emitColorEvent(e,lr[e].value);break;case"label":this.emitLabelEvent(e,lr[e].value);break;case"none":this.emitEvent(e);break}})}emitTimestampEvent(e,n,r=[255],i=!1){w.verbose(`emitTimestampEvent(label=${e},value=${n},id=${r},force=${i})`),lr[e]={value:n,type:"timestamp"},n>2147483647&&(w.error("Invalid event value"),n=2147483647),n<-2147483648&&(w.error("Invalid event value"),n=-2147483648);const s=o=>{const l=[G.FLAG_EMIT_TIMESTAMP_EVENT,...ne(n,4),...Mo(e),...ne(this.interface.clock.millis()+10,6),ne(o,1)];return this.interface.execute(l,i?null:"E"+e+o)};if(typeof r=="object"){let o=r.map(s);return Promise.all(o)}else return s(r)}emitColorEvent(e,n,r=[255],i=!1){w.verbose(`emitColorEvent(label=${e},value=${n},id=${r},force=${i})`),lr[e]={value:n,type:"color"},(!n||!n.match(/#[\dabcdefABCDEF]{6}/g))&&(w.error("Invalid event value. event_value=",n),n="#000000");const s=o=>{const l=[G.FLAG_EMIT_COLOR_EVENT,...SU(n),...Mo(e),...ne(this.interface.clock.millis()+10,6),ne(o,1)];return this.interface.execute(l,i?null:"E"+e+o)};if(typeof r=="object"){let o=r.map(s);return Promise.all(o)}else return s(r)}emitPercentageEvent(e,n,r=[255],i=!1){w.verbose(`emitPercentageEvent(label=${e},value=${n},id=${r},force=${i})`),lr[e]={value:n,type:"percentage"},n>100&&(w.error("Invalid event value"),n=100),n<-100&&(w.error("Invalid event value"),n=-100);const s=o=>{const l=[G.FLAG_EMIT_PERCENTAGE_EVENT,...bU(n),...Mo(e),...ne(this.interface.clock.millis()+10,6),ne(o,1)];return this.interface.execute(l,i?null:"E"+e+o)};if(typeof r=="object"){let o=r.map(s);return Promise.all(o)}else return s(r)}emitLabelEvent(e,n,r=[255],i=!1){w.verbose(`emitLabelEvent(label=${e},value=${n},id=${r},force=${i})`),lr[e]={value:n,type:"label"},typeof n!="string"&&(w.error("Invalid event value"),n=""),n.length>5&&(w.error("Invalid event value"),n=n.slice(0,5));const s=o=>{const l=[G.FLAG_EMIT_LABEL_EVENT,...Mo(n),...Mo(e),...ne(this.interface.clock.millis()+10,6),ne(o,1)];return this.interface.execute(l,i?null:"E"+e+o)};if(typeof r=="object"){let o=r.map(s);return Promise.all(o)}else return s(r)}syncTimeline(){w.verbose("syncTimeline()");const e=this.timeline.paused()?16:0,n=[G.FLAG_SET_TIMELINE,...ne(this.interface.clock.millis(),6),...ne(this.timeline.millis(),4),e];return this.interface.execute(n,"TMLN")}syncClock(){return w.debug("> Syncing clock from device"),this.interface.syncClock().then(()=>{w.debug("> App clock synchronized")})}syncState(e){w.debug("> Synchronizing state...");const n=this.#l(),r=[G.FLAG_SYNC_STATE_REQUEST,...ne(n,4),e];return this.interface.request(r,!1)}updateDeviceFirmware(e){return w.verbose(`updateDeviceFirmware(firmware.length=${e?.length})`),!e||e.length<1e4?(w.error("Invalid firmware"),Promise.reject("InvalidFirmware")):this.interface.updateFW(e).then(()=>{this.disconnect()})}updateNetworkFirmware(e){return w.verbose(`updateNetworkFirmware(firmware.length=${e?.length})`),!e||e.length<1e4?(w.error("Invalid firmware"),Promise.reject("InvalidFirmware")):(this.#s=!0,this.interface.requestWakeLock(),new Promise(async(n,r)=>{let s=0,o=480,l=0;w.info("OTA UPDATE"),w.verbose(e);const c=new Date().getTime();await ie(100);try{this.interface.emit("ota_status","begin");{w.info("OTA RESET");const h=[G.FLAG_OTA_RESET,0,...ne(0,4)];await this.interface.execute(h,null)}await ie(100);{w.info("OTA BEGIN");const h=[G.FLAG_OTA_BEGIN,0,...ne(e.length,4)];await this.interface.execute(h,null,2e4)}for(await ie(1e4),w.info("OTA WRITE");l<e.length;){o>e.length&&(o=e.length);const h=[G.FLAG_OTA_WRITE,0,...ne(l,4),...e.slice(s,o)];await this.interface.execute(h,null),l+=o-s;const p=Math.floor(l*1e4/e.length)/100;w.debug(p+"%"),this.interface.emit("ota_progress",p),s+=480,o=s+480}await ie(100);{w.info("OTA END");const h=[G.FLAG_OTA_END,0,...ne(l,4)];await this.interface.execute(h,null)}await ie(5e3),w.debug("Rebooting whole network...");const f=[G.FLAG_DEVICE_REBOOT_REQUEST];await this.interface.execute(f,null),w.debug("Firmware written in "+(new Date().getTime()-c)/1e3+" seconds"),this.interface.emit("ota_status","success"),n(null);return}catch(f){this.interface.emit("ota_status","fail"),r(f);return}}).then(()=>this.disconnect()).finally(()=>{this.interface.releaseWakeLock(),this.#s=!1}))}async updatePeerFirmware(e){if(w.debug(`updatePeerFirmware(peer=${e})`),e==null&&(e=await prompt("Please enter a valid MAC address:","00:00:00:00:00:00")),!/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/.test(e))throw"InvalidMacAdress";const n=this.#l(),r=[G.FLAG_FW_UPDATE_PEER_REQUEST,...ne(n,4),...CU(e)];return this.interface.request(r,!0).then(i=>{let s=new Ct(i);if(w.info(`response.byteLength=${i.byteLength}`),s.readFlag()!==G.FLAG_FW_UPDATE_PEER_RESPONSE)throw"InvalidResponseFlag";if(s.readUint32()!=n)throw"InvalidResponseUuid";const l=s.readUint8();if(w.verbose(`error_code=${l}`),l===0)w.info("Update sucessful");else throw"Fail"})}readDeviceConfig(e="ee:33:fa:89:08:08"){w.debug("> Reading device config...");const n=this.#l(),r=[G.FLAG_DEVICE_CONFIG_REQUEST,...ne(n,4)];return this.interface.request(r,!0).then(i=>{let s=new Ct(i);if(w.info(`response.byteLength=${i.byteLength}`),s.readFlag()!==G.FLAG_DEVICE_CONFIG_RESPONSE)throw"InvalidResponseFlag";if(s.readUint32()!=n)throw"InvalidResponseUuid";const l=s.readUint8();if(w.verbose(`error_code=${l}`),l===0){const c=s.readUint32();w.verbose(`config_size=${c}`);const f=s.readBytes(c);w.verbose(`config_bytes=${f}`);const p=new TextDecoder().decode(new Uint8Array(f));return w.verbose(`config=${p}`),p.charAt(p.length-1)=="\0"?(w.warn("NULL config character detected"),p.slice(0,p.length-1)):p}else throw"Fail"})}updateDeviceConfig(e){w.debug("> Updating config...");const r=new TextEncoder().encode(e),i=e.length,s=this.#l(),o=[G.FLAG_CONFIG_UPDATE_REQUEST,...ne(s,4),...ne(i,4),...r];return this.interface.request(o,!0).then(l=>{let c=new Ct(l);if(w.info(`response.byteLength=${l.byteLength}`),c.readFlag()!==G.FLAG_CONFIG_UPDATE_RESPONSE||c.readUint32()!=s)throw"InvalidResponse";const h=c.readUint8();if(w.verbose(`error_code=${h}`),h===0){w.info("Write Config Success");const p=[G.FLAG_DEVICE_REBOOT_REQUEST];return this.interface.request(p,!1)}else throw"Fail"})}updateNetworkConfig(e){w.debug("> Updating config of whole network...");const r=new TextEncoder().encode(e),i=e.length,s=this.#l(),o=[G.FLAG_CONFIG_UPDATE_REQUEST,...ne(s,4),...ne(i,4),...r];return this.interface.execute(o,"CONF").then(()=>{w.debug("> Rebooting network...");const l=[G.FLAG_DEVICE_REBOOT_REQUEST];return this.interface.execute(l,null)})}requestTimeline(){w.debug("> Requesting timeline...");const e=this.#l(),n=[G.FLAG_TIMELINE_REQUEST,...ne(e,4)];return this.interface.request(n,!0).then(r=>{w.info(`response.byteLength=${r.byteLength}`);let i=new Ct(r);if(i.readFlag()!==G.FLAG_TIMELINE_RESPONSE)throw"InvalidResponseFlag";if(i.readUint32()!=e)throw"InvalidResponseUuid";i.readUint8();const o=i.readUint48(),l=i.readInt32(),c=i.readUint8();w.verbose(`clock_timestamp=${o}, timeline_timestamp=${l}, timeline_paused=${c}`),c?this.timeline.setState(l,!0):this.timeline.setState(l+(this.interface.clock.millis()-o),!1)})}rebootNetwork(){w.debug("> Rebooting network...");const e=[G.FLAG_DEVICE_REBOOT_REQUEST];return this.interface.execute(e,null)}rebootDevice(){w.debug("> Rebooting device...");const e=[G.FLAG_DEVICE_REBOOT_REQUEST];return this.interface.request(e,!1)}rebootAndDisconnectDevice(){w.debug("> Rebooting and disconnecting device..."),this.interface.reconnection(!1);const e=[G.FLAG_DEVICE_REBOOT_REQUEST];return this.interface.request(e,!1).then(()=>this.interface.disconnect())}removeOwner(){w.debug("> Removing owner...");const e=this.#l(),n=[G.FLAG_ERASE_OWNER_REQUEST,...ne(e,4)];return this.interface.request(n,!0).then(r=>{let i=new Ct(r);if(w.info(`response.byteLength=${r.byteLength}`),i.readFlag()!==G.FLAG_ERASE_OWNER_RESPONSE)throw"InvalidResponseFlag";if(i.readUint32()!=e)throw"InvalidResponseUuid";const o=i.readUint8();if(w.verbose(`error_code=${o}`),o!==0)throw"OwnerEraseFailed";const l=i.readBytes(6);return this.rebootAndDisconnectDevice().catch(()=>{}).then(()=>{let c="00:00:00:00:00:00";return l.length>=6&&(c=Array.from(l,function(f){return("0"+(f&255).toString(16)).slice(-2)}).join(":")),{mac:c!=="00:00:00:00:00:00"?c:null}})})}removeNetworkOwner(){w.debug("> Removing network owner...");const e=this.#l(),n=[G.FLAG_ERASE_OWNER_REQUEST,...ne(e,4)];return this.interface.execute(n,!0)}getFwVersion(){w.debug("> Requesting fw version...");const e=this.#l(),n=[G.FLAG_FW_VERSION_REQUEST,...ne(e,4)];return w.info("getFwVersion",{bytes:n}),this.interface.request(n,!0).then(r=>{let i=new Ct(r);if(w.info(`response.byteLength=${r.byteLength}`),i.readFlag()!==G.FLAG_FW_VERSION_RESPONSE)throw"InvalidResponseFlag";if(i.readUint32()!=e)throw"InvalidResponseUuid";const o=i.readUint8();w.verbose(`error_code=${o}`);let l=null;if(o===0)l=i.readString(32);else throw"Fail";return w.verbose(`version=${l}`),w.debug(`> FW Version: ${l}`),l.trim()})}getTnglFingerprint(e=0){w.debug("> Getting TNGL fingerprint..."),e==null&&(e=0);const n=this.#l(),r=[G.FLAG_TNGL_FINGERPRINT_REQUEST,...ne(n,4),e];return this.interface.request(r,!0).then(i=>{let s=new Ct(i);if(w.debug("> Got response:",i),s.readFlag()!==G.FLAG_TNGL_FINGERPRINT_RESPONSE)throw"InvalidResponseFlag";if(s.readUint32()!=n)throw"InvalidResponseUuid";const l=s.readUint8();w.verbose(`error_code=${l}`);let c=null;if(l===0)c=s.readBytes(32);else throw"Fail";return w.verbose(`fingerprint=${c}`),new Uint8Array(c)})}setNetworkDatarate(e){w.debug(`> Setting network datarate to ${e} bsp...`);const n=this.#l(),r=[G.FLAG_CHANGE_DATARATE_REQUEST,...ne(n,4),...ne(e,4)];return this.interface.execute(r,null)}readRomPhyVdd33(){w.debug("> Requesting rom_phy_vdd33 ...");const e=this.#l(),n=[G.FLAG_ROM_PHY_VDD33_REQUEST,...ne(e,4)];return this.interface.request(n,!0).then(r=>{let i=new Ct(r);if(w.info(`response.byteLength=${r.byteLength}`),i.readFlag()!==G.FLAG_ROM_PHY_VDD33_RESPONSE)throw"InvalidResponseFlag";if(i.readUint32()!=e)throw"InvalidResponseUuid";const o=i.readUint8();w.verbose(`error_code=${o}`);let l=null;if(o===0)l=i.readInt32();else throw"Fail";return w.info(`vdd_reading=${l}`),l})}readPinVoltage(e){w.debug(`> Requesting pin ${e} voltage ...`);const n=this.#l(),r=[G.FLAG_VOLTAGE_ON_PIN_REQUEST,...ne(n,4),e];return this.interface.request(r,!0).then(i=>{let s=new Ct(i);if(w.info(`response.byteLength=${i.byteLength}`),s.readFlag()!==G.FLAG_VOLTAGE_ON_PIN_RESPONSE)throw"InvalidResponseFlag";if(s.readUint32()!=n)throw"InvalidResponseUuid";const l=s.readUint8();w.verbose(`error_code=${l}`);let c=null;if(l===0)c=s.readUint32();else throw"Fail";return w.info(`pin_reading=${c}`),c})}setLanguage(e){Z5(e)}setDebugLevel(e){D0(e)}getConnectedPeersInfo(){w.debug("> Requesting connected peers info...");const e=this.#l(),n=[G.FLAG_CONNECTED_PEERS_INFO_REQUEST,...ne(e,4)];return this.interface.request(n,!0).then(r=>{let i=new Ct(r);if(w.info(`response.byteLength=${r.byteLength}`),i.readFlag()!==G.FLAG_CONNECTED_PEERS_INFO_RESPONSE)throw"InvalidResponseFlag";if(i.readUint32()!=e)throw"InvalidResponseUuid";const o=i.readUint8();w.verbose(`error_code=${o}`);let l=[];if(o===0){let c=i.readUint16();for(let f=0;f<c;f++){const h=i.readBytes(6).map(m=>m.toString(16).padStart(2,"0")).join(":"),p=i.readUint16()/(65535/512)-256;l.push({mac:h,rssi:p})}return w.info(`count=${c}, peers=
${l.map(f=>`mac:${f.mac},rssi:${f.rssi}`).join(`
`)}`),l}else throw"Fail"})}readEventHistory(){w.debug("> Requesting event history bytecode...");const e=this.#l(),n=[G.FLAG_EVENT_HISTORY_BC_REQUEST,...ne(e,4)];return this.interface.request(n,!0).then(r=>{let i=new Ct(r);if(w.info(`response.byteLength=${r.byteLength}`),i.readFlag()!==G.FLAG_EVENT_HISTORY_BC_RESPONSE)throw"InvalidResponseFlag";if(i.readUint32()!=e)throw"InvalidResponseUuid";const o=i.readUint8();if(w.info(`error_code=${o}`),o===0){const l=i.readUint16(),c=i.readBytes(l);w.info(`historic_events_bytecode_size=${l}`),w.verbose(`historic_events_bytecode=[${c}]`),this.interface.process(new DataView(new Uint8Array(c).buffer))}else throw"Fail"})}deviceSleep(){throw"WorkInProgress"}networkSleep(){throw"WorkInProgress"}saveState(){throw"WorkInProgress"}getControllerInfo(){w.debug("> Requesting controller info ...");const e=this.#l(),n=[DEVICE_FLAGS.FLAG_CONTROLLER_INFO_REQUEST,...ne(e,4)];return this.interface.request(n,!0).then(r=>{let i=new Ct(r);if(w.verbose("response=",r),i.readFlag()!==DEVICE_FLAGS.FLAG_CONTROLLER_INFO_RESPONSE)throw"InvalidResponseFlag";if(i.readUint32()!=e)throw"InvalidResponseUuid";const o=i.readUint8();w.verbose(`error_code=${o}`);let l=null,c=null;if(o===0)l=i.readUint16(),c=i.readUint16();else throw"Fail";return w.info(`pcb_code=${l}`),w.info(`product_code=${c}`),{pcb_code:l,product_code:c}})}}const qe=new n$("default");qe.assignOwnerSignature(localStorage.getItem("ownerSignature")||"a06cd5c4d5741b61fee69422f2590926");qe.assignOwnerKey(localStorage.getItem("ownerKey")||"bfd39c89ccc2869f240508e9a0609420");qe.setDebugLevel(3);localStorage.getItem("env")==="dev"&&qe.setDebugLevel(4);let r$=new URL(location.href),i$=new URLSearchParams(r$.search);i$.get("demo")&&setTimeout(()=>{qe.assignConnector("dummy"),qe.connect()},300);window.spectoda=qe;const s$=k.createContext(),VA=({children:t})=>{const[e,n]=k.useState("disconnected"),[r,i]=k.useState(!1),[s,o]=k.useState(!1),[l,c]=k.useState([]),[f,h]=k.useState([]),p=()=>{qe.getConnectedPeersInfo().then(q=>{c(q),h(H=>H.filter(pe=>q.find(Ue=>Ue.mac!==pe.mac))),console.log({peers:q})})};k.useEffect(()=>{qe.on("connected",q=>{e!=="connected"&&(n("connected"),console.log("connected device",q),p(),setTimeout(async()=>{qe.syncTngl(`
          catchEvent($INIT).setValue(100%).emitAs($brigh);
          catchEvent($toggl).emitAs($brigh);
          const top = genSmoothOut(genLastEventParam($top), 1s);
          const bot = genSmoothOut(genLastEventParam($bot), 1s);
          const brightess = genSmoothOut(genLastEventParam($brigh), 2s);
          addLayer(0s, Infinity, {
            siftSegments({ segment($PORTA); }, {
              addLayer(0s, Infinity, {
                addDrawing(0s, Infinity, animFill(Infinity, #ffffff));
              }).modifyBrightness(&top);
            });
            siftSegments({ segment($PORTB); }, {
              addLayer(0s, Infinity, {
                addDrawing(0s, Infinity, animFill(Infinity, #ffffff));
              }).modifyBrightness(&bot);
            });
          }).modifyBrightness(&brightess);
          
          `),window.localStorage.setItem("login_pass","true")},300))}),qe.on("disconnected",q=>{n("disconnected"),c(H=>(console.log(JSON.stringify(f),JSON.stringify(H)),h(pe=>{console.log("Settings macs...",JSON.stringify([pe,H]));const Ue="mac",ot=[...pe,...H];return[...new Map(ot.map(Ce=>[Ce[Ue],Ce])).values()]}),[]))}),qe.on("peer_connected",q=>{console.log("peer_connected",q),c(H=>[...H,{mac:q}]),h(H=>H.filter(pe=>pe.mac!==q))}),qe.on("peer_disconnected",q=>{console.log("peer_disconnected",q),c(H=>H.filter(pe=>pe.mac!==q)),h(H=>(H.find(pe=>pe.mac===q)||(H=[...H,{mac:q}]),console.log("peer___disconnected"),H))})},[]);const m=async function(){try{return o(!0),await qe.connect(null,!0,null,null,!0).catch(q=>{}).finally(()=>{o(!1)})}catch(q){console.error("Connection failed",q)}},y=async function(){try{o(!0),await qe.disconnect()}finally{o(!1)}},T=async(...q)=>{i(!0);let H;try{H=await qe.adopt(...q).catch(pe=>{})}finally{i(!1)}return H},C=q=>typeof q=="string"?!!l.find(H=>H.mac===q):!!l.find(H=>q.includes(H.mac));function A(q){console.log("macss",q);const H=q.map(pe=>({mac:pe}));return qe?.interface?.connector.type==="dummy"?(c(pe=>[...pe,...H]),!0):!1}const[v,E]=k.useState("unknown"),[I,x]=k.useState("unknown");k.useEffect(()=>{const q=qe.on("version",H=>{E(H)});return()=>q()},[]),k.useEffect(()=>{(async()=>{if(e==="connected")try{const q=await qe.getFwVersion();console.log("FW version:",q);const[H,pe,Ue]=q.split("_");E(pe),x(q)}catch{console.error("Failed to get FW version"),E("Failed to get FW version")}})()},[e]);const M="0.9.0",W=v!=="unknown"&&v!=="0.0.0",B=e==="connected",Q=W&&B&&!M;return D.jsx(s$.Provider,{value:{connectionStatus:e,connect:m,disconnect:y,adopt:T,isActiveMac:C,activateFakeDevice:A,isConnecting:s,connectedMacs:l,disconnectedMacs:f,version:v,fullVersion:I,versionAvailable:W,isLimitedMode:Q,isConnected:B},children:t})},o$=k.createContext(null),a$=typeof document<"u",GA=a$?k.useLayoutEffect:k.useEffect;function l$(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const u$=k.createContext({}),ou={delta:0,timestamp:0},HA=1/60*1e3,c$=typeof performance<"u"?()=>performance.now():()=>Date.now(),KA=typeof window<"u"?t=>window.requestAnimationFrame(t):t=>setTimeout(()=>t(c$()),HA);function f$(t){let e=[],n=[],r=0,i=!1,s=!1;const o=new WeakSet,l={schedule:(c,f=!1,h=!1)=>{const p=h&&i,m=p?e:n;return f&&o.add(c),m.indexOf(c)===-1&&(m.push(c),p&&i&&(r=e.length)),c},cancel:c=>{const f=n.indexOf(c);f!==-1&&n.splice(f,1),o.delete(c)},process:c=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let f=0;f<r;f++){const h=e[f];h(c),o.has(h)&&(l.schedule(h),t())}i=!1,s&&(s=!1,l.process(c))}};return l}const d$=40;let Zv=!0,Pu=!1,e_=!1;const sc=["read","update","preRender","render","postRender"],zh=sc.reduce((t,e)=>(t[e]=f$(()=>Pu=!0),t),{}),h$=sc.reduce((t,e)=>{const n=zh[e];return t[e]=(r,i=!1,s=!1)=>(Pu||g$(),n.schedule(r,i,s)),t},{});sc.reduce((t,e)=>(t[e]=zh[e].cancel,t),{});sc.reduce((t,e)=>(t[e]=()=>zh[e].process(ou),t),{});const p$=t=>zh[t].process(ou),qA=t=>{Pu=!1,ou.delta=Zv?HA:Math.max(Math.min(t-ou.timestamp,d$),1),ou.timestamp=t,e_=!0,sc.forEach(p$),e_=!1,Pu&&(Zv=!1,KA(qA))},g$=()=>{Pu=!0,Zv=!0,e_||KA(qA)};function YA(){const t=k.useRef(!1);return GA(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function m$(){const t=YA(),[e,n]=k.useState(0),r=k.useCallback(()=>{t.current&&n(e+1)},[e]);return[k.useCallback(()=>h$.postRender(r),[r]),e]}class v$ extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function _$({children:t,isPresent:e}){const n=k.useId(),r=k.useRef(null),i=k.useRef({width:0,height:0,top:0,left:0});return k.useInsertionEffect(()=>{const{width:s,height:o,top:l,left:c}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),k.createElement(v$,{isPresent:e,childRef:r,sizeRef:i},k.cloneElement(t,{ref:r}))}const vm=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const l=l$(y$),c=k.useId(),f=k.useMemo(()=>({id:c,initial:e,isPresent:n,custom:i,onExitComplete:h=>{l.set(h,!0);for(const p of l.values())if(!p)return;r&&r()},register:h=>(l.set(h,!1),()=>l.delete(h))}),s?void 0:[n]);return k.useMemo(()=>{l.forEach((h,p)=>l.set(p,!1))},[n]),k.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(t=k.createElement(_$,{isPresent:n},t)),k.createElement(o$.Provider,{value:f},t)};function y$(){return new Map}function w$(t){return k.useEffect(()=>()=>t(),[])}const Vo=t=>t.key||"";function E$(t,e){t.forEach(n=>{const r=Vo(n);e.set(r,n)})}function S$(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const b$=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{i&&(o="wait");let[l]=m$();const c=k.useContext(u$).forceRender;c&&(l=c);const f=YA(),h=S$(t);let p=h;const m=new Set,y=k.useRef(p),T=k.useRef(new Map).current,C=k.useRef(!0);if(GA(()=>{C.current=!1,E$(h,T),y.current=p}),w$(()=>{C.current=!0,T.clear(),m.clear()}),C.current)return k.createElement(k.Fragment,null,p.map(I=>k.createElement(vm,{key:Vo(I),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},I)));p=[...p];const A=y.current.map(Vo),v=h.map(Vo),E=A.length;for(let I=0;I<E;I++){const x=A[I];v.indexOf(x)===-1&&m.add(x)}return o==="wait"&&m.size&&(p=[]),m.forEach(I=>{if(v.indexOf(I)!==-1)return;const x=T.get(I);if(!x)return;const M=A.indexOf(I),W=()=>{T.delete(I),m.delete(I);const B=y.current.findIndex(Q=>Q.key===I);if(y.current.splice(B,1),!m.size){if(y.current=h,f.current===!1)return;l(),r&&r()}};p.splice(M,0,k.createElement(vm,{key:Vo(x),isPresent:!1,onExitComplete:W,custom:e,presenceAffectsLayout:s,mode:o},x))}),p=p.map(I=>{const x=I.key;return m.has(x)?I:k.createElement(vm,{key:Vo(I),isPresent:!0,presenceAffectsLayout:s,mode:o},I)}),k.createElement(k.Fragment,null,m.size?p:p.map(I=>k.cloneElement(I)))};function j0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=function(t,e){if(!t)throw Ga(e)},Ga=function(t){return new Error("Firebase Database ("+QA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},C$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},W0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,h=s>>2,p=(s&3)<<4|l>>4;let m=(l&15)<<2|f>>6,y=f&63;c||(y=64,o||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(JA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):C$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||f==null||p==null)throw Error();const m=s<<2|l>>4;if(r.push(m),f!==64){const y=l<<4&240|f>>2;if(r.push(y),p!==64){const T=f<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},XA=function(t){const e=JA(t);return W0.encodeByteArray(e,!0)},Bd=function(t){return XA(t).replace(/\./g,"")},jd=function(t){try{return W0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I$(t){return ZA(void 0,t)}function ZA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!T$(n)||(t[n]=ZA(t[n],e[n]));return t}function T$(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$=()=>A$().__FIREBASE_DEFAULTS__,k$=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},x$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jd(t[1]);return e&&JSON.parse(e)},z0=()=>{try{return R$()||k$()||x$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eR=t=>{var e,n;return(n=(e=z0())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},N$=t=>{const e=eR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},O$=()=>{var t;return(t=z0())===null||t===void 0?void 0:t.config},tR=t=>{var e;return(e=z0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P$(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[Bd(JSON.stringify(n)),Bd(JSON.stringify(o)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function D$(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function L$(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function rR(){return QA.NODE_ADMIN===!0}function F$(){try{return typeof indexedDB=="object"}catch{return!1}}function M$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$="FirebaseError";class Is extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=U$,Object.setPrototypeOf(this,Is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oc.prototype.create)}}class oc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$$(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Is(i,l,r)}}function $$(t,e){return t.replace(B$,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const B$=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(t){return JSON.parse(t)}function yt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Du(jd(s[0])||""),n=Du(jd(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},j$=function(t){const e=iR(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},W$=function(t){const e=iR(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ra(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function t_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wd(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function zd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Eb(s)&&Eb(o)){if(!zd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Eb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Gl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Hl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){const m=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4],f,h;for(let p=0;p<80;p++){p<40?p<20?(f=l^s&(o^l),h=1518500249):(f=s^o^l,h=1859775393):p<60?(f=s&o|l&(s|o),h=2400959708):(f=s^o^l,h=3395469782);const m=(i<<5|i>>>27)+f+c+h+r[p]&4294967295;c=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function V$(t,e){const n=new G$(t,e);return n.subscribe.bind(n)}class G${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");H$(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=_m),i.error===void 0&&(i.error=_m),i.complete===void 0&&(i.complete=_m);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _m(){}function sR(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,K(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Vh=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t){return t&&t._delegate?t._delegate:t}class oo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new V0;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Q$(e))try{this.getOrInitializeService({instanceIdentifier:js})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=js){return this.instances.has(e)}getOptions(e=js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Y$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=js){return this.component?this.component.multipleInstances?e:js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Y$(t){return t===js?void 0:t}function Q$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new q$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Be||(Be={}));const X$={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},Z$=Be.INFO,eB={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},tB=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=eB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class H0{constructor(e){this.name=e,this._logLevel=Z$,this._logHandler=tB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?X$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const nB=(t,e)=>e.some(n=>t instanceof n);let Sb,bb;function rB(){return Sb||(Sb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iB(){return bb||(bb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oR=new WeakMap,n_=new WeakMap,aR=new WeakMap,ym=new WeakMap,K0=new WeakMap;function sB(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ls(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&oR.set(n,t)}).catch(()=>{}),K0.set(e,t),e}function oB(t){if(n_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});n_.set(t,e)}let r_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return n_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||aR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ls(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aB(t){r_=t(r_)}function lB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wm(this),e,...n);return aR.set(r,e.sort?e.sort():[e]),ls(r)}:iB().includes(t)?function(...e){return t.apply(wm(this),e),ls(oR.get(this))}:function(...e){return ls(t.apply(wm(this),e))}}function uB(t){return typeof t=="function"?lB(t):(t instanceof IDBTransaction&&oB(t),nB(t,rB())?new Proxy(t,r_):t)}function ls(t){if(t instanceof IDBRequest)return sB(t);if(ym.has(t))return ym.get(t);const e=uB(t);return e!==t&&(ym.set(t,e),K0.set(e,t)),e}const wm=t=>K0.get(t);function cB(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=ls(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ls(o.result),c.oldVersion,c.newVersion,ls(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),l}const fB=["get","getKey","getAll","getAllKeys","count"],dB=["put","add","delete","clear"],Em=new Map;function Cb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Em.get(e))return Em.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=dB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fB.includes(n)))return;const s=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),i&&c.done]))[0]};return Em.set(e,s),s}aB(t=>({...t,get:(e,n,r)=>Cb(e,n)||t.get(e,n,r),has:(e,n)=>!!Cb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pB(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pB(t){const e=t.getComponent();return e?.type==="VERSION"}const i_="@firebase/app",Ib="0.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=new H0("@firebase/app"),gB="@firebase/app-compat",mB="@firebase/analytics-compat",vB="@firebase/analytics",_B="@firebase/app-check-compat",yB="@firebase/app-check",wB="@firebase/auth",EB="@firebase/auth-compat",SB="@firebase/database",bB="@firebase/database-compat",CB="@firebase/functions",IB="@firebase/functions-compat",TB="@firebase/installations",AB="@firebase/installations-compat",RB="@firebase/messaging",kB="@firebase/messaging-compat",xB="@firebase/performance",NB="@firebase/performance-compat",OB="@firebase/remote-config",PB="@firebase/remote-config-compat",DB="@firebase/storage",LB="@firebase/storage-compat",FB="@firebase/firestore",MB="@firebase/firestore-compat",UB="firebase",$B="9.17.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="[DEFAULT]",BB={[i_]:"fire-core",[gB]:"fire-core-compat",[vB]:"fire-analytics",[mB]:"fire-analytics-compat",[yB]:"fire-app-check",[_B]:"fire-app-check-compat",[wB]:"fire-auth",[EB]:"fire-auth-compat",[SB]:"fire-rtdb",[bB]:"fire-rtdb-compat",[CB]:"fire-fn",[IB]:"fire-fn-compat",[TB]:"fire-iid",[AB]:"fire-iid-compat",[RB]:"fire-fcm",[kB]:"fire-fcm-compat",[xB]:"fire-perf",[NB]:"fire-perf-compat",[OB]:"fire-rc",[PB]:"fire-rc-compat",[DB]:"fire-gcs",[LB]:"fire-gcs-compat",[FB]:"fire-fst",[MB]:"fire-fst-compat","fire-js":"fire-js",[UB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=new Map,o_=new Map;function jB(t,e){try{t.container.addComponent(e)}catch(n){ao.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ka(t){const e=t.name;if(o_.has(e))return ao.debug(`There were multiple attempts to register component ${e}.`),!1;o_.set(e,t);for(const n of Vd.values())jB(n,t);return!0}function q0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},us=new oc("app","Firebase",WB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=$B;function lR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:s_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw us.create("bad-app-name",{appName:String(i)});if(n||(n=O$()),!n)throw us.create("no-options");const s=Vd.get(i);if(s){if(zd(n,s.options)&&zd(r,s.config))return s;throw us.create("duplicate-app",{appName:i})}const o=new J$(i);for(const c of o_.values())o.addComponent(c);const l=new zB(n,r,o);return Vd.set(i,l),l}function uR(t=s_){const e=Vd.get(t);if(!e&&t===s_)return lR();if(!e)throw us.create("no-app",{appName:t});return e}function cs(t,e,n){var r;let i=(r=BB[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ao.warn(l.join(" "));return}ka(new oo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB="firebase-heartbeat-database",GB=1,Lu="firebase-heartbeat-store";let Sm=null;function cR(){return Sm||(Sm=cB(VB,GB,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Lu)}}}).catch(t=>{throw us.create("idb-open",{originalErrorMessage:t.message})})),Sm}async function HB(t){try{return(await cR()).transaction(Lu).objectStore(Lu).get(fR(t))}catch(e){if(e instanceof Is)ao.warn(e.message);else{const n=us.create("idb-get",{originalErrorMessage:e?.message});ao.warn(n.message)}}}async function Tb(t,e){try{const r=(await cR()).transaction(Lu,"readwrite");return await r.objectStore(Lu).put(e,fR(t)),r.done}catch(n){if(n instanceof Is)ao.warn(n.message);else{const r=us.create("idb-set",{originalErrorMessage:n?.message});ao.warn(r.message)}}}function fR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB=1024,qB=30*24*60*60*1e3;class YB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JB(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ab();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=qB}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ab(),{heartbeatsToSend:n,unsentEntries:r}=QB(this._heartbeatsCache.heartbeats),i=Bd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ab(){return new Date().toISOString().substring(0,10)}function QB(t,e=KB){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Rb(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Rb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return F$()?M$().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await HB(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Tb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Tb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Rb(t){return Bd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XB(t){ka(new oo("platform-logger",e=>new hB(e),"PRIVATE")),ka(new oo("heartbeat",e=>new YB(e),"PRIVATE")),cs(i_,Ib,t),cs(i_,Ib,"esm2017"),cs("fire-js","")}XB("");const kb="@firebase/database",xb="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dR="";function ZB(t){dR=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),yt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Du(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ei(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new e8(e)}}catch{}return new t8},Ks=hR("localStorage"),a_=hR("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new H0("@firebase/database"),n8=function(){let t=1;return function(){return t++}}(),pR=function(t){const e=K$(t),n=new z$;n.update(e);const r=n.digest();return W0.encodeByteArray(r)},lc=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=lc.apply(null,r):typeof r=="object"?e+=yt(r):e+=r,e+=" "}return e};let Zs=null,Nb=!0;const r8=function(t,e){K(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ga.logLevel=Be.VERBOSE,Zs=ga.log.bind(ga),e&&a_.set("logging_enabled",!0)):typeof t=="function"?Zs=t:(Zs=null,a_.remove("logging_enabled"))},zt=function(...t){if(Nb===!0&&(Nb=!1,Zs===null&&a_.get("logging_enabled")===!0&&r8(!0)),Zs){const e=lc.apply(null,t);Zs(e)}},uc=function(t){return function(...e){zt(t,...e)}},l_=function(...t){const e="FIREBASE INTERNAL ERROR: "+lc(...t);ga.error(e)},pi=function(...t){const e=`FIREBASE FATAL ERROR: ${lc(...t)}`;throw ga.error(e),new Error(e)},Nn=function(...t){const e="FIREBASE WARNING: "+lc(...t);ga.warn(e)},i8=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Nn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},gR=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},s8=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},xa="[MIN_NAME]",lo="[MAX_NAME]",Ka=function(t,e){if(t===e)return 0;if(t===xa||e===lo)return-1;if(e===xa||t===lo)return 1;{const n=Ob(t),r=Ob(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},o8=function(t,e){return t===e?0:t<e?-1:1},Nl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+yt(e))},Y0=function(t){if(typeof t!="object"||t===null)return yt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=yt(e[r]),n+=":",n+=Y0(t[e[r]]);return n+="}",n},mR=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function yn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const vR=function(t){K(!gR(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const f=[];for(c=n;c;c-=1)f.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)f.push(s%2?1:0),s=Math.floor(s/2);f.push(i?1:0),f.reverse();const h=f.join("");let p="";for(c=0;c<64;c+=8){let m=parseInt(h.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),p=p+m}return p.toLowerCase()},a8=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},l8=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function u8(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const c8=new RegExp("^-?(0*)\\d{1,10}$"),f8=-2147483648,d8=2147483647,Ob=function(t){if(c8.test(t)){const e=Number(t);if(e>=f8&&e<=d8)return e}return null},cc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Nn("Exception was thrown by user callback.",n),e},Math.floor(0))}},h8=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},au=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Nn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(zt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Nn(e)}}class ma{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ma.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="5",_R="v",yR="s",wR="r",ER="f",SR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bR="ls",CR="p",u_="ac",IR="websocket",TR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,r,i,s=!1,o="",l=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ks.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ks.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function m8(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function RR(t,e,n){K(typeof e=="string","typeof type must == string"),K(typeof n=="object","typeof params must == object");let r;if(e===IR)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===TR)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);m8(t)&&(n.ns=t.namespace);const i=[];return yn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(){this.counters_={}}incrementCounter(e,n=1){Ei(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return I$(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm={},Cm={};function J0(t){const e=t.toString();return bm[e]||(bm[e]=new v8),bm[e]}function _8(t,e){const n=t.toString();return Cm[n]||(Cm[n]=e()),Cm[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&cc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="start",w8="close",E8="pLPCommand",S8="pRTLPCB",kR="id",xR="pw",NR="ser",b8="cb",C8="seg",I8="ts",T8="d",A8="dframe",OR=1870,PR=30,R8=OR-PR,k8=25e3,x8=3e4;class ra{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=uc(e),this.stats_=J0(n),this.urlFn=c=>(this.appCheckToken&&(c[u_]=this.appCheckToken),RR(n,TR,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new y8(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(x8)),s8(()=>{if(this.isClosed_)return;this.scriptTagHolder=new X0((...s)=>{const[o,l,c,f,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Pb)this.id=l,this.password=c;else if(o===w8)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Pb]="t",r[NR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[b8]=this.scriptTagHolder.uniqueCallbackIdentifier),r[_R]=Q0,this.transportSessionId&&(r[yR]=this.transportSessionId),this.lastSessionId&&(r[bR]=this.lastSessionId),this.applicationId&&(r[CR]=this.applicationId),this.appCheckToken&&(r[u_]=this.appCheckToken),typeof location<"u"&&location.hostname&&SR.test(location.hostname)&&(r[wR]=ER);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ra.forceAllow_=!0}static forceDisallow(){ra.forceDisallow_=!0}static isAvailable(){return ra.forceAllow_?!0:!ra.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!a8()&&!l8()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=yt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=XA(n),i=mR(r,R8);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[A8]="t",r[kR]=e,r[xR]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=yt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class X0{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=n8(),window[E8+this.uniqueCallbackIdentifier]=e,window[S8+this.uniqueCallbackIdentifier]=n,this.myIFrame=X0.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){zt("frame writing exception"),l.stack&&zt(l.stack),zt(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||zt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[kR]=this.myID,e[xR]=this.myPW,e[NR]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+PR+r.length<=OR;){const o=this.pendingSegs.shift();r=r+"&"+C8+i+"="+o.seg+"&"+I8+i+"="+o.ts+"&"+T8+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(k8)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{zt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8=16384,O8=45e3;let Gd=null;typeof MozWebSocket<"u"?Gd=MozWebSocket:typeof WebSocket<"u"&&(Gd=WebSocket);class pr{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=uc(this.connId),this.stats_=J0(n),this.connURL=pr.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[_R]=Q0,typeof location<"u"&&location.hostname&&SR.test(location.hostname)&&(o[wR]=ER),n&&(o[yR]=n),r&&(o[bR]=r),i&&(o[u_]=i),s&&(o[CR]=s),RR(e,IR,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ks.set("previous_websocket_failure",!0);try{let r;rR(),this.mySock=new Gd(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){pr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Gd!==null&&!pr.forceDisallow_}static previouslyFailed(){return Ks.isInMemoryStorage||Ks.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ks.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Du(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(K(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=yt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=mR(n,N8);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(O8))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}pr.responsesRequiredToBeHealthy=2;pr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ra,pr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=pr&&pr.isAvailable();let r=n&&!pr.previouslyFailed();if(e.webSocketOnly&&(n||Nn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[pr];else{const i=this.transports_=[];for(const s of Fu.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Fu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Fu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8=6e4,D8=5e3,L8=10*1024,F8=100*1024,Im="t",Db="d",M8="s",Lb="r",U8="e",Fb="o",Mb="a",Ub="n",$b="p",$8="h";class B8{constructor(e,n,r,i,s,o,l,c,f,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=c,this.onKill_=f,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=uc("c:"+this.id+":"),this.transportManager_=new Fu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=au(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>F8?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>L8?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Im in e){const n=e[Im];n===Mb?this.upgradeIfSecondaryHealthy_():n===Lb?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Fb&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Nl("t",e),r=Nl("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:$b,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Mb,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Ub,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Nl("t",e),r=Nl("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Nl(Im,e);if(Db in e){const r=e[Db];if(n===$8){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Ub){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===M8?this.onConnectionShutdown_(r):n===Lb?this.onReset_(r):n===U8?l_("Server Error: "+r):n===Fb?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):l_("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Q0!==r&&Nn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),au(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(P8))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):au(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(D8))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:$b,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ks.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.allowedEvents_=e,this.listeners_={},K(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){K(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends LR{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!G0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Hd}getInitialEvent(e){return K(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=32,jb=768;class We{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function xe(){return new We("")}function Se(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function _s(t){return t.pieces_.length-t.pieceNum_}function Ve(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new We(t.pieces_,e)}function FR(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function j8(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function MR(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function UR(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new We(e,0)}function wt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof We)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new We(n,0)}function be(t){return t.pieceNum_>=t.pieces_.length}function en(t,e){const n=Se(t),r=Se(e);if(n===null)return e;if(n===r)return en(Ve(t),Ve(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Z0(t,e){if(_s(t)!==_s(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function gr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(_s(t)>_s(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class W8{constructor(e,n){this.errorPrefix_=n,this.parts_=MR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Vh(this.parts_[r]);$R(this)}}function z8(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Vh(e),$R(t)}function V8(t){const e=t.parts_.pop();t.byteLength_-=Vh(e),t.parts_.length>0&&(t.byteLength_-=1)}function $R(t){if(t.byteLength_>jb)throw new Error(t.errorPrefix_+"has a key path longer than "+jb+" bytes ("+t.byteLength_+").");if(t.parts_.length>Bb)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Bb+") or object contains a cycle "+Ws(t))}function Ws(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey extends LR{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new ey}getInitialEvent(e){return K(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=1e3,G8=60*5*1e3,Wb=30*1e3,H8=1.3,K8=3e4,q8="server_kill",zb=3;class ui extends DR{constructor(e,n,r,i,s,o,l,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=ui.nextPersistentConnectionId_++,this.log_=uc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ol,this.maxReconnectDelay_=G8,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!rR())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ey.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Hd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(yt(s)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new V0,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const c=l.d,f=l.s;ui.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),f!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(f,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ei(e,"w")){const r=Ra(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Nn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||W$(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Wb)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=j$(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+yt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):l_("Unrecognized action received from server: "+yt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ol,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ol,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>K8&&(this.reconnectDelay_=Ol),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*H8)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ui.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const c=function(){l?l.close():(o=!0,r())},f=function(p){K(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(p)};this.realtime_={close:c,sendRequest:f};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,m]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?zt("getToken() completed but was canceled"):(zt("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=m&&m.token,l=new B8(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{Nn(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(q8)},s))}catch(p){this.log_("Failed to get token: "+p),o||(this.repoInfo_.nodeAdmin&&Nn(p),c())}}}interrupt(e){zt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){zt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],t_(this.interruptReasons_)&&(this.reconnectDelay_=Ol,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Y0(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new We(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){zt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=zb&&(this.reconnectDelay_=Wb,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){zt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=zb&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+dR.replace(/\./g,"-")]=1,G0()?e["framework.cordova"]=1:nR()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Hd.getInstance().currentlyOnline();return t_(this.interruptReasons_)&&e}}ui.nextPersistentConnectionId_=0;ui.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ye(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ye(xa,e),i=new ye(xa,n);return this.compare(r,i)!==0}minPost(){return ye.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Of;class BR extends Gh{static get __EMPTY_NODE(){return Of}static set __EMPTY_NODE(e){Of=e}compare(e,n){return Ka(e.name,n.name)}isDefinedOn(e){throw Ga("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ye.MIN}maxPost(){return new ye(lo,Of)}makePost(e,n){return K(typeof e=="string","KeyIndex indexValue must always be a string."),new ye(e,Of)}toString(){return".key"}}const va=new BR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Rt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Rt.RED,this.left=i??gn.EMPTY_NODE,this.right=s??gn.EMPTY_NODE}copy(e,n,r,i,s){return new Rt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return gn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return gn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Rt.RED=!0;Rt.BLACK=!1;class Y8{copy(e,n,r,i,s){return this}insert(e,n,r){return new Rt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class gn{constructor(e,n=gn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new gn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rt.BLACK,null,null))}remove(e){return new gn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Pf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Pf(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Pf(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Pf(this.root_,null,this.comparator_,!0,e)}}gn.EMPTY_NODE=new Y8;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(t,e){return Ka(t.name,e.name)}function ty(t,e){return Ka(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c_;function J8(t){c_=t}const jR=function(t){return typeof t=="number"?"number:"+vR(t):"string:"+t},WR=function(t){if(t.isLeafNode()){const e=t.val();K(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ei(e,".sv"),"Priority must be a string or number.")}else K(t===c_||t.isEmpty(),"priority of unexpected type.");K(t===c_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vb;class Tt{constructor(e,n=Tt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),WR(this.priorityNode_)}static set __childrenNodeConstructor(e){Vb=e}static get __childrenNodeConstructor(){return Vb}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Tt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Tt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return be(e)?this:Se(e)===".priority"?this.priorityNode_:Tt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Tt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Se(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(K(r!==".priority"||_s(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Tt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ve(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+jR(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=vR(this.value_):e+=this.value_,this.lazyHash_=pR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Tt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Tt.__childrenNodeConstructor?-1:(K(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Tt.VALUE_TYPE_ORDER.indexOf(n),s=Tt.VALUE_TYPE_ORDER.indexOf(r);return K(i>=0,"Unknown leaf type: "+n),K(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Tt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zR,VR;function X8(t){zR=t}function Z8(t){VR=t}class ej extends Gh{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ka(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ye.MIN}maxPost(){return new ye(lo,new Tt("[PRIORITY-POST]",VR))}makePost(e,n){const r=zR(e);return new ye(n,new Tt("[PRIORITY-POST]",r))}toString(){return".priority"}}const ut=new ej;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=Math.log(2);class nj{constructor(e){const n=s=>parseInt(Math.log(s)/tj,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Kd=function(t,e,n,r){t.sort(e);const i=function(c,f){const h=f-c;let p,m;if(h===0)return null;if(h===1)return p=t[c],m=n?n(p):p,new Rt(m,p.node,Rt.BLACK,null,null);{const y=parseInt(h/2,10)+c,T=i(c,y),C=i(y+1,f);return p=t[y],m=n?n(p):p,new Rt(m,p.node,Rt.BLACK,T,C)}},s=function(c){let f=null,h=null,p=t.length;const m=function(T,C){const A=p-T,v=p;p-=T;const E=i(A+1,v),I=t[A],x=n?n(I):I;y(new Rt(x,I.node,C,null,E))},y=function(T){f?(f.left=T,f=T):(h=T,f=T)};for(let T=0;T<c.count;++T){const C=c.nextBitIsOne(),A=Math.pow(2,c.count-(T+1));C?m(A,Rt.BLACK):(m(A,Rt.BLACK),m(A,Rt.RED))}return h},o=new nj(t.length),l=s(o);return new gn(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tm;const $o={};class si{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return K($o&&ut,"ChildrenNode.ts has not been loaded"),Tm=Tm||new si({".priority":$o},{".priority":ut}),Tm}get(e){const n=Ra(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof gn?n:null}hasIndex(e){return Ei(this.indexSet_,e.toString())}addIndex(e,n){K(e!==va,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ye.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=Kd(r,e.getCompare()):l=$o;const c=e.toString(),f=Object.assign({},this.indexSet_);f[c]=e;const h=Object.assign({},this.indexes_);return h[c]=l,new si(h,f)}addToIndexes(e,n){const r=Wd(this.indexes_,(i,s)=>{const o=Ra(this.indexSet_,s);if(K(o,"Missing index implementation for "+s),i===$o)if(o.isDefinedOn(e.node)){const l=[],c=n.getIterator(ye.Wrap);let f=c.getNext();for(;f;)f.name!==e.name&&l.push(f),f=c.getNext();return l.push(e),Kd(l,o.getCompare())}else return $o;else{const l=n.get(e.name);let c=i;return l&&(c=c.remove(new ye(e.name,l))),c.insert(e,e.node)}});return new si(r,this.indexSet_)}removeFromIndexes(e,n){const r=Wd(this.indexes_,i=>{if(i===$o)return i;{const s=n.get(e.name);return s?i.remove(new ye(e.name,s)):i}});return new si(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pl;class ue{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&WR(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pl||(Pl=new ue(new gn(ty),null,si.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pl}updatePriority(e){return this.children_.isEmpty()?this:new ue(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Pl:n}}getChild(e){const n=Se(e);return n===null?this:this.getImmediateChild(n).getChild(Ve(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(K(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ye(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Pl:this.priorityNode_;return new ue(i,o,s)}}updateChild(e,n){const r=Se(e);if(r===null)return n;{K(Se(e)!==".priority"||_s(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Ve(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ut,(o,l)=>{n[o]=l.val(e),r++,s&&ue.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+jR(this.getPriority().val())+":"),this.forEachChild(ut,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":pR(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ye(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ye(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ye(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ye.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ye.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fc?-1:0}withIndex(e){if(e===va||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ue(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===va||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ut),i=n.getIterator(ut);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===va?null:this.indexMap_.get(e.toString())}}ue.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class rj extends ue{constructor(){super(new gn(ty),ue.EMPTY_NODE,si.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ue.EMPTY_NODE}isEmpty(){return!1}}const fc=new rj;Object.defineProperties(ye,{MIN:{value:new ye(xa,ue.EMPTY_NODE)},MAX:{value:new ye(lo,fc)}});BR.__EMPTY_NODE=ue.EMPTY_NODE;Tt.__childrenNodeConstructor=ue;J8(fc);Z8(fc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=!0;function Dt(t,e=null){if(t===null)return ue.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),K(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Tt(n,Dt(e))}if(!(t instanceof Array)&&ij){const n=[];let r=!1;if(yn(t,(o,l)=>{if(o.substring(0,1)!=="."){const c=Dt(l);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new ye(o,c)))}}),n.length===0)return ue.EMPTY_NODE;const s=Kd(n,Q8,o=>o.name,ty);if(r){const o=Kd(n,ut.getCompare());return new ue(s,Dt(e),new si({".priority":o},{".priority":ut}))}else return new ue(s,Dt(e),si.Default)}else{let n=ue.EMPTY_NODE;return yn(t,(r,i)=>{if(Ei(t,r)&&r.substring(0,1)!=="."){const s=Dt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Dt(e))}}X8(Dt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj extends Gh{constructor(e){super(),this.indexPath_=e,K(!be(e)&&Se(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ka(e.name,n.name):s}makePost(e,n){const r=Dt(e),i=ue.EMPTY_NODE.updateChild(this.indexPath_,r);return new ye(n,i)}maxPost(){const e=ue.EMPTY_NODE.updateChild(this.indexPath_,fc);return new ye(lo,e)}toString(){return MR(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj extends Gh{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ka(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ye.MIN}maxPost(){return ye.MAX}makePost(e,n){const r=Dt(e);return new ye(n,r)}toString(){return".value"}}const aj=new oj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t){return{type:"value",snapshotNode:t}}function Na(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Mu(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Uu(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function lj(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){K(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Mu(n,l)):K(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Na(n,r)):o.trackChildChange(Uu(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ut,(i,s)=>{n.hasChild(i)||r.trackChildChange(Mu(i,s))}),n.isLeafNode()||n.forEachChild(ut,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Uu(i,s,o))}else r.trackChildChange(Na(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ue.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this.indexedFilter_=new ny(e.getIndex()),this.index_=e.getIndex(),this.startPost_=$u.getStartPost_(e),this.endPost_=$u.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ye(n,r))||(r=ue.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ue.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(ue.EMPTY_NODE);const s=this;return n.forEachChild(ut,(o,l)=>{s.matches(new ye(o,l))||(i=i.updateImmediateChild(o,ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new $u(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ye(n,r))||(r=ue.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=ue.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=ue.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(ue.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const p=this.index_.getCompare();o=(m,y)=>p(y,m)}else o=this.index_.getCompare();const l=e;K(l.numChildren()===this.limit_,"");const c=new ye(n,r),f=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(l.hasChild(n)){const p=l.getImmediateChild(n);let m=i.getChildAfterChild(this.index_,f,this.reverse_);for(;m!=null&&(m.name===n||l.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);const y=m==null?1:o(m,c);if(h&&!r.isEmpty()&&y>=0)return s?.trackChildChange(Uu(n,r,p)),l.updateImmediateChild(n,r);{s?.trackChildChange(Mu(n,p));const C=l.updateImmediateChild(n,ue.EMPTY_NODE);return m!=null&&this.rangedFilter_.matches(m)?(s?.trackChildChange(Na(m.name,m.node)),C.updateImmediateChild(m.name,m.node)):C}}else return r.isEmpty()?e:h&&o(f,c)>=0?(s!=null&&(s.trackChildChange(Mu(f.name,f.node)),s.trackChildChange(Na(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(f.name,ue.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ut}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xa}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ut}copy(){const e=new ry;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function cj(t){return t.loadsAllData()?new ny(t.getIndex()):t.hasLimit()?new uj(t):new $u(t)}function Gb(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ut?n="$priority":t.index_===aj?n="$value":t.index_===va?n="$key":(K(t.index_ instanceof sj,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=yt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=yt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+yt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=yt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+yt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Hb(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ut&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd extends DR{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=uc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=qd.getListenId_(e,r),l={};this.listens_[o]=l;const c=Gb(e._queryParams);this.restRequest_(s+".json",c,(f,h)=>{let p=h;if(f===404&&(p=null,f=null),f===null&&this.onDataUpdate_(s,p,!1,r),Ra(this.listens_,o)===l){let m;f?f===401?m="permission_denied":m="rest_error:"+f:m="ok",i(m,null)}})}unlisten(e,n){const r=qd.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Gb(e._queryParams),r=e._path.toString(),i=new V0;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ha(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=Du(l.responseText)}catch{Nn("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,c)}else l.status!==401&&l.status!==404&&Nn("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.rootNode_=ue.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(){return{value:null,children:new Map}}function HR(t,e,n){if(be(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Se(e);t.children.has(r)||t.children.set(r,Yd());const i=t.children.get(r);e=Ve(e),HR(i,e,n)}}function f_(t,e,n){t.value!==null?n(e,t.value):dj(t,(r,i)=>{const s=new We(e.toString()+"/"+r);f_(i,s,n)})}function dj(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&yn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=10*1e3,pj=30*1e3,gj=5*60*1e3;class mj{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new hj(e);const r=Kb+(pj-Kb)*Math.random();au(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;yn(e,(i,s)=>{s>0&&Ei(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),au(this.reportStats_.bind(this),Math.floor(Math.random()*2*gj))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(mr||(mr={}));function KR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function iy(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function sy(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=mr.ACK_USER_WRITE,this.source=KR()}operationForChild(e){if(be(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new We(e));return new Qd(xe(),n,this.revert)}}else return K(Se(this.path)===e,"operationForChild called for unrelated child."),new Qd(Ve(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n){this.source=e,this.path=n,this.type=mr.LISTEN_COMPLETE}operationForChild(e){return be(this.path)?new Bu(this.source,xe()):new Bu(this.source,Ve(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=mr.OVERWRITE}operationForChild(e){return be(this.path)?new uo(this.source,xe(),this.snap.getImmediateChild(e)):new uo(this.source,Ve(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=mr.MERGE}operationForChild(e){if(be(this.path)){const n=this.children.subtree(new We(e));return n.isEmpty()?null:n.value?new uo(this.source,xe(),n.value):new ju(this.source,xe(),n)}else return K(Se(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ju(this.source,Ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(be(e))return this.isFullyInitialized()&&!this.filtered_;const n=Se(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function _j(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(lj(o.childName,o.snapshotNode))}),Dl(t,i,"child_removed",e,r,n),Dl(t,i,"child_added",e,r,n),Dl(t,i,"child_moved",s,r,n),Dl(t,i,"child_changed",e,r,n),Dl(t,i,"value",e,r,n),i}function Dl(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,c)=>wj(t,l,c)),o.forEach(l=>{const c=yj(t,l,s);i.forEach(f=>{f.respondsTo(l.type)&&e.push(f.createEvent(c,t.query_))})})}function yj(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function wj(t,e,n){if(e.childName==null||n.childName==null)throw Ga("Should only compare child_ events.");const r=new ye(e.childName,e.snapshotNode),i=new ye(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(t,e){return{eventCache:t,serverCache:e}}function lu(t,e,n,r){return Hh(new ys(e,n,r),t.serverCache)}function qR(t,e,n,r){return Hh(t.eventCache,new ys(e,n,r))}function Jd(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function co(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Am;const Ej=()=>(Am||(Am=new gn(o8)),Am);class Ye{constructor(e,n=Ej()){this.value=e,this.children=n}static fromObject(e){let n=new Ye(null);return yn(e,(r,i)=>{n=n.set(new We(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:xe(),value:this.value};if(be(e))return null;{const r=Se(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Ve(e),n);return s!=null?{path:wt(new We(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(be(e))return this;{const n=Se(e),r=this.children.get(n);return r!==null?r.subtree(Ve(e)):new Ye(null)}}set(e,n){if(be(e))return new Ye(n,this.children);{const r=Se(e),s=(this.children.get(r)||new Ye(null)).set(Ve(e),n),o=this.children.insert(r,s);return new Ye(this.value,o)}}remove(e){if(be(e))return this.children.isEmpty()?new Ye(null):new Ye(null,this.children);{const n=Se(e),r=this.children.get(n);if(r){const i=r.remove(Ve(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Ye(null):new Ye(this.value,s)}else return this}}get(e){if(be(e))return this.value;{const n=Se(e),r=this.children.get(n);return r?r.get(Ve(e)):null}}setTree(e,n){if(be(e))return n;{const r=Se(e),s=(this.children.get(r)||new Ye(null)).setTree(Ve(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Ye(this.value,o)}}fold(e){return this.fold_(xe(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(wt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,xe(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(be(e))return null;{const s=Se(e),o=this.children.get(s);return o?o.findOnPath_(Ve(e),wt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,xe(),n)}foreachOnPath_(e,n,r){if(be(e))return this;{this.value&&r(n,this.value);const i=Se(e),s=this.children.get(i);return s?s.foreachOnPath_(Ve(e),wt(n,i),r):new Ye(null)}}foreach(e){this.foreach_(xe(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(wt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.writeTree_=e}static empty(){return new yr(new Ye(null))}}function uu(t,e,n){if(be(e))return new yr(new Ye(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=en(i,e);return s=s.updateChild(o,n),new yr(t.writeTree_.set(i,s))}else{const i=new Ye(n),s=t.writeTree_.setTree(e,i);return new yr(s)}}}function qb(t,e,n){let r=t;return yn(n,(i,s)=>{r=uu(r,wt(e,i),s)}),r}function Yb(t,e){if(be(e))return yr.empty();{const n=t.writeTree_.setTree(e,new Ye(null));return new yr(n)}}function d_(t,e){return yo(t,e)!=null}function yo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(en(n.path,e)):null}function Qb(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ut,(r,i)=>{e.push(new ye(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ye(r,i.value))}),e}function fs(t,e){if(be(e))return t;{const n=yo(t,e);return n!=null?new yr(new Ye(n)):new yr(t.writeTree_.subtree(e))}}function h_(t){return t.writeTree_.isEmpty()}function Oa(t,e){return YR(xe(),t.writeTree_,e)}function YR(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(K(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=YR(wt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(wt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t,e){return ZR(e,t)}function Sj(t,e,n,r,i){K(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=uu(t.visibleWrites,e,n)),t.lastWriteId=r}function bj(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Cj(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);K(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&Ij(l,r.path)?i=!1:gr(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return Tj(t),!0;if(r.snap)t.visibleWrites=Yb(t.visibleWrites,r.path);else{const l=r.children;yn(l,c=>{t.visibleWrites=Yb(t.visibleWrites,wt(r.path,c))})}return!0}else return!1}function Ij(t,e){if(t.snap)return gr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&gr(wt(t.path,n),e))return!0;return!1}function Tj(t){t.visibleWrites=QR(t.allWrites,Aj,xe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Aj(t){return t.visible}function QR(t,e,n){let r=yr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)gr(n,o)?(l=en(n,o),r=uu(r,l,s.snap)):gr(o,n)&&(l=en(o,n),r=uu(r,xe(),s.snap.getChild(l)));else if(s.children){if(gr(n,o))l=en(n,o),r=qb(r,l,s.children);else if(gr(o,n))if(l=en(o,n),be(l))r=qb(r,xe(),s.children);else{const c=Ra(s.children,Se(l));if(c){const f=c.getChild(Ve(l));r=uu(r,xe(),f)}}}else throw Ga("WriteRecord should have .snap or .children")}}return r}function JR(t,e,n,r,i){if(!r&&!i){const s=yo(t.visibleWrites,e);if(s!=null)return s;{const o=fs(t.visibleWrites,e);if(h_(o))return n;if(n==null&&!d_(o,xe()))return null;{const l=n||ue.EMPTY_NODE;return Oa(o,l)}}}else{const s=fs(t.visibleWrites,e);if(!i&&h_(s))return n;if(!i&&n==null&&!d_(s,xe()))return null;{const o=function(f){return(f.visible||i)&&(!r||!~r.indexOf(f.writeId))&&(gr(f.path,e)||gr(e,f.path))},l=QR(t.allWrites,o,e),c=n||ue.EMPTY_NODE;return Oa(l,c)}}}function Rj(t,e,n){let r=ue.EMPTY_NODE;const i=yo(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ut,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=fs(t.visibleWrites,e);return n.forEachChild(ut,(o,l)=>{const c=Oa(fs(s,new We(o)),l);r=r.updateImmediateChild(o,c)}),Qb(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=fs(t.visibleWrites,e);return Qb(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function kj(t,e,n,r,i){K(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=wt(e,n);if(d_(t.visibleWrites,s))return null;{const o=fs(t.visibleWrites,s);return h_(o)?i.getChild(n):Oa(o,i.getChild(n))}}function xj(t,e,n,r){const i=wt(e,n),s=yo(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=fs(t.visibleWrites,i);return Oa(o,r.getNode().getImmediateChild(n))}else return null}function Nj(t,e){return yo(t.visibleWrites,e)}function Oj(t,e,n,r,i,s,o){let l;const c=fs(t.visibleWrites,e),f=yo(c,xe());if(f!=null)l=f;else if(n!=null)l=Oa(c,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const h=[],p=o.getCompare(),m=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let y=m.getNext();for(;y&&h.length<i;)p(y,r)!==0&&h.push(y),y=m.getNext();return h}else return[]}function Pj(){return{visibleWrites:yr.empty(),allWrites:[],lastWriteId:-1}}function Xd(t,e,n,r){return JR(t.writeTree,t.treePath,e,n,r)}function oy(t,e){return Rj(t.writeTree,t.treePath,e)}function Jb(t,e,n,r){return kj(t.writeTree,t.treePath,e,n,r)}function Zd(t,e){return Nj(t.writeTree,wt(t.treePath,e))}function Dj(t,e,n,r,i,s){return Oj(t.writeTree,t.treePath,e,n,r,i,s)}function ay(t,e,n){return xj(t.writeTree,t.treePath,e,n)}function XR(t,e){return ZR(wt(t.treePath,e),t.writeTree)}function ZR(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;K(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),K(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Uu(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Mu(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Na(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Uu(r,e.snapshotNode,i.oldSnap));else throw Ga("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const ek=new Fj;class ly{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new ys(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ay(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:co(this.viewCache_),s=Dj(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t){return{filter:t}}function Uj(t,e){K(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),K(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function $j(t,e,n,r,i){const s=new Lj;let o,l;if(n.type===mr.OVERWRITE){const f=n;f.source.fromUser?o=p_(t,e,f.path,f.snap,r,i,s):(K(f.source.fromServer,"Unknown source."),l=f.source.tagged||e.serverCache.isFiltered()&&!be(f.path),o=eh(t,e,f.path,f.snap,r,i,l,s))}else if(n.type===mr.MERGE){const f=n;f.source.fromUser?o=jj(t,e,f.path,f.children,r,i,s):(K(f.source.fromServer,"Unknown source."),l=f.source.tagged||e.serverCache.isFiltered(),o=g_(t,e,f.path,f.children,r,i,l,s))}else if(n.type===mr.ACK_USER_WRITE){const f=n;f.revert?o=Vj(t,e,f.path,r,i,s):o=Wj(t,e,f.path,f.affectedTree,r,i,s)}else if(n.type===mr.LISTEN_COMPLETE)o=zj(t,e,n.path,r,s);else throw Ga("Unknown operation type: "+n.type);const c=s.getChanges();return Bj(e,o,c),{viewCache:o,changes:c}}function Bj(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Jd(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(GR(Jd(e)))}}function tk(t,e,n,r,i,s){const o=e.eventCache;if(Zd(r,n)!=null)return e;{let l,c;if(be(n))if(K(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=co(e),h=f instanceof ue?f:ue.EMPTY_NODE,p=oy(r,h);l=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{const f=Xd(r,co(e));l=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{const f=Se(n);if(f===".priority"){K(_s(n)===1,"Can't have a priority with additional path components");const h=o.getNode();c=e.serverCache.getNode();const p=Jb(r,n,h,c);p!=null?l=t.filter.updatePriority(h,p):l=o.getNode()}else{const h=Ve(n);let p;if(o.isCompleteForChild(f)){c=e.serverCache.getNode();const m=Jb(r,n,o.getNode(),c);m!=null?p=o.getNode().getImmediateChild(f).updateChild(h,m):p=o.getNode().getImmediateChild(f)}else p=ay(r,f,e.serverCache);p!=null?l=t.filter.updateChild(o.getNode(),f,p,h,i,s):l=o.getNode()}}return lu(e,l,o.isFullyInitialized()||be(n),t.filter.filtersNodes())}}function eh(t,e,n,r,i,s,o,l){const c=e.serverCache;let f;const h=o?t.filter:t.filter.getIndexedFilter();if(be(n))f=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){const y=c.getNode().updateChild(n,r);f=h.updateFullNode(c.getNode(),y,null)}else{const y=Se(n);if(!c.isCompleteForPath(n)&&_s(n)>1)return e;const T=Ve(n),A=c.getNode().getImmediateChild(y).updateChild(T,r);y===".priority"?f=h.updatePriority(c.getNode(),A):f=h.updateChild(c.getNode(),y,A,T,ek,null)}const p=qR(e,f,c.isFullyInitialized()||be(n),h.filtersNodes()),m=new ly(i,p,s);return tk(t,p,n,i,m,l)}function p_(t,e,n,r,i,s,o){const l=e.eventCache;let c,f;const h=new ly(i,e,s);if(be(n))f=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=lu(e,f,!0,t.filter.filtersNodes());else{const p=Se(n);if(p===".priority")f=t.filter.updatePriority(e.eventCache.getNode(),r),c=lu(e,f,l.isFullyInitialized(),l.isFiltered());else{const m=Ve(n),y=l.getNode().getImmediateChild(p);let T;if(be(m))T=r;else{const C=h.getCompleteChild(p);C!=null?FR(m)===".priority"&&C.getChild(UR(m)).isEmpty()?T=C:T=C.updateChild(m,r):T=ue.EMPTY_NODE}if(y.equals(T))c=e;else{const C=t.filter.updateChild(l.getNode(),p,T,m,h,o);c=lu(e,C,l.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Xb(t,e){return t.eventCache.isCompleteForChild(e)}function jj(t,e,n,r,i,s,o){let l=e;return r.foreach((c,f)=>{const h=wt(n,c);Xb(e,Se(h))&&(l=p_(t,l,h,f,i,s,o))}),r.foreach((c,f)=>{const h=wt(n,c);Xb(e,Se(h))||(l=p_(t,l,h,f,i,s,o))}),l}function Zb(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function g_(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,f;be(n)?f=r:f=new Ye(null).setTree(n,r);const h=e.serverCache.getNode();return f.children.inorderTraversal((p,m)=>{if(h.hasChild(p)){const y=e.serverCache.getNode().getImmediateChild(p),T=Zb(t,y,m);c=eh(t,c,new We(p),T,i,s,o,l)}}),f.children.inorderTraversal((p,m)=>{const y=!e.serverCache.isCompleteForChild(p)&&m.value===null;if(!h.hasChild(p)&&!y){const T=e.serverCache.getNode().getImmediateChild(p),C=Zb(t,T,m);c=eh(t,c,new We(p),C,i,s,o,l)}}),c}function Wj(t,e,n,r,i,s,o){if(Zd(i,n)!=null)return e;const l=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(be(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return eh(t,e,n,c.getNode().getChild(n),i,s,l,o);if(be(n)){let f=new Ye(null);return c.getNode().forEachChild(va,(h,p)=>{f=f.set(new We(h),p)}),g_(t,e,n,f,i,s,l,o)}else return e}else{let f=new Ye(null);return r.foreach((h,p)=>{const m=wt(n,h);c.isCompleteForPath(m)&&(f=f.set(h,c.getNode().getChild(m)))}),g_(t,e,n,f,i,s,l,o)}}function zj(t,e,n,r,i){const s=e.serverCache,o=qR(e,s.getNode(),s.isFullyInitialized()||be(n),s.isFiltered());return tk(t,o,n,r,ek,i)}function Vj(t,e,n,r,i,s){let o;if(Zd(r,n)!=null)return e;{const l=new ly(r,e,i),c=e.eventCache.getNode();let f;if(be(n)||Se(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Xd(r,co(e));else{const p=e.serverCache.getNode();K(p instanceof ue,"serverChildren would be complete if leaf node"),h=oy(r,p)}h=h,f=t.filter.updateFullNode(c,h,s)}else{const h=Se(n);let p=ay(r,h,e.serverCache);p==null&&e.serverCache.isCompleteForChild(h)&&(p=c.getImmediateChild(h)),p!=null?f=t.filter.updateChild(c,h,p,Ve(n),l,s):e.eventCache.getNode().hasChild(h)?f=t.filter.updateChild(c,h,ue.EMPTY_NODE,Ve(n),l,s):f=c,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Xd(r,co(e)),o.isLeafNode()&&(f=t.filter.updateFullNode(f,o,s)))}return o=e.serverCache.isFullyInitialized()||Zd(r,xe())!=null,lu(e,f,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new ny(r.getIndex()),s=cj(r);this.processor_=Mj(s);const o=n.serverCache,l=n.eventCache,c=i.updateFullNode(ue.EMPTY_NODE,o.getNode(),null),f=s.updateFullNode(ue.EMPTY_NODE,l.getNode(),null),h=new ys(c,o.isFullyInitialized(),i.filtersNodes()),p=new ys(f,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=Hh(p,h),this.eventGenerator_=new vj(this.query_)}get query(){return this.query_}}function Hj(t){return t.viewCache_.serverCache.getNode()}function Kj(t){return Jd(t.viewCache_)}function qj(t,e){const n=co(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!be(e)&&!n.getImmediateChild(Se(e)).isEmpty())?n.getChild(e):null}function eC(t){return t.eventRegistrations_.length===0}function Yj(t,e){t.eventRegistrations_.push(e)}function tC(t,e,n){const r=[];if(n){K(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function nC(t,e,n,r){e.type===mr.MERGE&&e.source.queryId!==null&&(K(co(t.viewCache_),"We should always have a full cache before handling merges"),K(Jd(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=$j(t.processor_,i,e,n,r);return Uj(t.processor_,s.viewCache),K(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,nk(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Qj(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ut,(s,o)=>{r.push(Na(s,o))}),n.isFullyInitialized()&&r.push(GR(n.getNode())),nk(t,r,n.getNode(),e)}function nk(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return _j(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th;class rk{constructor(){this.views=new Map}}function Jj(t){K(!th,"__referenceConstructor has already been defined"),th=t}function Xj(){return K(th,"Reference.ts has not been loaded"),th}function Zj(t){return t.views.size===0}function uy(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return K(s!=null,"SyncTree gave us an op for an invalid query."),nC(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(nC(o,e,n,r));return s}}function ik(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=Xd(n,i?r:null),c=!1;l?c=!0:r instanceof ue?(l=oy(n,r),c=!1):(l=ue.EMPTY_NODE,c=!1);const f=Hh(new ys(l,c,!1),new ys(r,i,!1));return new Gj(e,f)}return o}function e9(t,e,n,r,i,s){const o=ik(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Yj(o,n),Qj(o,n)}function t9(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=ws(t);if(i==="default")for(const[c,f]of t.views.entries())o=o.concat(tC(f,n,r)),eC(f)&&(t.views.delete(c),f.query._queryParams.loadsAllData()||s.push(f.query));else{const c=t.views.get(i);c&&(o=o.concat(tC(c,n,r)),eC(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return l&&!ws(t)&&s.push(new(Xj())(e._repo,e._path)),{removed:s,events:o}}function sk(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ds(t,e){let n=null;for(const r of t.views.values())n=n||qj(r,e);return n}function ok(t,e){if(e._queryParams.loadsAllData())return qh(t);{const r=e._queryIdentifier;return t.views.get(r)}}function ak(t,e){return ok(t,e)!=null}function ws(t){return qh(t)!=null}function qh(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nh;function n9(t){K(!nh,"__referenceConstructor has already been defined"),nh=t}function r9(){return K(nh,"Reference.ts has not been loaded"),nh}let i9=1;class rC{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ye(null),this.pendingWriteTree_=Pj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function s9(t,e,n,r,i){return Sj(t.pendingWriteTree_,e,n,r,i),i?hc(t,new uo(KR(),e,n)):[]}function ia(t,e,n=!1){const r=bj(t.pendingWriteTree_,e);if(Cj(t.pendingWriteTree_,e)){let s=new Ye(null);return r.snap!=null?s=s.set(xe(),!0):yn(r.children,o=>{s=s.set(new We(o),!0)}),hc(t,new Qd(r.path,s,n))}else return[]}function dc(t,e,n){return hc(t,new uo(iy(),e,n))}function o9(t,e,n){const r=Ye.fromObject(n);return hc(t,new ju(iy(),e,r))}function a9(t,e){return hc(t,new Bu(iy(),e))}function l9(t,e,n){const r=cy(t,n);if(r){const i=fy(r),s=i.path,o=i.queryId,l=en(s,e),c=new Bu(sy(o),l);return dy(t,s,c)}else return[]}function rh(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||ak(o,e))){const c=t9(o,e,n,r);Zj(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const f=c.removed;if(l=c.events,!i){const h=f.findIndex(m=>m._queryParams.loadsAllData())!==-1,p=t.syncPointTree_.findOnPath(s,(m,y)=>ws(y));if(h&&!p){const m=t.syncPointTree_.subtree(s);if(!m.isEmpty()){const y=f9(m);for(let T=0;T<y.length;++T){const C=y[T],A=C.query,v=dk(t,C);t.listenProvider_.startListening(cu(A),Wu(t,A),v.hashFn,v.onComplete)}}}!p&&f.length>0&&!r&&(h?t.listenProvider_.stopListening(cu(e),null):f.forEach(m=>{const y=t.queryToTagMap.get(Yh(m));t.listenProvider_.stopListening(cu(m),y)}))}d9(t,f)}return l}function lk(t,e,n,r){const i=cy(t,r);if(i!=null){const s=fy(i),o=s.path,l=s.queryId,c=en(o,e),f=new uo(sy(l),c,n);return dy(t,o,f)}else return[]}function u9(t,e,n,r){const i=cy(t,r);if(i){const s=fy(i),o=s.path,l=s.queryId,c=en(o,e),f=Ye.fromObject(n),h=new ju(sy(l),c,f);return dy(t,o,h)}else return[]}function m_(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(m,y)=>{const T=en(m,i);s=s||ds(y,T),o=o||ws(y)});let l=t.syncPointTree_.get(i);l?(o=o||ws(l),s=s||ds(l,xe())):(l=new rk,t.syncPointTree_=t.syncPointTree_.set(i,l));let c;s!=null?c=!0:(c=!1,s=ue.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,T)=>{const C=ds(T,xe());C&&(s=s.updateImmediateChild(y,C))}));const f=ak(l,e);if(!f&&!e._queryParams.loadsAllData()){const m=Yh(e);K(!t.queryToTagMap.has(m),"View does not exist, but we have a tag");const y=h9();t.queryToTagMap.set(m,y),t.tagToQueryMap.set(y,m)}const h=Kh(t.pendingWriteTree_,i);let p=e9(l,e,n,h,s,c);if(!f&&!o&&!r){const m=ok(l,e);p=p.concat(p9(t,e,m))}return p}function uk(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const c=en(o,e),f=ds(l,c);if(f)return f});return JR(i,e,s,n,!0)}function c9(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(f,h)=>{const p=en(f,n);r=r||ds(h,p)});let i=t.syncPointTree_.get(n);i?r=r||ds(i,xe()):(i=new rk,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new ys(r,!0,!1):null,l=Kh(t.pendingWriteTree_,e._path),c=ik(i,e,l,s?o.getNode():ue.EMPTY_NODE,s);return Kj(c)}function hc(t,e){return ck(e,t.syncPointTree_,null,Kh(t.pendingWriteTree_,xe()))}function ck(t,e,n,r){if(be(t.path))return fk(t,e,n,r);{const i=e.get(xe());n==null&&i!=null&&(n=ds(i,xe()));let s=[];const o=Se(t.path),l=t.operationForChild(o),c=e.children.get(o);if(c&&l){const f=n?n.getImmediateChild(o):null,h=XR(r,o);s=s.concat(ck(l,c,f,h))}return i&&(s=s.concat(uy(i,t,r,n))),s}}function fk(t,e,n,r){const i=e.get(xe());n==null&&i!=null&&(n=ds(i,xe()));let s=[];return e.children.inorderTraversal((o,l)=>{const c=n?n.getImmediateChild(o):null,f=XR(r,o),h=t.operationForChild(o);h&&(s=s.concat(fk(h,l,c,f)))}),i&&(s=s.concat(uy(i,t,r,n))),s}function dk(t,e){const n=e.query,r=Wu(t,n);return{hashFn:()=>(Hj(e)||ue.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?l9(t,n._path,r):a9(t,n._path);{const s=u8(i,n);return rh(t,n,null,s)}}}}function Wu(t,e){const n=Yh(e);return t.queryToTagMap.get(n)}function Yh(t){return t._path.toString()+"$"+t._queryIdentifier}function cy(t,e){return t.tagToQueryMap.get(e)}function fy(t){const e=t.indexOf("$");return K(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new We(t.substr(0,e))}}function dy(t,e,n){const r=t.syncPointTree_.get(e);K(r,"Missing sync point for query tag that we're tracking");const i=Kh(t.pendingWriteTree_,e);return uy(r,n,i,null)}function f9(t){return t.fold((e,n,r)=>{if(n&&ws(n))return[qh(n)];{let i=[];return n&&(i=sk(n)),yn(r,(s,o)=>{i=i.concat(o)}),i}})}function cu(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(r9())(t._repo,t._path):t}function d9(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Yh(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function h9(){return i9++}function p9(t,e,n){const r=e._path,i=Wu(t,e),s=dk(t,n),o=t.listenProvider_.startListening(cu(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)K(!ws(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((f,h,p)=>{if(!be(f)&&h&&ws(h))return[qh(h).query];{let m=[];return h&&(m=m.concat(sk(h).map(y=>y.query))),yn(p,(y,T)=>{m=m.concat(T)}),m}});for(let f=0;f<c.length;++f){const h=c[f];t.listenProvider_.stopListening(cu(h),Wu(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new hy(n)}node(){return this.node_}}class py{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=wt(this.path_,e);return new py(this.syncTree_,n)}node(){return uk(this.syncTree_,this.path_)}}const g9=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},iC=function(t,e,n){if(!t||typeof t!="object")return t;if(K(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return m9(t[".sv"],e,n);if(typeof t[".sv"]=="object")return v9(t[".sv"],e);K(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},m9=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:K(!1,"Unexpected server value: "+t)}},v9=function(t,e,n){t.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&K(!1,"Unexpected increment value: "+r);const i=e.node();if(K(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},_9=function(t,e,n,r){return gy(e,new py(n,t),r)},y9=function(t,e,n){return gy(t,new hy(e),n)};function gy(t,e,n){const r=t.getPriority().val(),i=iC(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=iC(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new Tt(l,Dt(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Tt(i))),o.forEachChild(ut,(l,c)=>{const f=gy(c,e.getImmediateChild(l),n);f!==c&&(s=s.updateImmediateChild(l,f))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function vy(t,e){let n=e instanceof We?e:new We(e),r=t,i=Se(n);for(;i!==null;){const s=Ra(r.node.children,i)||{children:{},childCount:0};r=new my(i,r,s),n=Ve(n),i=Se(n)}return r}function qa(t){return t.node.value}function hk(t,e){t.node.value=e,v_(t)}function pk(t){return t.node.childCount>0}function w9(t){return qa(t)===void 0&&!pk(t)}function Qh(t,e){yn(t.node.children,(n,r)=>{e(new my(n,t,r))})}function gk(t,e,n,r){n&&!r&&e(t),Qh(t,i=>{gk(i,e,!0,r)}),n&&r&&e(t)}function E9(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function pc(t){return new We(t.parent===null?t.name:pc(t.parent)+"/"+t.name)}function v_(t){t.parent!==null&&S9(t.parent,t.name,t)}function S9(t,e,n){const r=w9(n),i=Ei(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,v_(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,v_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=/[\[\].#$\/\u0000-\u001F\u007F]/,C9=/[\[\].#$\u0000-\u001F\u007F]/,Rm=10*1024*1024,mk=function(t){return typeof t=="string"&&t.length!==0&&!b9.test(t)},vk=function(t){return typeof t=="string"&&t.length!==0&&!C9.test(t)},I9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),vk(t)},_k=function(t,e,n){const r=n instanceof We?new W8(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ws(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ws(r)+" with contents = "+e.toString());if(gR(e))throw new Error(t+"contains "+e.toString()+" "+Ws(r));if(typeof e=="string"&&e.length>Rm/3&&Vh(e)>Rm)throw new Error(t+"contains a string greater than "+Rm+" utf8 bytes "+Ws(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(yn(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!mk(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ws(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);z8(r,o),_k(t,l,r),V8(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ws(r)+" in addition to actual children.")}},yk=function(t,e,n,r){if(!(r&&n===void 0)&&!vk(n))throw new Error(sR(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},T9=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),yk(t,e,n,r)},A9=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!mk(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!I9(n))throw new Error(sR(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wk(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Z0(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ek(t,e,n){wk(t,n),Sk(t,r=>Z0(r,e))}function Ts(t,e,n){wk(t,n),Sk(t,r=>gr(r,e)||gr(e,r))}function Sk(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(k9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function k9(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Zs&&zt("event: "+n.toString()),cc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9="repo_interrupt",N9=25;class O9{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new R9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Yd(),this.transactionQueueTree_=new my,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function P9(t,e,n){if(t.stats_=J0(t.repoInfo_),t.forceRestClient_||h8())t.server_=new qd(t.repoInfo_,(r,i,s,o)=>{sC(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>oC(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{yt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ui(t.repoInfo_,e,(r,i,s,o)=>{sC(t,r,i,s,o)},r=>{oC(t,r)},r=>{L9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=_8(t.repoInfo_,()=>new mj(t.stats_,t.server_)),t.infoData_=new fj,t.infoSyncTree_=new rC({startListening:(r,i,s,o)=>{let l=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(l=dc(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),_y(t,"connected",!1),t.serverSyncTree_=new rC({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,c)=>{const f=o(l,c);Ts(t.eventQueue_,r._path,f)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function D9(t){const n=t.infoData_.getNode(new We(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function bk(t){return g9({timestamp:D9(t)})}function sC(t,e,n,r,i){t.dataUpdateCount++;const s=new We(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const c=Wd(n,f=>Dt(f));o=u9(t.serverSyncTree_,s,c,i)}else{const c=Dt(n);o=lk(t.serverSyncTree_,s,c,i)}else if(r){const c=Wd(n,f=>Dt(f));o=o9(t.serverSyncTree_,s,c)}else{const c=Dt(n);o=dc(t.serverSyncTree_,s,c)}let l=s;o.length>0&&(l=Ey(t,s)),Ts(t.eventQueue_,l,o)}function oC(t,e){_y(t,"connected",e),e===!1&&U9(t)}function L9(t,e){yn(e,(n,r)=>{_y(t,n,r)})}function _y(t,e,n){const r=new We("/.info/"+e),i=Dt(n);t.infoData_.updateSnapshot(r,i);const s=dc(t.infoSyncTree_,r,i);Ts(t.eventQueue_,r,s)}function F9(t){return t.nextWriteId_++}function M9(t,e,n){const r=c9(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Dt(i).withIndex(e._queryParams.getIndex());m_(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=dc(t.serverSyncTree_,e._path,s);else{const l=Wu(t.serverSyncTree_,e);o=lk(t.serverSyncTree_,e._path,s,l)}return Ts(t.eventQueue_,e._path,o),rh(t.serverSyncTree_,e,n,null,!0),s},i=>(yy(t,"get for query "+yt(e)+" failed: "+i),Promise.reject(new Error(i))))}function U9(t){yy(t,"onDisconnectEvents");const e=bk(t),n=Yd();f_(t.onDisconnect_,xe(),(i,s)=>{const o=_9(i,s,t.serverSyncTree_,e);HR(n,i,o)});let r=[];f_(n,xe(),(i,s)=>{r=r.concat(dc(t.serverSyncTree_,i,s));const o=z9(t,i);Ey(t,o)}),t.onDisconnect_=Yd(),Ts(t.eventQueue_,xe(),r)}function $9(t,e,n){let r;Se(e._path)===".info"?r=m_(t.infoSyncTree_,e,n):r=m_(t.serverSyncTree_,e,n),Ek(t.eventQueue_,e._path,r)}function aC(t,e,n){let r;Se(e._path)===".info"?r=rh(t.infoSyncTree_,e,n):r=rh(t.serverSyncTree_,e,n),Ek(t.eventQueue_,e._path,r)}function B9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(x9)}function yy(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),zt(n,...e)}function Ck(t,e,n){return uk(t.serverSyncTree_,e,n)||ue.EMPTY_NODE}function wy(t,e=t.transactionQueueTree_){if(e||Jh(t,e),qa(e)){const n=Tk(t,e);K(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&j9(t,pc(e),n)}else pk(e)&&Qh(e,n=>{wy(t,n)})}function j9(t,e,n){const r=n.map(f=>f.currentWriteId),i=Ck(t,e,r);let s=i;const o=i.hash();for(let f=0;f<n.length;f++){const h=n[f];K(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const p=en(e,h.path);s=s.updateChild(p,h.currentOutputSnapshotRaw)}const l=s.val(!0),c=e;t.server_.put(c.toString(),l,f=>{yy(t,"transaction put response",{path:c.toString(),status:f});let h=[];if(f==="ok"){const p=[];for(let m=0;m<n.length;m++)n[m].status=2,h=h.concat(ia(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&p.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();Jh(t,vy(t.transactionQueueTree_,e)),wy(t,t.transactionQueueTree_),Ts(t.eventQueue_,e,h);for(let m=0;m<p.length;m++)cc(p[m])}else{if(f==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{Nn("transaction at "+c.toString()+" failed: "+f);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=f}Ey(t,e)}},o)}function Ey(t,e){const n=Ik(t,e),r=pc(n),i=Tk(t,n);return W9(t,i,r),r}function W9(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const c=e[l],f=en(n,c.path);let h=!1,p;if(K(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)h=!0,p=c.abortReason,i=i.concat(ia(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=N9)h=!0,p="maxretry",i=i.concat(ia(t.serverSyncTree_,c.currentWriteId,!0));else{const m=Ck(t,c.path,o);c.currentInputSnapshot=m;const y=e[l].update(m.val());if(y!==void 0){_k("transaction failed: Data returned ",y,c.path);let T=Dt(y);typeof y=="object"&&y!=null&&Ei(y,".priority")||(T=T.updatePriority(m.getPriority()));const A=c.currentWriteId,v=bk(t),E=y9(T,m,v);c.currentOutputSnapshotRaw=T,c.currentOutputSnapshotResolved=E,c.currentWriteId=F9(t),o.splice(o.indexOf(A),1),i=i.concat(s9(t.serverSyncTree_,c.path,E,c.currentWriteId,c.applyLocally)),i=i.concat(ia(t.serverSyncTree_,A,!0))}else h=!0,p="nodata",i=i.concat(ia(t.serverSyncTree_,c.currentWriteId,!0))}Ts(t.eventQueue_,n,i),i=[],h&&(e[l].status=2,function(m){setTimeout(m,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(p==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(p),!1,null))))}Jh(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)cc(r[l]);wy(t,t.transactionQueueTree_)}function Ik(t,e){let n,r=t.transactionQueueTree_;for(n=Se(e);n!==null&&qa(r)===void 0;)r=vy(r,n),e=Ve(e),n=Se(e);return r}function Tk(t,e){const n=[];return Ak(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Ak(t,e,n){const r=qa(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Qh(e,i=>{Ak(t,i,n)})}function Jh(t,e){const n=qa(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,hk(e,n.length>0?n:void 0)}Qh(e,r=>{Jh(t,r)})}function z9(t,e){const n=pc(Ik(t,e)),r=vy(t.transactionQueueTree_,e);return E9(r,i=>{km(t,i)}),km(t,r),gk(r,i=>{km(t,i)}),n}function km(t,e){const n=qa(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(K(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(K(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ia(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?hk(e,void 0):n.length=s+1,Ts(t.eventQueue_,pc(e),i);for(let o=0;o<r.length;o++)cc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V9(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function G9(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Nn(`Invalid query segment '${n}' in query '${t}'`)}return e}const lC=function(t,e){const n=H9(t),r=n.namespace;n.domain==="firebase.com"&&pi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&pi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||i8();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new AR(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new We(n.pathString)}},H9=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",c=443;if(typeof t=="string"){let f=t.indexOf("//");f>=0&&(l=t.substring(0,f-1),t=t.substring(f+2));let h=t.indexOf("/");h===-1&&(h=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(h,p)),h<p&&(i=V9(t.substring(h,p)));const m=G9(t.substring(Math.min(t.length,p)));f=e.indexOf(":"),f>=0?(o=l==="https"||l==="wss",c=parseInt(e.substring(f+1),10)):f=e.length;const y=e.slice(0,f);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const T=e.indexOf(".");r=e.substring(0,T).toLowerCase(),n=e.substring(T+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+yt(this.snapshot.exportVal())}}class kk{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return be(this._path)?null:FR(this._path)}get ref(){return new Br(this._repo,this._path)}get _queryIdentifier(){const e=Hb(this._queryParams),n=Y0(e);return n==="{}"?"default":n}get _queryObject(){return Hb(this._queryParams)}isEqual(e){if(e=Zn(e),!(e instanceof Sy))return!1;const n=this._repo===e._repo,r=Z0(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+j8(this._path)}}class Br extends Sy{constructor(e,n){super(e,n,new ry,!1)}get parent(){const e=UR(this._path);return e===null?null:new Br(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Pa{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new We(e),r=sh(this.ref,e);return new Pa(this._node.getChild(n),r,ut)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Pa(i,sh(this.ref,r),ut)))}hasChild(e){const n=new We(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ih(t,e){return t=Zn(t),t._checkNotDeleted("ref"),e!==void 0?sh(t._root,e):t._root}function sh(t,e){return t=Zn(t),Se(t._path)===null?T9("child","path",e,!1):yk("child","path",e,!1),new Br(t._repo,wt(t._path,e))}function K9(t){t=Zn(t);const e=new xk(()=>{}),n=new Xh(e);return M9(t._repo,t,n).then(r=>new Pa(r,new Br(t._repo,t._path),t._queryParams.getIndex()))}class Xh{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Rk("value",this,new Pa(e.snapshotNode,new Br(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new kk(this,e,n):null}matches(e){return e instanceof Xh?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class by{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new kk(this,e,n):null}createEvent(e,n){K(e.childName!=null,"Child events should have a childName.");const r=sh(new Br(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Rk(e.type,this,new Pa(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof by?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function q9(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const c=n,f=(h,p)=>{aC(t._repo,t,l),c(h,p)};f.userCallback=n.userCallback,f.context=n.context,n=f}const o=new xk(n,s||void 0),l=e==="value"?new Xh(o):new by(e,o);return $9(t._repo,t,l),()=>aC(t._repo,t,l)}function Y9(t,e,n,r){return q9(t,"value",e,n,r)}Jj(Br);n9(Br);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9="FIREBASE_DATABASE_EMULATOR_HOST",__={};let J9=!1;function X9(t,e,n,r){t.repoInfo_=new AR(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Z9(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||pi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=lC(s,i),l=o.repoInfo,c,f;typeof process<"u"&&process.env&&(f=process.env[Q9]),f?(c=!0,s=`http://${f}?ns=${l.namespace}`,o=lC(s,i),l=o.repoInfo):c=!o.repoInfo.secure;const h=i&&c?new ma(ma.OWNER):new g8(t.name,t.options,e);A9("Invalid Firebase Database URL",o),be(o.path)||pi("Database URL must point to the root of a Firebase Database (not including a child path).");const p=tW(l,t,h,new p8(t.name,n));return new nW(p,t)}function eW(t,e){const n=__[e];(!n||n[t.key]!==t)&&pi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),B9(t),delete n[t.key]}function tW(t,e,n,r){let i=__[e.name];i||(i={},__[e.name]=i);let s=i[t.toURLString()];return s&&pi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new O9(t,J9,n,r),i[t.toURLString()]=s,s}class nW{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(P9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Br(this._repo,xe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(eW(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&pi("Cannot call "+e+" on a deleted database.")}}function Nk(t=uR(),e){const n=q0(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=N$("database");r&&rW(n,...r)}return n}function rW(t,e,n,r={}){t=Zn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&pi("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ma(ma.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:P$(r.mockUserToken,t.app.options.projectId);s=new ma(o)}X9(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iW(t){ZB(ac),ka(new oo("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Z9(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),cs(kb,xb,t),cs(kb,xb,"esm2017")}ui.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ui.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};iW();var zu={},sW={get exports(){return zu},set exports(t){zu=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",f=500,h="__lodash_placeholder__",p=1,m=2,y=4,T=1,C=2,A=1,v=2,E=4,I=8,x=16,M=32,W=64,B=128,Q=256,q=512,H=30,pe="...",Ue=800,ot=16,we=1,Ce=2,xt=3,Je=1/0,Y=9007199254740991,ee=17976931348623157e292,re=0/0,se=4294967295,De=se-1,jr=se>>>1,Ht=[["ary",B],["bind",A],["bindKey",v],["curry",I],["curryRight",x],["flip",q],["partial",M],["partialRight",W],["rearg",Q]],Kt="[object Arguments]",Mt="[object Array]",Wr="[object AsyncFunction]",zr="[object Boolean]",Fn="[object Date]",Ja="[object DOMException]",As="[object Error]",Rs="[object Function]",Xy="[object GeneratorFunction]",er="[object Map]",Xa="[object Number]",aN="[object Null]",Vr="[object Object]",Zy="[object Promise]",lN="[object Proxy]",Za="[object RegExp]",tr="[object Set]",el="[object String]",Ec="[object Symbol]",uN="[object Undefined]",tl="[object WeakMap]",cN="[object WeakSet]",nl="[object ArrayBuffer]",Eo="[object DataView]",hp="[object Float32Array]",pp="[object Float64Array]",gp="[object Int8Array]",mp="[object Int16Array]",vp="[object Int32Array]",_p="[object Uint8Array]",yp="[object Uint8ClampedArray]",wp="[object Uint16Array]",Ep="[object Uint32Array]",fN=/\b__p \+= '';/g,dN=/\b(__p \+=) '' \+/g,hN=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ew=/&(?:amp|lt|gt|quot|#39);/g,tw=/[&<>"']/g,pN=RegExp(ew.source),gN=RegExp(tw.source),mN=/<%-([\s\S]+?)%>/g,vN=/<%([\s\S]+?)%>/g,nw=/<%=([\s\S]+?)%>/g,_N=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yN=/^\w*$/,wN=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sp=/[\\^$.*+?()[\]{}|]/g,EN=RegExp(Sp.source),bp=/^\s+/,SN=/\s/,bN=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,CN=/\{\n\/\* \[wrapped with (.+)\] \*/,IN=/,? & /,TN=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,AN=/[()=,{}\[\]\/\s]/,RN=/\\(\\)?/g,kN=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rw=/\w*$/,xN=/^[-+]0x[0-9a-f]+$/i,NN=/^0b[01]+$/i,ON=/^\[object .+?Constructor\]$/,PN=/^0o[0-7]+$/i,DN=/^(?:0|[1-9]\d*)$/,LN=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Sc=/($^)/,FN=/['\n\r\u2028\u2029\\]/g,bc="\\ud800-\\udfff",MN="\\u0300-\\u036f",UN="\\ufe20-\\ufe2f",$N="\\u20d0-\\u20ff",iw=MN+UN+$N,sw="\\u2700-\\u27bf",ow="a-z\\xdf-\\xf6\\xf8-\\xff",BN="\\xac\\xb1\\xd7\\xf7",jN="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",WN="\\u2000-\\u206f",zN=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",aw="A-Z\\xc0-\\xd6\\xd8-\\xde",lw="\\ufe0e\\ufe0f",uw=BN+jN+WN+zN,Cp="['’]",VN="["+bc+"]",cw="["+uw+"]",Cc="["+iw+"]",fw="\\d+",GN="["+sw+"]",dw="["+ow+"]",hw="[^"+bc+uw+fw+sw+ow+aw+"]",Ip="\\ud83c[\\udffb-\\udfff]",HN="(?:"+Cc+"|"+Ip+")",pw="[^"+bc+"]",Tp="(?:\\ud83c[\\udde6-\\uddff]){2}",Ap="[\\ud800-\\udbff][\\udc00-\\udfff]",So="["+aw+"]",gw="\\u200d",mw="(?:"+dw+"|"+hw+")",KN="(?:"+So+"|"+hw+")",vw="(?:"+Cp+"(?:d|ll|m|re|s|t|ve))?",_w="(?:"+Cp+"(?:D|LL|M|RE|S|T|VE))?",yw=HN+"?",ww="["+lw+"]?",qN="(?:"+gw+"(?:"+[pw,Tp,Ap].join("|")+")"+ww+yw+")*",YN="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",QN="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ew=ww+yw+qN,JN="(?:"+[GN,Tp,Ap].join("|")+")"+Ew,XN="(?:"+[pw+Cc+"?",Cc,Tp,Ap,VN].join("|")+")",ZN=RegExp(Cp,"g"),eO=RegExp(Cc,"g"),Rp=RegExp(Ip+"(?="+Ip+")|"+XN+Ew,"g"),tO=RegExp([So+"?"+dw+"+"+vw+"(?="+[cw,So,"$"].join("|")+")",KN+"+"+_w+"(?="+[cw,So+mw,"$"].join("|")+")",So+"?"+mw+"+"+vw,So+"+"+_w,QN,YN,fw,JN].join("|"),"g"),nO=RegExp("["+gw+bc+iw+lw+"]"),rO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,iO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],sO=-1,He={};He[hp]=He[pp]=He[gp]=He[mp]=He[vp]=He[_p]=He[yp]=He[wp]=He[Ep]=!0,He[Kt]=He[Mt]=He[nl]=He[zr]=He[Eo]=He[Fn]=He[As]=He[Rs]=He[er]=He[Xa]=He[Vr]=He[Za]=He[tr]=He[el]=He[tl]=!1;var ze={};ze[Kt]=ze[Mt]=ze[nl]=ze[Eo]=ze[zr]=ze[Fn]=ze[hp]=ze[pp]=ze[gp]=ze[mp]=ze[vp]=ze[er]=ze[Xa]=ze[Vr]=ze[Za]=ze[tr]=ze[el]=ze[Ec]=ze[_p]=ze[yp]=ze[wp]=ze[Ep]=!0,ze[As]=ze[Rs]=ze[tl]=!1;var oO={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},aO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},lO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},uO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},cO=parseFloat,fO=parseInt,Sw=typeof _l=="object"&&_l&&_l.Object===Object&&_l,dO=typeof self=="object"&&self&&self.Object===Object&&self,Nt=Sw||dO||Function("return this")(),kp=e&&!e.nodeType&&e,ks=kp&&!0&&t&&!t.nodeType&&t,bw=ks&&ks.exports===kp,xp=bw&&Sw.process,Mn=function(){try{var O=ks&&ks.require&&ks.require("util").types;return O||xp&&xp.binding&&xp.binding("util")}catch{}}(),Cw=Mn&&Mn.isArrayBuffer,Iw=Mn&&Mn.isDate,Tw=Mn&&Mn.isMap,Aw=Mn&&Mn.isRegExp,Rw=Mn&&Mn.isSet,kw=Mn&&Mn.isTypedArray;function wn(O,F,L){switch(L.length){case 0:return O.call(F);case 1:return O.call(F,L[0]);case 2:return O.call(F,L[0],L[1]);case 3:return O.call(F,L[0],L[1],L[2])}return O.apply(F,L)}function hO(O,F,L,X){for(var de=-1,Ne=O==null?0:O.length;++de<Ne;){var gt=O[de];F(X,gt,L(gt),O)}return X}function Un(O,F){for(var L=-1,X=O==null?0:O.length;++L<X&&F(O[L],L,O)!==!1;);return O}function pO(O,F){for(var L=O==null?0:O.length;L--&&F(O[L],L,O)!==!1;);return O}function xw(O,F){for(var L=-1,X=O==null?0:O.length;++L<X;)if(!F(O[L],L,O))return!1;return!0}function Si(O,F){for(var L=-1,X=O==null?0:O.length,de=0,Ne=[];++L<X;){var gt=O[L];F(gt,L,O)&&(Ne[de++]=gt)}return Ne}function Ic(O,F){var L=O==null?0:O.length;return!!L&&bo(O,F,0)>-1}function Np(O,F,L){for(var X=-1,de=O==null?0:O.length;++X<de;)if(L(F,O[X]))return!0;return!1}function Xe(O,F){for(var L=-1,X=O==null?0:O.length,de=Array(X);++L<X;)de[L]=F(O[L],L,O);return de}function bi(O,F){for(var L=-1,X=F.length,de=O.length;++L<X;)O[de+L]=F[L];return O}function Op(O,F,L,X){var de=-1,Ne=O==null?0:O.length;for(X&&Ne&&(L=O[++de]);++de<Ne;)L=F(L,O[de],de,O);return L}function gO(O,F,L,X){var de=O==null?0:O.length;for(X&&de&&(L=O[--de]);de--;)L=F(L,O[de],de,O);return L}function Pp(O,F){for(var L=-1,X=O==null?0:O.length;++L<X;)if(F(O[L],L,O))return!0;return!1}var mO=Dp("length");function vO(O){return O.split("")}function _O(O){return O.match(TN)||[]}function Nw(O,F,L){var X;return L(O,function(de,Ne,gt){if(F(de,Ne,gt))return X=Ne,!1}),X}function Tc(O,F,L,X){for(var de=O.length,Ne=L+(X?1:-1);X?Ne--:++Ne<de;)if(F(O[Ne],Ne,O))return Ne;return-1}function bo(O,F,L){return F===F?xO(O,F,L):Tc(O,Ow,L)}function yO(O,F,L,X){for(var de=L-1,Ne=O.length;++de<Ne;)if(X(O[de],F))return de;return-1}function Ow(O){return O!==O}function Pw(O,F){var L=O==null?0:O.length;return L?Fp(O,F)/L:re}function Dp(O){return function(F){return F==null?n:F[O]}}function Lp(O){return function(F){return O==null?n:O[F]}}function Dw(O,F,L,X,de){return de(O,function(Ne,gt,$e){L=X?(X=!1,Ne):F(L,Ne,gt,$e)}),L}function wO(O,F){var L=O.length;for(O.sort(F);L--;)O[L]=O[L].value;return O}function Fp(O,F){for(var L,X=-1,de=O.length;++X<de;){var Ne=F(O[X]);Ne!==n&&(L=L===n?Ne:L+Ne)}return L}function Mp(O,F){for(var L=-1,X=Array(O);++L<O;)X[L]=F(L);return X}function EO(O,F){return Xe(F,function(L){return[L,O[L]]})}function Lw(O){return O&&O.slice(0,$w(O)+1).replace(bp,"")}function En(O){return function(F){return O(F)}}function Up(O,F){return Xe(F,function(L){return O[L]})}function rl(O,F){return O.has(F)}function Fw(O,F){for(var L=-1,X=O.length;++L<X&&bo(F,O[L],0)>-1;);return L}function Mw(O,F){for(var L=O.length;L--&&bo(F,O[L],0)>-1;);return L}function SO(O,F){for(var L=O.length,X=0;L--;)O[L]===F&&++X;return X}var bO=Lp(oO),CO=Lp(aO);function IO(O){return"\\"+uO[O]}function TO(O,F){return O==null?n:O[F]}function Co(O){return nO.test(O)}function AO(O){return rO.test(O)}function RO(O){for(var F,L=[];!(F=O.next()).done;)L.push(F.value);return L}function $p(O){var F=-1,L=Array(O.size);return O.forEach(function(X,de){L[++F]=[de,X]}),L}function Uw(O,F){return function(L){return O(F(L))}}function Ci(O,F){for(var L=-1,X=O.length,de=0,Ne=[];++L<X;){var gt=O[L];(gt===F||gt===h)&&(O[L]=h,Ne[de++]=L)}return Ne}function Ac(O){var F=-1,L=Array(O.size);return O.forEach(function(X){L[++F]=X}),L}function kO(O){var F=-1,L=Array(O.size);return O.forEach(function(X){L[++F]=[X,X]}),L}function xO(O,F,L){for(var X=L-1,de=O.length;++X<de;)if(O[X]===F)return X;return-1}function NO(O,F,L){for(var X=L+1;X--;)if(O[X]===F)return X;return X}function Io(O){return Co(O)?PO(O):mO(O)}function nr(O){return Co(O)?DO(O):vO(O)}function $w(O){for(var F=O.length;F--&&SN.test(O.charAt(F)););return F}var OO=Lp(lO);function PO(O){for(var F=Rp.lastIndex=0;Rp.test(O);)++F;return F}function DO(O){return O.match(Rp)||[]}function LO(O){return O.match(tO)||[]}var FO=function O(F){F=F==null?Nt:To.defaults(Nt.Object(),F,To.pick(Nt,iO));var L=F.Array,X=F.Date,de=F.Error,Ne=F.Function,gt=F.Math,$e=F.Object,Bp=F.RegExp,MO=F.String,$n=F.TypeError,Rc=L.prototype,UO=Ne.prototype,Ao=$e.prototype,kc=F["__core-js_shared__"],xc=UO.toString,Le=Ao.hasOwnProperty,$O=0,Bw=function(){var a=/[^.]+$/.exec(kc&&kc.keys&&kc.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Nc=Ao.toString,BO=xc.call($e),jO=Nt._,WO=Bp("^"+xc.call(Le).replace(Sp,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oc=bw?F.Buffer:n,Ii=F.Symbol,Pc=F.Uint8Array,jw=Oc?Oc.allocUnsafe:n,Dc=Uw($e.getPrototypeOf,$e),Ww=$e.create,zw=Ao.propertyIsEnumerable,Lc=Rc.splice,Vw=Ii?Ii.isConcatSpreadable:n,il=Ii?Ii.iterator:n,xs=Ii?Ii.toStringTag:n,Fc=function(){try{var a=Ls($e,"defineProperty");return a({},"",{}),a}catch{}}(),zO=F.clearTimeout!==Nt.clearTimeout&&F.clearTimeout,VO=X&&X.now!==Nt.Date.now&&X.now,GO=F.setTimeout!==Nt.setTimeout&&F.setTimeout,Mc=gt.ceil,Uc=gt.floor,jp=$e.getOwnPropertySymbols,HO=Oc?Oc.isBuffer:n,Gw=F.isFinite,KO=Rc.join,qO=Uw($e.keys,$e),mt=gt.max,Ut=gt.min,YO=X.now,QO=F.parseInt,Hw=gt.random,JO=Rc.reverse,Wp=Ls(F,"DataView"),sl=Ls(F,"Map"),zp=Ls(F,"Promise"),Ro=Ls(F,"Set"),ol=Ls(F,"WeakMap"),al=Ls($e,"create"),$c=ol&&new ol,ko={},XO=Fs(Wp),ZO=Fs(sl),eP=Fs(zp),tP=Fs(Ro),nP=Fs(ol),Bc=Ii?Ii.prototype:n,ll=Bc?Bc.valueOf:n,Kw=Bc?Bc.toString:n;function S(a){if(at(a)&&!he(a)&&!(a instanceof Ie)){if(a instanceof Bn)return a;if(Le.call(a,"__wrapped__"))return qE(a)}return new Bn(a)}var xo=function(){function a(){}return function(u){if(!tt(u))return{};if(Ww)return Ww(u);a.prototype=u;var d=new a;return a.prototype=n,d}}();function jc(){}function Bn(a,u){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=n}S.templateSettings={escape:mN,evaluate:vN,interpolate:nw,variable:"",imports:{_:S}},S.prototype=jc.prototype,S.prototype.constructor=S,Bn.prototype=xo(jc.prototype),Bn.prototype.constructor=Bn;function Ie(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function rP(){var a=new Ie(this.__wrapped__);return a.__actions__=on(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=on(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=on(this.__views__),a}function iP(){if(this.__filtered__){var a=new Ie(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function sP(){var a=this.__wrapped__.value(),u=this.__dir__,d=he(a),g=u<0,_=d?a.length:0,b=vD(0,_,this.__views__),R=b.start,N=b.end,P=N-R,U=g?N:R-1,$=this.__iteratees__,j=$.length,J=0,te=Ut(P,this.__takeCount__);if(!d||!g&&_==P&&te==P)return vE(a,this.__actions__);var ae=[];e:for(;P--&&J<te;){U+=u;for(var me=-1,le=a[U];++me<j;){var Ee=$[me],Ae=Ee.iteratee,Cn=Ee.type,Qt=Ae(le);if(Cn==Ce)le=Qt;else if(!Qt){if(Cn==we)continue e;break e}}ae[J++]=le}return ae}Ie.prototype=xo(jc.prototype),Ie.prototype.constructor=Ie;function Ns(a){var u=-1,d=a==null?0:a.length;for(this.clear();++u<d;){var g=a[u];this.set(g[0],g[1])}}function oP(){this.__data__=al?al(null):{},this.size=0}function aP(a){var u=this.has(a)&&delete this.__data__[a];return this.size-=u?1:0,u}function lP(a){var u=this.__data__;if(al){var d=u[a];return d===c?n:d}return Le.call(u,a)?u[a]:n}function uP(a){var u=this.__data__;return al?u[a]!==n:Le.call(u,a)}function cP(a,u){var d=this.__data__;return this.size+=this.has(a)?0:1,d[a]=al&&u===n?c:u,this}Ns.prototype.clear=oP,Ns.prototype.delete=aP,Ns.prototype.get=lP,Ns.prototype.has=uP,Ns.prototype.set=cP;function Gr(a){var u=-1,d=a==null?0:a.length;for(this.clear();++u<d;){var g=a[u];this.set(g[0],g[1])}}function fP(){this.__data__=[],this.size=0}function dP(a){var u=this.__data__,d=Wc(u,a);if(d<0)return!1;var g=u.length-1;return d==g?u.pop():Lc.call(u,d,1),--this.size,!0}function hP(a){var u=this.__data__,d=Wc(u,a);return d<0?n:u[d][1]}function pP(a){return Wc(this.__data__,a)>-1}function gP(a,u){var d=this.__data__,g=Wc(d,a);return g<0?(++this.size,d.push([a,u])):d[g][1]=u,this}Gr.prototype.clear=fP,Gr.prototype.delete=dP,Gr.prototype.get=hP,Gr.prototype.has=pP,Gr.prototype.set=gP;function Hr(a){var u=-1,d=a==null?0:a.length;for(this.clear();++u<d;){var g=a[u];this.set(g[0],g[1])}}function mP(){this.size=0,this.__data__={hash:new Ns,map:new(sl||Gr),string:new Ns}}function vP(a){var u=ef(this,a).delete(a);return this.size-=u?1:0,u}function _P(a){return ef(this,a).get(a)}function yP(a){return ef(this,a).has(a)}function wP(a,u){var d=ef(this,a),g=d.size;return d.set(a,u),this.size+=d.size==g?0:1,this}Hr.prototype.clear=mP,Hr.prototype.delete=vP,Hr.prototype.get=_P,Hr.prototype.has=yP,Hr.prototype.set=wP;function Os(a){var u=-1,d=a==null?0:a.length;for(this.__data__=new Hr;++u<d;)this.add(a[u])}function EP(a){return this.__data__.set(a,c),this}function SP(a){return this.__data__.has(a)}Os.prototype.add=Os.prototype.push=EP,Os.prototype.has=SP;function rr(a){var u=this.__data__=new Gr(a);this.size=u.size}function bP(){this.__data__=new Gr,this.size=0}function CP(a){var u=this.__data__,d=u.delete(a);return this.size=u.size,d}function IP(a){return this.__data__.get(a)}function TP(a){return this.__data__.has(a)}function AP(a,u){var d=this.__data__;if(d instanceof Gr){var g=d.__data__;if(!sl||g.length<i-1)return g.push([a,u]),this.size=++d.size,this;d=this.__data__=new Hr(g)}return d.set(a,u),this.size=d.size,this}rr.prototype.clear=bP,rr.prototype.delete=CP,rr.prototype.get=IP,rr.prototype.has=TP,rr.prototype.set=AP;function qw(a,u){var d=he(a),g=!d&&Ms(a),_=!d&&!g&&xi(a),b=!d&&!g&&!_&&Do(a),R=d||g||_||b,N=R?Mp(a.length,MO):[],P=N.length;for(var U in a)(u||Le.call(a,U))&&!(R&&(U=="length"||_&&(U=="offset"||U=="parent")||b&&(U=="buffer"||U=="byteLength"||U=="byteOffset")||Qr(U,P)))&&N.push(U);return N}function Yw(a){var u=a.length;return u?a[eg(0,u-1)]:n}function RP(a,u){return tf(on(a),Ps(u,0,a.length))}function kP(a){return tf(on(a))}function Vp(a,u,d){(d!==n&&!ir(a[u],d)||d===n&&!(u in a))&&Kr(a,u,d)}function ul(a,u,d){var g=a[u];(!(Le.call(a,u)&&ir(g,d))||d===n&&!(u in a))&&Kr(a,u,d)}function Wc(a,u){for(var d=a.length;d--;)if(ir(a[d][0],u))return d;return-1}function xP(a,u,d,g){return Ti(a,function(_,b,R){u(g,_,d(_),R)}),g}function Qw(a,u){return a&&br(u,bt(u),a)}function NP(a,u){return a&&br(u,ln(u),a)}function Kr(a,u,d){u=="__proto__"&&Fc?Fc(a,u,{configurable:!0,enumerable:!0,value:d,writable:!0}):a[u]=d}function Gp(a,u){for(var d=-1,g=u.length,_=L(g),b=a==null;++d<g;)_[d]=b?n:Ig(a,u[d]);return _}function Ps(a,u,d){return a===a&&(d!==n&&(a=a<=d?a:d),u!==n&&(a=a>=u?a:u)),a}function jn(a,u,d,g,_,b){var R,N=u&p,P=u&m,U=u&y;if(d&&(R=_?d(a,g,_,b):d(a)),R!==n)return R;if(!tt(a))return a;var $=he(a);if($){if(R=yD(a),!N)return on(a,R)}else{var j=$t(a),J=j==Rs||j==Xy;if(xi(a))return wE(a,N);if(j==Vr||j==Kt||J&&!_){if(R=P||J?{}:$E(a),!N)return P?lD(a,NP(R,a)):aD(a,Qw(R,a))}else{if(!ze[j])return _?a:{};R=wD(a,j,N)}}b||(b=new rr);var te=b.get(a);if(te)return te;b.set(a,R),p1(a)?a.forEach(function(le){R.add(jn(le,u,d,le,a,b))}):d1(a)&&a.forEach(function(le,Ee){R.set(Ee,jn(le,u,d,Ee,a,b))});var ae=U?P?fg:cg:P?ln:bt,me=$?n:ae(a);return Un(me||a,function(le,Ee){me&&(Ee=le,le=a[Ee]),ul(R,Ee,jn(le,u,d,Ee,a,b))}),R}function OP(a){var u=bt(a);return function(d){return Jw(d,a,u)}}function Jw(a,u,d){var g=d.length;if(a==null)return!g;for(a=$e(a);g--;){var _=d[g],b=u[_],R=a[_];if(R===n&&!(_ in a)||!b(R))return!1}return!0}function Xw(a,u,d){if(typeof a!="function")throw new $n(o);return ml(function(){a.apply(n,d)},u)}function cl(a,u,d,g){var _=-1,b=Ic,R=!0,N=a.length,P=[],U=u.length;if(!N)return P;d&&(u=Xe(u,En(d))),g?(b=Np,R=!1):u.length>=i&&(b=rl,R=!1,u=new Os(u));e:for(;++_<N;){var $=a[_],j=d==null?$:d($);if($=g||$!==0?$:0,R&&j===j){for(var J=U;J--;)if(u[J]===j)continue e;P.push($)}else b(u,j,g)||P.push($)}return P}var Ti=IE(Sr),Zw=IE(Kp,!0);function PP(a,u){var d=!0;return Ti(a,function(g,_,b){return d=!!u(g,_,b),d}),d}function zc(a,u,d){for(var g=-1,_=a.length;++g<_;){var b=a[g],R=u(b);if(R!=null&&(N===n?R===R&&!bn(R):d(R,N)))var N=R,P=b}return P}function DP(a,u,d,g){var _=a.length;for(d=ge(d),d<0&&(d=-d>_?0:_+d),g=g===n||g>_?_:ge(g),g<0&&(g+=_),g=d>g?0:m1(g);d<g;)a[d++]=u;return a}function eE(a,u){var d=[];return Ti(a,function(g,_,b){u(g,_,b)&&d.push(g)}),d}function Ot(a,u,d,g,_){var b=-1,R=a.length;for(d||(d=SD),_||(_=[]);++b<R;){var N=a[b];u>0&&d(N)?u>1?Ot(N,u-1,d,g,_):bi(_,N):g||(_[_.length]=N)}return _}var Hp=TE(),tE=TE(!0);function Sr(a,u){return a&&Hp(a,u,bt)}function Kp(a,u){return a&&tE(a,u,bt)}function Vc(a,u){return Si(u,function(d){return Jr(a[d])})}function Ds(a,u){u=Ri(u,a);for(var d=0,g=u.length;a!=null&&d<g;)a=a[Cr(u[d++])];return d&&d==g?a:n}function nE(a,u,d){var g=u(a);return he(a)?g:bi(g,d(a))}function qt(a){return a==null?a===n?uN:aN:xs&&xs in $e(a)?mD(a):kD(a)}function qp(a,u){return a>u}function LP(a,u){return a!=null&&Le.call(a,u)}function FP(a,u){return a!=null&&u in $e(a)}function MP(a,u,d){return a>=Ut(u,d)&&a<mt(u,d)}function Yp(a,u,d){for(var g=d?Np:Ic,_=a[0].length,b=a.length,R=b,N=L(b),P=1/0,U=[];R--;){var $=a[R];R&&u&&($=Xe($,En(u))),P=Ut($.length,P),N[R]=!d&&(u||_>=120&&$.length>=120)?new Os(R&&$):n}$=a[0];var j=-1,J=N[0];e:for(;++j<_&&U.length<P;){var te=$[j],ae=u?u(te):te;if(te=d||te!==0?te:0,!(J?rl(J,ae):g(U,ae,d))){for(R=b;--R;){var me=N[R];if(!(me?rl(me,ae):g(a[R],ae,d)))continue e}J&&J.push(ae),U.push(te)}}return U}function UP(a,u,d,g){return Sr(a,function(_,b,R){u(g,d(_),b,R)}),g}function fl(a,u,d){u=Ri(u,a),a=zE(a,u);var g=a==null?a:a[Cr(zn(u))];return g==null?n:wn(g,a,d)}function rE(a){return at(a)&&qt(a)==Kt}function $P(a){return at(a)&&qt(a)==nl}function BP(a){return at(a)&&qt(a)==Fn}function dl(a,u,d,g,_){return a===u?!0:a==null||u==null||!at(a)&&!at(u)?a!==a&&u!==u:jP(a,u,d,g,dl,_)}function jP(a,u,d,g,_,b){var R=he(a),N=he(u),P=R?Mt:$t(a),U=N?Mt:$t(u);P=P==Kt?Vr:P,U=U==Kt?Vr:U;var $=P==Vr,j=U==Vr,J=P==U;if(J&&xi(a)){if(!xi(u))return!1;R=!0,$=!1}if(J&&!$)return b||(b=new rr),R||Do(a)?FE(a,u,d,g,_,b):pD(a,u,P,d,g,_,b);if(!(d&T)){var te=$&&Le.call(a,"__wrapped__"),ae=j&&Le.call(u,"__wrapped__");if(te||ae){var me=te?a.value():a,le=ae?u.value():u;return b||(b=new rr),_(me,le,d,g,b)}}return J?(b||(b=new rr),gD(a,u,d,g,_,b)):!1}function WP(a){return at(a)&&$t(a)==er}function Qp(a,u,d,g){var _=d.length,b=_,R=!g;if(a==null)return!b;for(a=$e(a);_--;){var N=d[_];if(R&&N[2]?N[1]!==a[N[0]]:!(N[0]in a))return!1}for(;++_<b;){N=d[_];var P=N[0],U=a[P],$=N[1];if(R&&N[2]){if(U===n&&!(P in a))return!1}else{var j=new rr;if(g)var J=g(U,$,P,a,u,j);if(!(J===n?dl($,U,T|C,g,j):J))return!1}}return!0}function iE(a){if(!tt(a)||CD(a))return!1;var u=Jr(a)?WO:ON;return u.test(Fs(a))}function zP(a){return at(a)&&qt(a)==Za}function VP(a){return at(a)&&$t(a)==tr}function GP(a){return at(a)&&lf(a.length)&&!!He[qt(a)]}function sE(a){return typeof a=="function"?a:a==null?un:typeof a=="object"?he(a)?lE(a[0],a[1]):aE(a):A1(a)}function Jp(a){if(!gl(a))return qO(a);var u=[];for(var d in $e(a))Le.call(a,d)&&d!="constructor"&&u.push(d);return u}function HP(a){if(!tt(a))return RD(a);var u=gl(a),d=[];for(var g in a)g=="constructor"&&(u||!Le.call(a,g))||d.push(g);return d}function Xp(a,u){return a<u}function oE(a,u){var d=-1,g=an(a)?L(a.length):[];return Ti(a,function(_,b,R){g[++d]=u(_,b,R)}),g}function aE(a){var u=hg(a);return u.length==1&&u[0][2]?jE(u[0][0],u[0][1]):function(d){return d===a||Qp(d,a,u)}}function lE(a,u){return gg(a)&&BE(u)?jE(Cr(a),u):function(d){var g=Ig(d,a);return g===n&&g===u?Tg(d,a):dl(u,g,T|C)}}function Gc(a,u,d,g,_){a!==u&&Hp(u,function(b,R){if(_||(_=new rr),tt(b))KP(a,u,R,d,Gc,g,_);else{var N=g?g(vg(a,R),b,R+"",a,u,_):n;N===n&&(N=b),Vp(a,R,N)}},ln)}function KP(a,u,d,g,_,b,R){var N=vg(a,d),P=vg(u,d),U=R.get(P);if(U){Vp(a,d,U);return}var $=b?b(N,P,d+"",a,u,R):n,j=$===n;if(j){var J=he(P),te=!J&&xi(P),ae=!J&&!te&&Do(P);$=P,J||te||ae?he(N)?$=N:ct(N)?$=on(N):te?(j=!1,$=wE(P,!0)):ae?(j=!1,$=EE(P,!0)):$=[]:vl(P)||Ms(P)?($=N,Ms(N)?$=v1(N):(!tt(N)||Jr(N))&&($=$E(P))):j=!1}j&&(R.set(P,$),_($,P,g,b,R),R.delete(P)),Vp(a,d,$)}function uE(a,u){var d=a.length;if(d)return u+=u<0?d:0,Qr(u,d)?a[u]:n}function cE(a,u,d){u.length?u=Xe(u,function(b){return he(b)?function(R){return Ds(R,b.length===1?b[0]:b)}:b}):u=[un];var g=-1;u=Xe(u,En(oe()));var _=oE(a,function(b,R,N){var P=Xe(u,function(U){return U(b)});return{criteria:P,index:++g,value:b}});return wO(_,function(b,R){return oD(b,R,d)})}function qP(a,u){return fE(a,u,function(d,g){return Tg(a,g)})}function fE(a,u,d){for(var g=-1,_=u.length,b={};++g<_;){var R=u[g],N=Ds(a,R);d(N,R)&&hl(b,Ri(R,a),N)}return b}function YP(a){return function(u){return Ds(u,a)}}function Zp(a,u,d,g){var _=g?yO:bo,b=-1,R=u.length,N=a;for(a===u&&(u=on(u)),d&&(N=Xe(a,En(d)));++b<R;)for(var P=0,U=u[b],$=d?d(U):U;(P=_(N,$,P,g))>-1;)N!==a&&Lc.call(N,P,1),Lc.call(a,P,1);return a}function dE(a,u){for(var d=a?u.length:0,g=d-1;d--;){var _=u[d];if(d==g||_!==b){var b=_;Qr(_)?Lc.call(a,_,1):rg(a,_)}}return a}function eg(a,u){return a+Uc(Hw()*(u-a+1))}function QP(a,u,d,g){for(var _=-1,b=mt(Mc((u-a)/(d||1)),0),R=L(b);b--;)R[g?b:++_]=a,a+=d;return R}function tg(a,u){var d="";if(!a||u<1||u>Y)return d;do u%2&&(d+=a),u=Uc(u/2),u&&(a+=a);while(u);return d}function ve(a,u){return _g(WE(a,u,un),a+"")}function JP(a){return Yw(Lo(a))}function XP(a,u){var d=Lo(a);return tf(d,Ps(u,0,d.length))}function hl(a,u,d,g){if(!tt(a))return a;u=Ri(u,a);for(var _=-1,b=u.length,R=b-1,N=a;N!=null&&++_<b;){var P=Cr(u[_]),U=d;if(P==="__proto__"||P==="constructor"||P==="prototype")return a;if(_!=R){var $=N[P];U=g?g($,P,N):n,U===n&&(U=tt($)?$:Qr(u[_+1])?[]:{})}ul(N,P,U),N=N[P]}return a}var hE=$c?function(a,u){return $c.set(a,u),a}:un,ZP=Fc?function(a,u){return Fc(a,"toString",{configurable:!0,enumerable:!1,value:Rg(u),writable:!0})}:un;function eD(a){return tf(Lo(a))}function Wn(a,u,d){var g=-1,_=a.length;u<0&&(u=-u>_?0:_+u),d=d>_?_:d,d<0&&(d+=_),_=u>d?0:d-u>>>0,u>>>=0;for(var b=L(_);++g<_;)b[g]=a[g+u];return b}function tD(a,u){var d;return Ti(a,function(g,_,b){return d=u(g,_,b),!d}),!!d}function Hc(a,u,d){var g=0,_=a==null?g:a.length;if(typeof u=="number"&&u===u&&_<=jr){for(;g<_;){var b=g+_>>>1,R=a[b];R!==null&&!bn(R)&&(d?R<=u:R<u)?g=b+1:_=b}return _}return ng(a,u,un,d)}function ng(a,u,d,g){var _=0,b=a==null?0:a.length;if(b===0)return 0;u=d(u);for(var R=u!==u,N=u===null,P=bn(u),U=u===n;_<b;){var $=Uc((_+b)/2),j=d(a[$]),J=j!==n,te=j===null,ae=j===j,me=bn(j);if(R)var le=g||ae;else U?le=ae&&(g||J):N?le=ae&&J&&(g||!te):P?le=ae&&J&&!te&&(g||!me):te||me?le=!1:le=g?j<=u:j<u;le?_=$+1:b=$}return Ut(b,De)}function pE(a,u){for(var d=-1,g=a.length,_=0,b=[];++d<g;){var R=a[d],N=u?u(R):R;if(!d||!ir(N,P)){var P=N;b[_++]=R===0?0:R}}return b}function gE(a){return typeof a=="number"?a:bn(a)?re:+a}function Sn(a){if(typeof a=="string")return a;if(he(a))return Xe(a,Sn)+"";if(bn(a))return Kw?Kw.call(a):"";var u=a+"";return u=="0"&&1/a==-Je?"-0":u}function Ai(a,u,d){var g=-1,_=Ic,b=a.length,R=!0,N=[],P=N;if(d)R=!1,_=Np;else if(b>=i){var U=u?null:dD(a);if(U)return Ac(U);R=!1,_=rl,P=new Os}else P=u?[]:N;e:for(;++g<b;){var $=a[g],j=u?u($):$;if($=d||$!==0?$:0,R&&j===j){for(var J=P.length;J--;)if(P[J]===j)continue e;u&&P.push(j),N.push($)}else _(P,j,d)||(P!==N&&P.push(j),N.push($))}return N}function rg(a,u){return u=Ri(u,a),a=zE(a,u),a==null||delete a[Cr(zn(u))]}function mE(a,u,d,g){return hl(a,u,d(Ds(a,u)),g)}function Kc(a,u,d,g){for(var _=a.length,b=g?_:-1;(g?b--:++b<_)&&u(a[b],b,a););return d?Wn(a,g?0:b,g?b+1:_):Wn(a,g?b+1:0,g?_:b)}function vE(a,u){var d=a;return d instanceof Ie&&(d=d.value()),Op(u,function(g,_){return _.func.apply(_.thisArg,bi([g],_.args))},d)}function ig(a,u,d){var g=a.length;if(g<2)return g?Ai(a[0]):[];for(var _=-1,b=L(g);++_<g;)for(var R=a[_],N=-1;++N<g;)N!=_&&(b[_]=cl(b[_]||R,a[N],u,d));return Ai(Ot(b,1),u,d)}function _E(a,u,d){for(var g=-1,_=a.length,b=u.length,R={};++g<_;){var N=g<b?u[g]:n;d(R,a[g],N)}return R}function sg(a){return ct(a)?a:[]}function og(a){return typeof a=="function"?a:un}function Ri(a,u){return he(a)?a:gg(a,u)?[a]:KE(Oe(a))}var nD=ve;function ki(a,u,d){var g=a.length;return d=d===n?g:d,!u&&d>=g?a:Wn(a,u,d)}var yE=zO||function(a){return Nt.clearTimeout(a)};function wE(a,u){if(u)return a.slice();var d=a.length,g=jw?jw(d):new a.constructor(d);return a.copy(g),g}function ag(a){var u=new a.constructor(a.byteLength);return new Pc(u).set(new Pc(a)),u}function rD(a,u){var d=u?ag(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.byteLength)}function iD(a){var u=new a.constructor(a.source,rw.exec(a));return u.lastIndex=a.lastIndex,u}function sD(a){return ll?$e(ll.call(a)):{}}function EE(a,u){var d=u?ag(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.length)}function SE(a,u){if(a!==u){var d=a!==n,g=a===null,_=a===a,b=bn(a),R=u!==n,N=u===null,P=u===u,U=bn(u);if(!N&&!U&&!b&&a>u||b&&R&&P&&!N&&!U||g&&R&&P||!d&&P||!_)return 1;if(!g&&!b&&!U&&a<u||U&&d&&_&&!g&&!b||N&&d&&_||!R&&_||!P)return-1}return 0}function oD(a,u,d){for(var g=-1,_=a.criteria,b=u.criteria,R=_.length,N=d.length;++g<R;){var P=SE(_[g],b[g]);if(P){if(g>=N)return P;var U=d[g];return P*(U=="desc"?-1:1)}}return a.index-u.index}function bE(a,u,d,g){for(var _=-1,b=a.length,R=d.length,N=-1,P=u.length,U=mt(b-R,0),$=L(P+U),j=!g;++N<P;)$[N]=u[N];for(;++_<R;)(j||_<b)&&($[d[_]]=a[_]);for(;U--;)$[N++]=a[_++];return $}function CE(a,u,d,g){for(var _=-1,b=a.length,R=-1,N=d.length,P=-1,U=u.length,$=mt(b-N,0),j=L($+U),J=!g;++_<$;)j[_]=a[_];for(var te=_;++P<U;)j[te+P]=u[P];for(;++R<N;)(J||_<b)&&(j[te+d[R]]=a[_++]);return j}function on(a,u){var d=-1,g=a.length;for(u||(u=L(g));++d<g;)u[d]=a[d];return u}function br(a,u,d,g){var _=!d;d||(d={});for(var b=-1,R=u.length;++b<R;){var N=u[b],P=g?g(d[N],a[N],N,d,a):n;P===n&&(P=a[N]),_?Kr(d,N,P):ul(d,N,P)}return d}function aD(a,u){return br(a,pg(a),u)}function lD(a,u){return br(a,ME(a),u)}function qc(a,u){return function(d,g){var _=he(d)?hO:xP,b=u?u():{};return _(d,a,oe(g,2),b)}}function No(a){return ve(function(u,d){var g=-1,_=d.length,b=_>1?d[_-1]:n,R=_>2?d[2]:n;for(b=a.length>3&&typeof b=="function"?(_--,b):n,R&&Yt(d[0],d[1],R)&&(b=_<3?n:b,_=1),u=$e(u);++g<_;){var N=d[g];N&&a(u,N,g,b)}return u})}function IE(a,u){return function(d,g){if(d==null)return d;if(!an(d))return a(d,g);for(var _=d.length,b=u?_:-1,R=$e(d);(u?b--:++b<_)&&g(R[b],b,R)!==!1;);return d}}function TE(a){return function(u,d,g){for(var _=-1,b=$e(u),R=g(u),N=R.length;N--;){var P=R[a?N:++_];if(d(b[P],P,b)===!1)break}return u}}function uD(a,u,d){var g=u&A,_=pl(a);function b(){var R=this&&this!==Nt&&this instanceof b?_:a;return R.apply(g?d:this,arguments)}return b}function AE(a){return function(u){u=Oe(u);var d=Co(u)?nr(u):n,g=d?d[0]:u.charAt(0),_=d?ki(d,1).join(""):u.slice(1);return g[a]()+_}}function Oo(a){return function(u){return Op(I1(C1(u).replace(ZN,"")),a,"")}}function pl(a){return function(){var u=arguments;switch(u.length){case 0:return new a;case 1:return new a(u[0]);case 2:return new a(u[0],u[1]);case 3:return new a(u[0],u[1],u[2]);case 4:return new a(u[0],u[1],u[2],u[3]);case 5:return new a(u[0],u[1],u[2],u[3],u[4]);case 6:return new a(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new a(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var d=xo(a.prototype),g=a.apply(d,u);return tt(g)?g:d}}function cD(a,u,d){var g=pl(a);function _(){for(var b=arguments.length,R=L(b),N=b,P=Po(_);N--;)R[N]=arguments[N];var U=b<3&&R[0]!==P&&R[b-1]!==P?[]:Ci(R,P);if(b-=U.length,b<d)return OE(a,u,Yc,_.placeholder,n,R,U,n,n,d-b);var $=this&&this!==Nt&&this instanceof _?g:a;return wn($,this,R)}return _}function RE(a){return function(u,d,g){var _=$e(u);if(!an(u)){var b=oe(d,3);u=bt(u),d=function(N){return b(_[N],N,_)}}var R=a(u,d,g);return R>-1?_[b?u[R]:R]:n}}function kE(a){return Yr(function(u){var d=u.length,g=d,_=Bn.prototype.thru;for(a&&u.reverse();g--;){var b=u[g];if(typeof b!="function")throw new $n(o);if(_&&!R&&Zc(b)=="wrapper")var R=new Bn([],!0)}for(g=R?g:d;++g<d;){b=u[g];var N=Zc(b),P=N=="wrapper"?dg(b):n;P&&mg(P[0])&&P[1]==(B|I|M|Q)&&!P[4].length&&P[9]==1?R=R[Zc(P[0])].apply(R,P[3]):R=b.length==1&&mg(b)?R[N]():R.thru(b)}return function(){var U=arguments,$=U[0];if(R&&U.length==1&&he($))return R.plant($).value();for(var j=0,J=d?u[j].apply(this,U):$;++j<d;)J=u[j].call(this,J);return J}})}function Yc(a,u,d,g,_,b,R,N,P,U){var $=u&B,j=u&A,J=u&v,te=u&(I|x),ae=u&q,me=J?n:pl(a);function le(){for(var Ee=arguments.length,Ae=L(Ee),Cn=Ee;Cn--;)Ae[Cn]=arguments[Cn];if(te)var Qt=Po(le),In=SO(Ae,Qt);if(g&&(Ae=bE(Ae,g,_,te)),b&&(Ae=CE(Ae,b,R,te)),Ee-=In,te&&Ee<U){var ft=Ci(Ae,Qt);return OE(a,u,Yc,le.placeholder,d,Ae,ft,N,P,U-Ee)}var sr=j?d:this,Zr=J?sr[a]:a;return Ee=Ae.length,N?Ae=xD(Ae,N):ae&&Ee>1&&Ae.reverse(),$&&P<Ee&&(Ae.length=P),this&&this!==Nt&&this instanceof le&&(Zr=me||pl(Zr)),Zr.apply(sr,Ae)}return le}function xE(a,u){return function(d,g){return UP(d,a,u(g),{})}}function Qc(a,u){return function(d,g){var _;if(d===n&&g===n)return u;if(d!==n&&(_=d),g!==n){if(_===n)return g;typeof d=="string"||typeof g=="string"?(d=Sn(d),g=Sn(g)):(d=gE(d),g=gE(g)),_=a(d,g)}return _}}function lg(a){return Yr(function(u){return u=Xe(u,En(oe())),ve(function(d){var g=this;return a(u,function(_){return wn(_,g,d)})})})}function Jc(a,u){u=u===n?" ":Sn(u);var d=u.length;if(d<2)return d?tg(u,a):u;var g=tg(u,Mc(a/Io(u)));return Co(u)?ki(nr(g),0,a).join(""):g.slice(0,a)}function fD(a,u,d,g){var _=u&A,b=pl(a);function R(){for(var N=-1,P=arguments.length,U=-1,$=g.length,j=L($+P),J=this&&this!==Nt&&this instanceof R?b:a;++U<$;)j[U]=g[U];for(;P--;)j[U++]=arguments[++N];return wn(J,_?d:this,j)}return R}function NE(a){return function(u,d,g){return g&&typeof g!="number"&&Yt(u,d,g)&&(d=g=n),u=Xr(u),d===n?(d=u,u=0):d=Xr(d),g=g===n?u<d?1:-1:Xr(g),QP(u,d,g,a)}}function Xc(a){return function(u,d){return typeof u=="string"&&typeof d=="string"||(u=Vn(u),d=Vn(d)),a(u,d)}}function OE(a,u,d,g,_,b,R,N,P,U){var $=u&I,j=$?R:n,J=$?n:R,te=$?b:n,ae=$?n:b;u|=$?M:W,u&=~($?W:M),u&E||(u&=~(A|v));var me=[a,u,_,te,j,ae,J,N,P,U],le=d.apply(n,me);return mg(a)&&VE(le,me),le.placeholder=g,GE(le,a,u)}function ug(a){var u=gt[a];return function(d,g){if(d=Vn(d),g=g==null?0:Ut(ge(g),292),g&&Gw(d)){var _=(Oe(d)+"e").split("e"),b=u(_[0]+"e"+(+_[1]+g));return _=(Oe(b)+"e").split("e"),+(_[0]+"e"+(+_[1]-g))}return u(d)}}var dD=Ro&&1/Ac(new Ro([,-0]))[1]==Je?function(a){return new Ro(a)}:Ng;function PE(a){return function(u){var d=$t(u);return d==er?$p(u):d==tr?kO(u):EO(u,a(u))}}function qr(a,u,d,g,_,b,R,N){var P=u&v;if(!P&&typeof a!="function")throw new $n(o);var U=g?g.length:0;if(U||(u&=~(M|W),g=_=n),R=R===n?R:mt(ge(R),0),N=N===n?N:ge(N),U-=_?_.length:0,u&W){var $=g,j=_;g=_=n}var J=P?n:dg(a),te=[a,u,d,g,_,$,j,b,R,N];if(J&&AD(te,J),a=te[0],u=te[1],d=te[2],g=te[3],_=te[4],N=te[9]=te[9]===n?P?0:a.length:mt(te[9]-U,0),!N&&u&(I|x)&&(u&=~(I|x)),!u||u==A)var ae=uD(a,u,d);else u==I||u==x?ae=cD(a,u,N):(u==M||u==(A|M))&&!_.length?ae=fD(a,u,d,g):ae=Yc.apply(n,te);var me=J?hE:VE;return GE(me(ae,te),a,u)}function DE(a,u,d,g){return a===n||ir(a,Ao[d])&&!Le.call(g,d)?u:a}function LE(a,u,d,g,_,b){return tt(a)&&tt(u)&&(b.set(u,a),Gc(a,u,n,LE,b),b.delete(u)),a}function hD(a){return vl(a)?n:a}function FE(a,u,d,g,_,b){var R=d&T,N=a.length,P=u.length;if(N!=P&&!(R&&P>N))return!1;var U=b.get(a),$=b.get(u);if(U&&$)return U==u&&$==a;var j=-1,J=!0,te=d&C?new Os:n;for(b.set(a,u),b.set(u,a);++j<N;){var ae=a[j],me=u[j];if(g)var le=R?g(me,ae,j,u,a,b):g(ae,me,j,a,u,b);if(le!==n){if(le)continue;J=!1;break}if(te){if(!Pp(u,function(Ee,Ae){if(!rl(te,Ae)&&(ae===Ee||_(ae,Ee,d,g,b)))return te.push(Ae)})){J=!1;break}}else if(!(ae===me||_(ae,me,d,g,b))){J=!1;break}}return b.delete(a),b.delete(u),J}function pD(a,u,d,g,_,b,R){switch(d){case Eo:if(a.byteLength!=u.byteLength||a.byteOffset!=u.byteOffset)return!1;a=a.buffer,u=u.buffer;case nl:return!(a.byteLength!=u.byteLength||!b(new Pc(a),new Pc(u)));case zr:case Fn:case Xa:return ir(+a,+u);case As:return a.name==u.name&&a.message==u.message;case Za:case el:return a==u+"";case er:var N=$p;case tr:var P=g&T;if(N||(N=Ac),a.size!=u.size&&!P)return!1;var U=R.get(a);if(U)return U==u;g|=C,R.set(a,u);var $=FE(N(a),N(u),g,_,b,R);return R.delete(a),$;case Ec:if(ll)return ll.call(a)==ll.call(u)}return!1}function gD(a,u,d,g,_,b){var R=d&T,N=cg(a),P=N.length,U=cg(u),$=U.length;if(P!=$&&!R)return!1;for(var j=P;j--;){var J=N[j];if(!(R?J in u:Le.call(u,J)))return!1}var te=b.get(a),ae=b.get(u);if(te&&ae)return te==u&&ae==a;var me=!0;b.set(a,u),b.set(u,a);for(var le=R;++j<P;){J=N[j];var Ee=a[J],Ae=u[J];if(g)var Cn=R?g(Ae,Ee,J,u,a,b):g(Ee,Ae,J,a,u,b);if(!(Cn===n?Ee===Ae||_(Ee,Ae,d,g,b):Cn)){me=!1;break}le||(le=J=="constructor")}if(me&&!le){var Qt=a.constructor,In=u.constructor;Qt!=In&&"constructor"in a&&"constructor"in u&&!(typeof Qt=="function"&&Qt instanceof Qt&&typeof In=="function"&&In instanceof In)&&(me=!1)}return b.delete(a),b.delete(u),me}function Yr(a){return _g(WE(a,n,JE),a+"")}function cg(a){return nE(a,bt,pg)}function fg(a){return nE(a,ln,ME)}var dg=$c?function(a){return $c.get(a)}:Ng;function Zc(a){for(var u=a.name+"",d=ko[u],g=Le.call(ko,u)?d.length:0;g--;){var _=d[g],b=_.func;if(b==null||b==a)return _.name}return u}function Po(a){var u=Le.call(S,"placeholder")?S:a;return u.placeholder}function oe(){var a=S.iteratee||kg;return a=a===kg?sE:a,arguments.length?a(arguments[0],arguments[1]):a}function ef(a,u){var d=a.__data__;return bD(u)?d[typeof u=="string"?"string":"hash"]:d.map}function hg(a){for(var u=bt(a),d=u.length;d--;){var g=u[d],_=a[g];u[d]=[g,_,BE(_)]}return u}function Ls(a,u){var d=TO(a,u);return iE(d)?d:n}function mD(a){var u=Le.call(a,xs),d=a[xs];try{a[xs]=n;var g=!0}catch{}var _=Nc.call(a);return g&&(u?a[xs]=d:delete a[xs]),_}var pg=jp?function(a){return a==null?[]:(a=$e(a),Si(jp(a),function(u){return zw.call(a,u)}))}:Og,ME=jp?function(a){for(var u=[];a;)bi(u,pg(a)),a=Dc(a);return u}:Og,$t=qt;(Wp&&$t(new Wp(new ArrayBuffer(1)))!=Eo||sl&&$t(new sl)!=er||zp&&$t(zp.resolve())!=Zy||Ro&&$t(new Ro)!=tr||ol&&$t(new ol)!=tl)&&($t=function(a){var u=qt(a),d=u==Vr?a.constructor:n,g=d?Fs(d):"";if(g)switch(g){case XO:return Eo;case ZO:return er;case eP:return Zy;case tP:return tr;case nP:return tl}return u});function vD(a,u,d){for(var g=-1,_=d.length;++g<_;){var b=d[g],R=b.size;switch(b.type){case"drop":a+=R;break;case"dropRight":u-=R;break;case"take":u=Ut(u,a+R);break;case"takeRight":a=mt(a,u-R);break}}return{start:a,end:u}}function _D(a){var u=a.match(CN);return u?u[1].split(IN):[]}function UE(a,u,d){u=Ri(u,a);for(var g=-1,_=u.length,b=!1;++g<_;){var R=Cr(u[g]);if(!(b=a!=null&&d(a,R)))break;a=a[R]}return b||++g!=_?b:(_=a==null?0:a.length,!!_&&lf(_)&&Qr(R,_)&&(he(a)||Ms(a)))}function yD(a){var u=a.length,d=new a.constructor(u);return u&&typeof a[0]=="string"&&Le.call(a,"index")&&(d.index=a.index,d.input=a.input),d}function $E(a){return typeof a.constructor=="function"&&!gl(a)?xo(Dc(a)):{}}function wD(a,u,d){var g=a.constructor;switch(u){case nl:return ag(a);case zr:case Fn:return new g(+a);case Eo:return rD(a,d);case hp:case pp:case gp:case mp:case vp:case _p:case yp:case wp:case Ep:return EE(a,d);case er:return new g;case Xa:case el:return new g(a);case Za:return iD(a);case tr:return new g;case Ec:return sD(a)}}function ED(a,u){var d=u.length;if(!d)return a;var g=d-1;return u[g]=(d>1?"& ":"")+u[g],u=u.join(d>2?", ":" "),a.replace(bN,`{
/* [wrapped with `+u+`] */
`)}function SD(a){return he(a)||Ms(a)||!!(Vw&&a&&a[Vw])}function Qr(a,u){var d=typeof a;return u=u??Y,!!u&&(d=="number"||d!="symbol"&&DN.test(a))&&a>-1&&a%1==0&&a<u}function Yt(a,u,d){if(!tt(d))return!1;var g=typeof u;return(g=="number"?an(d)&&Qr(u,d.length):g=="string"&&u in d)?ir(d[u],a):!1}function gg(a,u){if(he(a))return!1;var d=typeof a;return d=="number"||d=="symbol"||d=="boolean"||a==null||bn(a)?!0:yN.test(a)||!_N.test(a)||u!=null&&a in $e(u)}function bD(a){var u=typeof a;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?a!=="__proto__":a===null}function mg(a){var u=Zc(a),d=S[u];if(typeof d!="function"||!(u in Ie.prototype))return!1;if(a===d)return!0;var g=dg(d);return!!g&&a===g[0]}function CD(a){return!!Bw&&Bw in a}var ID=kc?Jr:Pg;function gl(a){var u=a&&a.constructor,d=typeof u=="function"&&u.prototype||Ao;return a===d}function BE(a){return a===a&&!tt(a)}function jE(a,u){return function(d){return d==null?!1:d[a]===u&&(u!==n||a in $e(d))}}function TD(a){var u=of(a,function(g){return d.size===f&&d.clear(),g}),d=u.cache;return u}function AD(a,u){var d=a[1],g=u[1],_=d|g,b=_<(A|v|B),R=g==B&&d==I||g==B&&d==Q&&a[7].length<=u[8]||g==(B|Q)&&u[7].length<=u[8]&&d==I;if(!(b||R))return a;g&A&&(a[2]=u[2],_|=d&A?0:E);var N=u[3];if(N){var P=a[3];a[3]=P?bE(P,N,u[4]):N,a[4]=P?Ci(a[3],h):u[4]}return N=u[5],N&&(P=a[5],a[5]=P?CE(P,N,u[6]):N,a[6]=P?Ci(a[5],h):u[6]),N=u[7],N&&(a[7]=N),g&B&&(a[8]=a[8]==null?u[8]:Ut(a[8],u[8])),a[9]==null&&(a[9]=u[9]),a[0]=u[0],a[1]=_,a}function RD(a){var u=[];if(a!=null)for(var d in $e(a))u.push(d);return u}function kD(a){return Nc.call(a)}function WE(a,u,d){return u=mt(u===n?a.length-1:u,0),function(){for(var g=arguments,_=-1,b=mt(g.length-u,0),R=L(b);++_<b;)R[_]=g[u+_];_=-1;for(var N=L(u+1);++_<u;)N[_]=g[_];return N[u]=d(R),wn(a,this,N)}}function zE(a,u){return u.length<2?a:Ds(a,Wn(u,0,-1))}function xD(a,u){for(var d=a.length,g=Ut(u.length,d),_=on(a);g--;){var b=u[g];a[g]=Qr(b,d)?_[b]:n}return a}function vg(a,u){if(!(u==="constructor"&&typeof a[u]=="function")&&u!="__proto__")return a[u]}var VE=HE(hE),ml=GO||function(a,u){return Nt.setTimeout(a,u)},_g=HE(ZP);function GE(a,u,d){var g=u+"";return _g(a,ED(g,ND(_D(g),d)))}function HE(a){var u=0,d=0;return function(){var g=YO(),_=ot-(g-d);if(d=g,_>0){if(++u>=Ue)return arguments[0]}else u=0;return a.apply(n,arguments)}}function tf(a,u){var d=-1,g=a.length,_=g-1;for(u=u===n?g:u;++d<u;){var b=eg(d,_),R=a[b];a[b]=a[d],a[d]=R}return a.length=u,a}var KE=TD(function(a){var u=[];return a.charCodeAt(0)===46&&u.push(""),a.replace(wN,function(d,g,_,b){u.push(_?b.replace(RN,"$1"):g||d)}),u});function Cr(a){if(typeof a=="string"||bn(a))return a;var u=a+"";return u=="0"&&1/a==-Je?"-0":u}function Fs(a){if(a!=null){try{return xc.call(a)}catch{}try{return a+""}catch{}}return""}function ND(a,u){return Un(Ht,function(d){var g="_."+d[0];u&d[1]&&!Ic(a,g)&&a.push(g)}),a.sort()}function qE(a){if(a instanceof Ie)return a.clone();var u=new Bn(a.__wrapped__,a.__chain__);return u.__actions__=on(a.__actions__),u.__index__=a.__index__,u.__values__=a.__values__,u}function OD(a,u,d){(d?Yt(a,u,d):u===n)?u=1:u=mt(ge(u),0);var g=a==null?0:a.length;if(!g||u<1)return[];for(var _=0,b=0,R=L(Mc(g/u));_<g;)R[b++]=Wn(a,_,_+=u);return R}function PD(a){for(var u=-1,d=a==null?0:a.length,g=0,_=[];++u<d;){var b=a[u];b&&(_[g++]=b)}return _}function DD(){var a=arguments.length;if(!a)return[];for(var u=L(a-1),d=arguments[0],g=a;g--;)u[g-1]=arguments[g];return bi(he(d)?on(d):[d],Ot(u,1))}var LD=ve(function(a,u){return ct(a)?cl(a,Ot(u,1,ct,!0)):[]}),FD=ve(function(a,u){var d=zn(u);return ct(d)&&(d=n),ct(a)?cl(a,Ot(u,1,ct,!0),oe(d,2)):[]}),MD=ve(function(a,u){var d=zn(u);return ct(d)&&(d=n),ct(a)?cl(a,Ot(u,1,ct,!0),n,d):[]});function UD(a,u,d){var g=a==null?0:a.length;return g?(u=d||u===n?1:ge(u),Wn(a,u<0?0:u,g)):[]}function $D(a,u,d){var g=a==null?0:a.length;return g?(u=d||u===n?1:ge(u),u=g-u,Wn(a,0,u<0?0:u)):[]}function BD(a,u){return a&&a.length?Kc(a,oe(u,3),!0,!0):[]}function jD(a,u){return a&&a.length?Kc(a,oe(u,3),!0):[]}function WD(a,u,d,g){var _=a==null?0:a.length;return _?(d&&typeof d!="number"&&Yt(a,u,d)&&(d=0,g=_),DP(a,u,d,g)):[]}function YE(a,u,d){var g=a==null?0:a.length;if(!g)return-1;var _=d==null?0:ge(d);return _<0&&(_=mt(g+_,0)),Tc(a,oe(u,3),_)}function QE(a,u,d){var g=a==null?0:a.length;if(!g)return-1;var _=g-1;return d!==n&&(_=ge(d),_=d<0?mt(g+_,0):Ut(_,g-1)),Tc(a,oe(u,3),_,!0)}function JE(a){var u=a==null?0:a.length;return u?Ot(a,1):[]}function zD(a){var u=a==null?0:a.length;return u?Ot(a,Je):[]}function VD(a,u){var d=a==null?0:a.length;return d?(u=u===n?1:ge(u),Ot(a,u)):[]}function GD(a){for(var u=-1,d=a==null?0:a.length,g={};++u<d;){var _=a[u];g[_[0]]=_[1]}return g}function XE(a){return a&&a.length?a[0]:n}function HD(a,u,d){var g=a==null?0:a.length;if(!g)return-1;var _=d==null?0:ge(d);return _<0&&(_=mt(g+_,0)),bo(a,u,_)}function KD(a){var u=a==null?0:a.length;return u?Wn(a,0,-1):[]}var qD=ve(function(a){var u=Xe(a,sg);return u.length&&u[0]===a[0]?Yp(u):[]}),YD=ve(function(a){var u=zn(a),d=Xe(a,sg);return u===zn(d)?u=n:d.pop(),d.length&&d[0]===a[0]?Yp(d,oe(u,2)):[]}),QD=ve(function(a){var u=zn(a),d=Xe(a,sg);return u=typeof u=="function"?u:n,u&&d.pop(),d.length&&d[0]===a[0]?Yp(d,n,u):[]});function JD(a,u){return a==null?"":KO.call(a,u)}function zn(a){var u=a==null?0:a.length;return u?a[u-1]:n}function XD(a,u,d){var g=a==null?0:a.length;if(!g)return-1;var _=g;return d!==n&&(_=ge(d),_=_<0?mt(g+_,0):Ut(_,g-1)),u===u?NO(a,u,_):Tc(a,Ow,_,!0)}function ZD(a,u){return a&&a.length?uE(a,ge(u)):n}var e2=ve(ZE);function ZE(a,u){return a&&a.length&&u&&u.length?Zp(a,u):a}function t2(a,u,d){return a&&a.length&&u&&u.length?Zp(a,u,oe(d,2)):a}function n2(a,u,d){return a&&a.length&&u&&u.length?Zp(a,u,n,d):a}var r2=Yr(function(a,u){var d=a==null?0:a.length,g=Gp(a,u);return dE(a,Xe(u,function(_){return Qr(_,d)?+_:_}).sort(SE)),g});function i2(a,u){var d=[];if(!(a&&a.length))return d;var g=-1,_=[],b=a.length;for(u=oe(u,3);++g<b;){var R=a[g];u(R,g,a)&&(d.push(R),_.push(g))}return dE(a,_),d}function yg(a){return a==null?a:JO.call(a)}function s2(a,u,d){var g=a==null?0:a.length;return g?(d&&typeof d!="number"&&Yt(a,u,d)?(u=0,d=g):(u=u==null?0:ge(u),d=d===n?g:ge(d)),Wn(a,u,d)):[]}function o2(a,u){return Hc(a,u)}function a2(a,u,d){return ng(a,u,oe(d,2))}function l2(a,u){var d=a==null?0:a.length;if(d){var g=Hc(a,u);if(g<d&&ir(a[g],u))return g}return-1}function u2(a,u){return Hc(a,u,!0)}function c2(a,u,d){return ng(a,u,oe(d,2),!0)}function f2(a,u){var d=a==null?0:a.length;if(d){var g=Hc(a,u,!0)-1;if(ir(a[g],u))return g}return-1}function d2(a){return a&&a.length?pE(a):[]}function h2(a,u){return a&&a.length?pE(a,oe(u,2)):[]}function p2(a){var u=a==null?0:a.length;return u?Wn(a,1,u):[]}function g2(a,u,d){return a&&a.length?(u=d||u===n?1:ge(u),Wn(a,0,u<0?0:u)):[]}function m2(a,u,d){var g=a==null?0:a.length;return g?(u=d||u===n?1:ge(u),u=g-u,Wn(a,u<0?0:u,g)):[]}function v2(a,u){return a&&a.length?Kc(a,oe(u,3),!1,!0):[]}function _2(a,u){return a&&a.length?Kc(a,oe(u,3)):[]}var y2=ve(function(a){return Ai(Ot(a,1,ct,!0))}),w2=ve(function(a){var u=zn(a);return ct(u)&&(u=n),Ai(Ot(a,1,ct,!0),oe(u,2))}),E2=ve(function(a){var u=zn(a);return u=typeof u=="function"?u:n,Ai(Ot(a,1,ct,!0),n,u)});function S2(a){return a&&a.length?Ai(a):[]}function b2(a,u){return a&&a.length?Ai(a,oe(u,2)):[]}function C2(a,u){return u=typeof u=="function"?u:n,a&&a.length?Ai(a,n,u):[]}function wg(a){if(!(a&&a.length))return[];var u=0;return a=Si(a,function(d){if(ct(d))return u=mt(d.length,u),!0}),Mp(u,function(d){return Xe(a,Dp(d))})}function e1(a,u){if(!(a&&a.length))return[];var d=wg(a);return u==null?d:Xe(d,function(g){return wn(u,n,g)})}var I2=ve(function(a,u){return ct(a)?cl(a,u):[]}),T2=ve(function(a){return ig(Si(a,ct))}),A2=ve(function(a){var u=zn(a);return ct(u)&&(u=n),ig(Si(a,ct),oe(u,2))}),R2=ve(function(a){var u=zn(a);return u=typeof u=="function"?u:n,ig(Si(a,ct),n,u)}),k2=ve(wg);function x2(a,u){return _E(a||[],u||[],ul)}function N2(a,u){return _E(a||[],u||[],hl)}var O2=ve(function(a){var u=a.length,d=u>1?a[u-1]:n;return d=typeof d=="function"?(a.pop(),d):n,e1(a,d)});function t1(a){var u=S(a);return u.__chain__=!0,u}function P2(a,u){return u(a),a}function nf(a,u){return u(a)}var D2=Yr(function(a){var u=a.length,d=u?a[0]:0,g=this.__wrapped__,_=function(b){return Gp(b,a)};return u>1||this.__actions__.length||!(g instanceof Ie)||!Qr(d)?this.thru(_):(g=g.slice(d,+d+(u?1:0)),g.__actions__.push({func:nf,args:[_],thisArg:n}),new Bn(g,this.__chain__).thru(function(b){return u&&!b.length&&b.push(n),b}))});function L2(){return t1(this)}function F2(){return new Bn(this.value(),this.__chain__)}function M2(){this.__values__===n&&(this.__values__=g1(this.value()));var a=this.__index__>=this.__values__.length,u=a?n:this.__values__[this.__index__++];return{done:a,value:u}}function U2(){return this}function $2(a){for(var u,d=this;d instanceof jc;){var g=qE(d);g.__index__=0,g.__values__=n,u?_.__wrapped__=g:u=g;var _=g;d=d.__wrapped__}return _.__wrapped__=a,u}function B2(){var a=this.__wrapped__;if(a instanceof Ie){var u=a;return this.__actions__.length&&(u=new Ie(this)),u=u.reverse(),u.__actions__.push({func:nf,args:[yg],thisArg:n}),new Bn(u,this.__chain__)}return this.thru(yg)}function j2(){return vE(this.__wrapped__,this.__actions__)}var W2=qc(function(a,u,d){Le.call(a,d)?++a[d]:Kr(a,d,1)});function z2(a,u,d){var g=he(a)?xw:PP;return d&&Yt(a,u,d)&&(u=n),g(a,oe(u,3))}function V2(a,u){var d=he(a)?Si:eE;return d(a,oe(u,3))}var G2=RE(YE),H2=RE(QE);function K2(a,u){return Ot(rf(a,u),1)}function q2(a,u){return Ot(rf(a,u),Je)}function Y2(a,u,d){return d=d===n?1:ge(d),Ot(rf(a,u),d)}function n1(a,u){var d=he(a)?Un:Ti;return d(a,oe(u,3))}function r1(a,u){var d=he(a)?pO:Zw;return d(a,oe(u,3))}var Q2=qc(function(a,u,d){Le.call(a,d)?a[d].push(u):Kr(a,d,[u])});function J2(a,u,d,g){a=an(a)?a:Lo(a),d=d&&!g?ge(d):0;var _=a.length;return d<0&&(d=mt(_+d,0)),uf(a)?d<=_&&a.indexOf(u,d)>-1:!!_&&bo(a,u,d)>-1}var X2=ve(function(a,u,d){var g=-1,_=typeof u=="function",b=an(a)?L(a.length):[];return Ti(a,function(R){b[++g]=_?wn(u,R,d):fl(R,u,d)}),b}),Z2=qc(function(a,u,d){Kr(a,d,u)});function rf(a,u){var d=he(a)?Xe:oE;return d(a,oe(u,3))}function eL(a,u,d,g){return a==null?[]:(he(u)||(u=u==null?[]:[u]),d=g?n:d,he(d)||(d=d==null?[]:[d]),cE(a,u,d))}var tL=qc(function(a,u,d){a[d?0:1].push(u)},function(){return[[],[]]});function nL(a,u,d){var g=he(a)?Op:Dw,_=arguments.length<3;return g(a,oe(u,4),d,_,Ti)}function rL(a,u,d){var g=he(a)?gO:Dw,_=arguments.length<3;return g(a,oe(u,4),d,_,Zw)}function iL(a,u){var d=he(a)?Si:eE;return d(a,af(oe(u,3)))}function sL(a){var u=he(a)?Yw:JP;return u(a)}function oL(a,u,d){(d?Yt(a,u,d):u===n)?u=1:u=ge(u);var g=he(a)?RP:XP;return g(a,u)}function aL(a){var u=he(a)?kP:eD;return u(a)}function lL(a){if(a==null)return 0;if(an(a))return uf(a)?Io(a):a.length;var u=$t(a);return u==er||u==tr?a.size:Jp(a).length}function uL(a,u,d){var g=he(a)?Pp:tD;return d&&Yt(a,u,d)&&(u=n),g(a,oe(u,3))}var cL=ve(function(a,u){if(a==null)return[];var d=u.length;return d>1&&Yt(a,u[0],u[1])?u=[]:d>2&&Yt(u[0],u[1],u[2])&&(u=[u[0]]),cE(a,Ot(u,1),[])}),sf=VO||function(){return Nt.Date.now()};function fL(a,u){if(typeof u!="function")throw new $n(o);return a=ge(a),function(){if(--a<1)return u.apply(this,arguments)}}function i1(a,u,d){return u=d?n:u,u=a&&u==null?a.length:u,qr(a,B,n,n,n,n,u)}function s1(a,u){var d;if(typeof u!="function")throw new $n(o);return a=ge(a),function(){return--a>0&&(d=u.apply(this,arguments)),a<=1&&(u=n),d}}var Eg=ve(function(a,u,d){var g=A;if(d.length){var _=Ci(d,Po(Eg));g|=M}return qr(a,g,u,d,_)}),o1=ve(function(a,u,d){var g=A|v;if(d.length){var _=Ci(d,Po(o1));g|=M}return qr(u,g,a,d,_)});function a1(a,u,d){u=d?n:u;var g=qr(a,I,n,n,n,n,n,u);return g.placeholder=a1.placeholder,g}function l1(a,u,d){u=d?n:u;var g=qr(a,x,n,n,n,n,n,u);return g.placeholder=l1.placeholder,g}function u1(a,u,d){var g,_,b,R,N,P,U=0,$=!1,j=!1,J=!0;if(typeof a!="function")throw new $n(o);u=Vn(u)||0,tt(d)&&($=!!d.leading,j="maxWait"in d,b=j?mt(Vn(d.maxWait)||0,u):b,J="trailing"in d?!!d.trailing:J);function te(ft){var sr=g,Zr=_;return g=_=n,U=ft,R=a.apply(Zr,sr),R}function ae(ft){return U=ft,N=ml(Ee,u),$?te(ft):R}function me(ft){var sr=ft-P,Zr=ft-U,R1=u-sr;return j?Ut(R1,b-Zr):R1}function le(ft){var sr=ft-P,Zr=ft-U;return P===n||sr>=u||sr<0||j&&Zr>=b}function Ee(){var ft=sf();if(le(ft))return Ae(ft);N=ml(Ee,me(ft))}function Ae(ft){return N=n,J&&g?te(ft):(g=_=n,R)}function Cn(){N!==n&&yE(N),U=0,g=P=_=N=n}function Qt(){return N===n?R:Ae(sf())}function In(){var ft=sf(),sr=le(ft);if(g=arguments,_=this,P=ft,sr){if(N===n)return ae(P);if(j)return yE(N),N=ml(Ee,u),te(P)}return N===n&&(N=ml(Ee,u)),R}return In.cancel=Cn,In.flush=Qt,In}var dL=ve(function(a,u){return Xw(a,1,u)}),hL=ve(function(a,u,d){return Xw(a,Vn(u)||0,d)});function pL(a){return qr(a,q)}function of(a,u){if(typeof a!="function"||u!=null&&typeof u!="function")throw new $n(o);var d=function(){var g=arguments,_=u?u.apply(this,g):g[0],b=d.cache;if(b.has(_))return b.get(_);var R=a.apply(this,g);return d.cache=b.set(_,R)||b,R};return d.cache=new(of.Cache||Hr),d}of.Cache=Hr;function af(a){if(typeof a!="function")throw new $n(o);return function(){var u=arguments;switch(u.length){case 0:return!a.call(this);case 1:return!a.call(this,u[0]);case 2:return!a.call(this,u[0],u[1]);case 3:return!a.call(this,u[0],u[1],u[2])}return!a.apply(this,u)}}function gL(a){return s1(2,a)}var mL=nD(function(a,u){u=u.length==1&&he(u[0])?Xe(u[0],En(oe())):Xe(Ot(u,1),En(oe()));var d=u.length;return ve(function(g){for(var _=-1,b=Ut(g.length,d);++_<b;)g[_]=u[_].call(this,g[_]);return wn(a,this,g)})}),Sg=ve(function(a,u){var d=Ci(u,Po(Sg));return qr(a,M,n,u,d)}),c1=ve(function(a,u){var d=Ci(u,Po(c1));return qr(a,W,n,u,d)}),vL=Yr(function(a,u){return qr(a,Q,n,n,n,u)});function _L(a,u){if(typeof a!="function")throw new $n(o);return u=u===n?u:ge(u),ve(a,u)}function yL(a,u){if(typeof a!="function")throw new $n(o);return u=u==null?0:mt(ge(u),0),ve(function(d){var g=d[u],_=ki(d,0,u);return g&&bi(_,g),wn(a,this,_)})}function wL(a,u,d){var g=!0,_=!0;if(typeof a!="function")throw new $n(o);return tt(d)&&(g="leading"in d?!!d.leading:g,_="trailing"in d?!!d.trailing:_),u1(a,u,{leading:g,maxWait:u,trailing:_})}function EL(a){return i1(a,1)}function SL(a,u){return Sg(og(u),a)}function bL(){if(!arguments.length)return[];var a=arguments[0];return he(a)?a:[a]}function CL(a){return jn(a,y)}function IL(a,u){return u=typeof u=="function"?u:n,jn(a,y,u)}function TL(a){return jn(a,p|y)}function AL(a,u){return u=typeof u=="function"?u:n,jn(a,p|y,u)}function RL(a,u){return u==null||Jw(a,u,bt(u))}function ir(a,u){return a===u||a!==a&&u!==u}var kL=Xc(qp),xL=Xc(function(a,u){return a>=u}),Ms=rE(function(){return arguments}())?rE:function(a){return at(a)&&Le.call(a,"callee")&&!zw.call(a,"callee")},he=L.isArray,NL=Cw?En(Cw):$P;function an(a){return a!=null&&lf(a.length)&&!Jr(a)}function ct(a){return at(a)&&an(a)}function OL(a){return a===!0||a===!1||at(a)&&qt(a)==zr}var xi=HO||Pg,PL=Iw?En(Iw):BP;function DL(a){return at(a)&&a.nodeType===1&&!vl(a)}function LL(a){if(a==null)return!0;if(an(a)&&(he(a)||typeof a=="string"||typeof a.splice=="function"||xi(a)||Do(a)||Ms(a)))return!a.length;var u=$t(a);if(u==er||u==tr)return!a.size;if(gl(a))return!Jp(a).length;for(var d in a)if(Le.call(a,d))return!1;return!0}function FL(a,u){return dl(a,u)}function ML(a,u,d){d=typeof d=="function"?d:n;var g=d?d(a,u):n;return g===n?dl(a,u,n,d):!!g}function bg(a){if(!at(a))return!1;var u=qt(a);return u==As||u==Ja||typeof a.message=="string"&&typeof a.name=="string"&&!vl(a)}function UL(a){return typeof a=="number"&&Gw(a)}function Jr(a){if(!tt(a))return!1;var u=qt(a);return u==Rs||u==Xy||u==Wr||u==lN}function f1(a){return typeof a=="number"&&a==ge(a)}function lf(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Y}function tt(a){var u=typeof a;return a!=null&&(u=="object"||u=="function")}function at(a){return a!=null&&typeof a=="object"}var d1=Tw?En(Tw):WP;function $L(a,u){return a===u||Qp(a,u,hg(u))}function BL(a,u,d){return d=typeof d=="function"?d:n,Qp(a,u,hg(u),d)}function jL(a){return h1(a)&&a!=+a}function WL(a){if(ID(a))throw new de(s);return iE(a)}function zL(a){return a===null}function VL(a){return a==null}function h1(a){return typeof a=="number"||at(a)&&qt(a)==Xa}function vl(a){if(!at(a)||qt(a)!=Vr)return!1;var u=Dc(a);if(u===null)return!0;var d=Le.call(u,"constructor")&&u.constructor;return typeof d=="function"&&d instanceof d&&xc.call(d)==BO}var Cg=Aw?En(Aw):zP;function GL(a){return f1(a)&&a>=-Y&&a<=Y}var p1=Rw?En(Rw):VP;function uf(a){return typeof a=="string"||!he(a)&&at(a)&&qt(a)==el}function bn(a){return typeof a=="symbol"||at(a)&&qt(a)==Ec}var Do=kw?En(kw):GP;function HL(a){return a===n}function KL(a){return at(a)&&$t(a)==tl}function qL(a){return at(a)&&qt(a)==cN}var YL=Xc(Xp),QL=Xc(function(a,u){return a<=u});function g1(a){if(!a)return[];if(an(a))return uf(a)?nr(a):on(a);if(il&&a[il])return RO(a[il]());var u=$t(a),d=u==er?$p:u==tr?Ac:Lo;return d(a)}function Xr(a){if(!a)return a===0?a:0;if(a=Vn(a),a===Je||a===-Je){var u=a<0?-1:1;return u*ee}return a===a?a:0}function ge(a){var u=Xr(a),d=u%1;return u===u?d?u-d:u:0}function m1(a){return a?Ps(ge(a),0,se):0}function Vn(a){if(typeof a=="number")return a;if(bn(a))return re;if(tt(a)){var u=typeof a.valueOf=="function"?a.valueOf():a;a=tt(u)?u+"":u}if(typeof a!="string")return a===0?a:+a;a=Lw(a);var d=NN.test(a);return d||PN.test(a)?fO(a.slice(2),d?2:8):xN.test(a)?re:+a}function v1(a){return br(a,ln(a))}function JL(a){return a?Ps(ge(a),-Y,Y):a===0?a:0}function Oe(a){return a==null?"":Sn(a)}var XL=No(function(a,u){if(gl(u)||an(u)){br(u,bt(u),a);return}for(var d in u)Le.call(u,d)&&ul(a,d,u[d])}),_1=No(function(a,u){br(u,ln(u),a)}),cf=No(function(a,u,d,g){br(u,ln(u),a,g)}),ZL=No(function(a,u,d,g){br(u,bt(u),a,g)}),eF=Yr(Gp);function tF(a,u){var d=xo(a);return u==null?d:Qw(d,u)}var nF=ve(function(a,u){a=$e(a);var d=-1,g=u.length,_=g>2?u[2]:n;for(_&&Yt(u[0],u[1],_)&&(g=1);++d<g;)for(var b=u[d],R=ln(b),N=-1,P=R.length;++N<P;){var U=R[N],$=a[U];($===n||ir($,Ao[U])&&!Le.call(a,U))&&(a[U]=b[U])}return a}),rF=ve(function(a){return a.push(n,LE),wn(y1,n,a)});function iF(a,u){return Nw(a,oe(u,3),Sr)}function sF(a,u){return Nw(a,oe(u,3),Kp)}function oF(a,u){return a==null?a:Hp(a,oe(u,3),ln)}function aF(a,u){return a==null?a:tE(a,oe(u,3),ln)}function lF(a,u){return a&&Sr(a,oe(u,3))}function uF(a,u){return a&&Kp(a,oe(u,3))}function cF(a){return a==null?[]:Vc(a,bt(a))}function fF(a){return a==null?[]:Vc(a,ln(a))}function Ig(a,u,d){var g=a==null?n:Ds(a,u);return g===n?d:g}function dF(a,u){return a!=null&&UE(a,u,LP)}function Tg(a,u){return a!=null&&UE(a,u,FP)}var hF=xE(function(a,u,d){u!=null&&typeof u.toString!="function"&&(u=Nc.call(u)),a[u]=d},Rg(un)),pF=xE(function(a,u,d){u!=null&&typeof u.toString!="function"&&(u=Nc.call(u)),Le.call(a,u)?a[u].push(d):a[u]=[d]},oe),gF=ve(fl);function bt(a){return an(a)?qw(a):Jp(a)}function ln(a){return an(a)?qw(a,!0):HP(a)}function mF(a,u){var d={};return u=oe(u,3),Sr(a,function(g,_,b){Kr(d,u(g,_,b),g)}),d}function vF(a,u){var d={};return u=oe(u,3),Sr(a,function(g,_,b){Kr(d,_,u(g,_,b))}),d}var _F=No(function(a,u,d){Gc(a,u,d)}),y1=No(function(a,u,d,g){Gc(a,u,d,g)}),yF=Yr(function(a,u){var d={};if(a==null)return d;var g=!1;u=Xe(u,function(b){return b=Ri(b,a),g||(g=b.length>1),b}),br(a,fg(a),d),g&&(d=jn(d,p|m|y,hD));for(var _=u.length;_--;)rg(d,u[_]);return d});function wF(a,u){return w1(a,af(oe(u)))}var EF=Yr(function(a,u){return a==null?{}:qP(a,u)});function w1(a,u){if(a==null)return{};var d=Xe(fg(a),function(g){return[g]});return u=oe(u),fE(a,d,function(g,_){return u(g,_[0])})}function SF(a,u,d){u=Ri(u,a);var g=-1,_=u.length;for(_||(_=1,a=n);++g<_;){var b=a==null?n:a[Cr(u[g])];b===n&&(g=_,b=d),a=Jr(b)?b.call(a):b}return a}function bF(a,u,d){return a==null?a:hl(a,u,d)}function CF(a,u,d,g){return g=typeof g=="function"?g:n,a==null?a:hl(a,u,d,g)}var E1=PE(bt),S1=PE(ln);function IF(a,u,d){var g=he(a),_=g||xi(a)||Do(a);if(u=oe(u,4),d==null){var b=a&&a.constructor;_?d=g?new b:[]:tt(a)?d=Jr(b)?xo(Dc(a)):{}:d={}}return(_?Un:Sr)(a,function(R,N,P){return u(d,R,N,P)}),d}function TF(a,u){return a==null?!0:rg(a,u)}function AF(a,u,d){return a==null?a:mE(a,u,og(d))}function RF(a,u,d,g){return g=typeof g=="function"?g:n,a==null?a:mE(a,u,og(d),g)}function Lo(a){return a==null?[]:Up(a,bt(a))}function kF(a){return a==null?[]:Up(a,ln(a))}function xF(a,u,d){return d===n&&(d=u,u=n),d!==n&&(d=Vn(d),d=d===d?d:0),u!==n&&(u=Vn(u),u=u===u?u:0),Ps(Vn(a),u,d)}function NF(a,u,d){return u=Xr(u),d===n?(d=u,u=0):d=Xr(d),a=Vn(a),MP(a,u,d)}function OF(a,u,d){if(d&&typeof d!="boolean"&&Yt(a,u,d)&&(u=d=n),d===n&&(typeof u=="boolean"?(d=u,u=n):typeof a=="boolean"&&(d=a,a=n)),a===n&&u===n?(a=0,u=1):(a=Xr(a),u===n?(u=a,a=0):u=Xr(u)),a>u){var g=a;a=u,u=g}if(d||a%1||u%1){var _=Hw();return Ut(a+_*(u-a+cO("1e-"+((_+"").length-1))),u)}return eg(a,u)}var PF=Oo(function(a,u,d){return u=u.toLowerCase(),a+(d?b1(u):u)});function b1(a){return Ag(Oe(a).toLowerCase())}function C1(a){return a=Oe(a),a&&a.replace(LN,bO).replace(eO,"")}function DF(a,u,d){a=Oe(a),u=Sn(u);var g=a.length;d=d===n?g:Ps(ge(d),0,g);var _=d;return d-=u.length,d>=0&&a.slice(d,_)==u}function LF(a){return a=Oe(a),a&&gN.test(a)?a.replace(tw,CO):a}function FF(a){return a=Oe(a),a&&EN.test(a)?a.replace(Sp,"\\$&"):a}var MF=Oo(function(a,u,d){return a+(d?"-":"")+u.toLowerCase()}),UF=Oo(function(a,u,d){return a+(d?" ":"")+u.toLowerCase()}),$F=AE("toLowerCase");function BF(a,u,d){a=Oe(a),u=ge(u);var g=u?Io(a):0;if(!u||g>=u)return a;var _=(u-g)/2;return Jc(Uc(_),d)+a+Jc(Mc(_),d)}function jF(a,u,d){a=Oe(a),u=ge(u);var g=u?Io(a):0;return u&&g<u?a+Jc(u-g,d):a}function WF(a,u,d){a=Oe(a),u=ge(u);var g=u?Io(a):0;return u&&g<u?Jc(u-g,d)+a:a}function zF(a,u,d){return d||u==null?u=0:u&&(u=+u),QO(Oe(a).replace(bp,""),u||0)}function VF(a,u,d){return(d?Yt(a,u,d):u===n)?u=1:u=ge(u),tg(Oe(a),u)}function GF(){var a=arguments,u=Oe(a[0]);return a.length<3?u:u.replace(a[1],a[2])}var HF=Oo(function(a,u,d){return a+(d?"_":"")+u.toLowerCase()});function KF(a,u,d){return d&&typeof d!="number"&&Yt(a,u,d)&&(u=d=n),d=d===n?se:d>>>0,d?(a=Oe(a),a&&(typeof u=="string"||u!=null&&!Cg(u))&&(u=Sn(u),!u&&Co(a))?ki(nr(a),0,d):a.split(u,d)):[]}var qF=Oo(function(a,u,d){return a+(d?" ":"")+Ag(u)});function YF(a,u,d){return a=Oe(a),d=d==null?0:Ps(ge(d),0,a.length),u=Sn(u),a.slice(d,d+u.length)==u}function QF(a,u,d){var g=S.templateSettings;d&&Yt(a,u,d)&&(u=n),a=Oe(a),u=cf({},u,g,DE);var _=cf({},u.imports,g.imports,DE),b=bt(_),R=Up(_,b),N,P,U=0,$=u.interpolate||Sc,j="__p += '",J=Bp((u.escape||Sc).source+"|"+$.source+"|"+($===nw?kN:Sc).source+"|"+(u.evaluate||Sc).source+"|$","g"),te="//# sourceURL="+(Le.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++sO+"]")+`
`;a.replace(J,function(le,Ee,Ae,Cn,Qt,In){return Ae||(Ae=Cn),j+=a.slice(U,In).replace(FN,IO),Ee&&(N=!0,j+=`' +
__e(`+Ee+`) +
'`),Qt&&(P=!0,j+=`';
`+Qt+`;
__p += '`),Ae&&(j+=`' +
((__t = (`+Ae+`)) == null ? '' : __t) +
'`),U=In+le.length,le}),j+=`';
`;var ae=Le.call(u,"variable")&&u.variable;if(!ae)j=`with (obj) {
`+j+`
}
`;else if(AN.test(ae))throw new de(l);j=(P?j.replace(fN,""):j).replace(dN,"$1").replace(hN,"$1;"),j="function("+(ae||"obj")+`) {
`+(ae?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(N?", __e = _.escape":"")+(P?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+j+`return __p
}`;var me=T1(function(){return Ne(b,te+"return "+j).apply(n,R)});if(me.source=j,bg(me))throw me;return me}function JF(a){return Oe(a).toLowerCase()}function XF(a){return Oe(a).toUpperCase()}function ZF(a,u,d){if(a=Oe(a),a&&(d||u===n))return Lw(a);if(!a||!(u=Sn(u)))return a;var g=nr(a),_=nr(u),b=Fw(g,_),R=Mw(g,_)+1;return ki(g,b,R).join("")}function eM(a,u,d){if(a=Oe(a),a&&(d||u===n))return a.slice(0,$w(a)+1);if(!a||!(u=Sn(u)))return a;var g=nr(a),_=Mw(g,nr(u))+1;return ki(g,0,_).join("")}function tM(a,u,d){if(a=Oe(a),a&&(d||u===n))return a.replace(bp,"");if(!a||!(u=Sn(u)))return a;var g=nr(a),_=Fw(g,nr(u));return ki(g,_).join("")}function nM(a,u){var d=H,g=pe;if(tt(u)){var _="separator"in u?u.separator:_;d="length"in u?ge(u.length):d,g="omission"in u?Sn(u.omission):g}a=Oe(a);var b=a.length;if(Co(a)){var R=nr(a);b=R.length}if(d>=b)return a;var N=d-Io(g);if(N<1)return g;var P=R?ki(R,0,N).join(""):a.slice(0,N);if(_===n)return P+g;if(R&&(N+=P.length-N),Cg(_)){if(a.slice(N).search(_)){var U,$=P;for(_.global||(_=Bp(_.source,Oe(rw.exec(_))+"g")),_.lastIndex=0;U=_.exec($);)var j=U.index;P=P.slice(0,j===n?N:j)}}else if(a.indexOf(Sn(_),N)!=N){var J=P.lastIndexOf(_);J>-1&&(P=P.slice(0,J))}return P+g}function rM(a){return a=Oe(a),a&&pN.test(a)?a.replace(ew,OO):a}var iM=Oo(function(a,u,d){return a+(d?" ":"")+u.toUpperCase()}),Ag=AE("toUpperCase");function I1(a,u,d){return a=Oe(a),u=d?n:u,u===n?AO(a)?LO(a):_O(a):a.match(u)||[]}var T1=ve(function(a,u){try{return wn(a,n,u)}catch(d){return bg(d)?d:new de(d)}}),sM=Yr(function(a,u){return Un(u,function(d){d=Cr(d),Kr(a,d,Eg(a[d],a))}),a});function oM(a){var u=a==null?0:a.length,d=oe();return a=u?Xe(a,function(g){if(typeof g[1]!="function")throw new $n(o);return[d(g[0]),g[1]]}):[],ve(function(g){for(var _=-1;++_<u;){var b=a[_];if(wn(b[0],this,g))return wn(b[1],this,g)}})}function aM(a){return OP(jn(a,p))}function Rg(a){return function(){return a}}function lM(a,u){return a==null||a!==a?u:a}var uM=kE(),cM=kE(!0);function un(a){return a}function kg(a){return sE(typeof a=="function"?a:jn(a,p))}function fM(a){return aE(jn(a,p))}function dM(a,u){return lE(a,jn(u,p))}var hM=ve(function(a,u){return function(d){return fl(d,a,u)}}),pM=ve(function(a,u){return function(d){return fl(a,d,u)}});function xg(a,u,d){var g=bt(u),_=Vc(u,g);d==null&&!(tt(u)&&(_.length||!g.length))&&(d=u,u=a,a=this,_=Vc(u,bt(u)));var b=!(tt(d)&&"chain"in d)||!!d.chain,R=Jr(a);return Un(_,function(N){var P=u[N];a[N]=P,R&&(a.prototype[N]=function(){var U=this.__chain__;if(b||U){var $=a(this.__wrapped__),j=$.__actions__=on(this.__actions__);return j.push({func:P,args:arguments,thisArg:a}),$.__chain__=U,$}return P.apply(a,bi([this.value()],arguments))})}),a}function gM(){return Nt._===this&&(Nt._=jO),this}function Ng(){}function mM(a){return a=ge(a),ve(function(u){return uE(u,a)})}var vM=lg(Xe),_M=lg(xw),yM=lg(Pp);function A1(a){return gg(a)?Dp(Cr(a)):YP(a)}function wM(a){return function(u){return a==null?n:Ds(a,u)}}var EM=NE(),SM=NE(!0);function Og(){return[]}function Pg(){return!1}function bM(){return{}}function CM(){return""}function IM(){return!0}function TM(a,u){if(a=ge(a),a<1||a>Y)return[];var d=se,g=Ut(a,se);u=oe(u),a-=se;for(var _=Mp(g,u);++d<a;)u(d);return _}function AM(a){return he(a)?Xe(a,Cr):bn(a)?[a]:on(KE(Oe(a)))}function RM(a){var u=++$O;return Oe(a)+u}var kM=Qc(function(a,u){return a+u},0),xM=ug("ceil"),NM=Qc(function(a,u){return a/u},1),OM=ug("floor");function PM(a){return a&&a.length?zc(a,un,qp):n}function DM(a,u){return a&&a.length?zc(a,oe(u,2),qp):n}function LM(a){return Pw(a,un)}function FM(a,u){return Pw(a,oe(u,2))}function MM(a){return a&&a.length?zc(a,un,Xp):n}function UM(a,u){return a&&a.length?zc(a,oe(u,2),Xp):n}var $M=Qc(function(a,u){return a*u},1),BM=ug("round"),jM=Qc(function(a,u){return a-u},0);function WM(a){return a&&a.length?Fp(a,un):0}function zM(a,u){return a&&a.length?Fp(a,oe(u,2)):0}return S.after=fL,S.ary=i1,S.assign=XL,S.assignIn=_1,S.assignInWith=cf,S.assignWith=ZL,S.at=eF,S.before=s1,S.bind=Eg,S.bindAll=sM,S.bindKey=o1,S.castArray=bL,S.chain=t1,S.chunk=OD,S.compact=PD,S.concat=DD,S.cond=oM,S.conforms=aM,S.constant=Rg,S.countBy=W2,S.create=tF,S.curry=a1,S.curryRight=l1,S.debounce=u1,S.defaults=nF,S.defaultsDeep=rF,S.defer=dL,S.delay=hL,S.difference=LD,S.differenceBy=FD,S.differenceWith=MD,S.drop=UD,S.dropRight=$D,S.dropRightWhile=BD,S.dropWhile=jD,S.fill=WD,S.filter=V2,S.flatMap=K2,S.flatMapDeep=q2,S.flatMapDepth=Y2,S.flatten=JE,S.flattenDeep=zD,S.flattenDepth=VD,S.flip=pL,S.flow=uM,S.flowRight=cM,S.fromPairs=GD,S.functions=cF,S.functionsIn=fF,S.groupBy=Q2,S.initial=KD,S.intersection=qD,S.intersectionBy=YD,S.intersectionWith=QD,S.invert=hF,S.invertBy=pF,S.invokeMap=X2,S.iteratee=kg,S.keyBy=Z2,S.keys=bt,S.keysIn=ln,S.map=rf,S.mapKeys=mF,S.mapValues=vF,S.matches=fM,S.matchesProperty=dM,S.memoize=of,S.merge=_F,S.mergeWith=y1,S.method=hM,S.methodOf=pM,S.mixin=xg,S.negate=af,S.nthArg=mM,S.omit=yF,S.omitBy=wF,S.once=gL,S.orderBy=eL,S.over=vM,S.overArgs=mL,S.overEvery=_M,S.overSome=yM,S.partial=Sg,S.partialRight=c1,S.partition=tL,S.pick=EF,S.pickBy=w1,S.property=A1,S.propertyOf=wM,S.pull=e2,S.pullAll=ZE,S.pullAllBy=t2,S.pullAllWith=n2,S.pullAt=r2,S.range=EM,S.rangeRight=SM,S.rearg=vL,S.reject=iL,S.remove=i2,S.rest=_L,S.reverse=yg,S.sampleSize=oL,S.set=bF,S.setWith=CF,S.shuffle=aL,S.slice=s2,S.sortBy=cL,S.sortedUniq=d2,S.sortedUniqBy=h2,S.split=KF,S.spread=yL,S.tail=p2,S.take=g2,S.takeRight=m2,S.takeRightWhile=v2,S.takeWhile=_2,S.tap=P2,S.throttle=wL,S.thru=nf,S.toArray=g1,S.toPairs=E1,S.toPairsIn=S1,S.toPath=AM,S.toPlainObject=v1,S.transform=IF,S.unary=EL,S.union=y2,S.unionBy=w2,S.unionWith=E2,S.uniq=S2,S.uniqBy=b2,S.uniqWith=C2,S.unset=TF,S.unzip=wg,S.unzipWith=e1,S.update=AF,S.updateWith=RF,S.values=Lo,S.valuesIn=kF,S.without=I2,S.words=I1,S.wrap=SL,S.xor=T2,S.xorBy=A2,S.xorWith=R2,S.zip=k2,S.zipObject=x2,S.zipObjectDeep=N2,S.zipWith=O2,S.entries=E1,S.entriesIn=S1,S.extend=_1,S.extendWith=cf,xg(S,S),S.add=kM,S.attempt=T1,S.camelCase=PF,S.capitalize=b1,S.ceil=xM,S.clamp=xF,S.clone=CL,S.cloneDeep=TL,S.cloneDeepWith=AL,S.cloneWith=IL,S.conformsTo=RL,S.deburr=C1,S.defaultTo=lM,S.divide=NM,S.endsWith=DF,S.eq=ir,S.escape=LF,S.escapeRegExp=FF,S.every=z2,S.find=G2,S.findIndex=YE,S.findKey=iF,S.findLast=H2,S.findLastIndex=QE,S.findLastKey=sF,S.floor=OM,S.forEach=n1,S.forEachRight=r1,S.forIn=oF,S.forInRight=aF,S.forOwn=lF,S.forOwnRight=uF,S.get=Ig,S.gt=kL,S.gte=xL,S.has=dF,S.hasIn=Tg,S.head=XE,S.identity=un,S.includes=J2,S.indexOf=HD,S.inRange=NF,S.invoke=gF,S.isArguments=Ms,S.isArray=he,S.isArrayBuffer=NL,S.isArrayLike=an,S.isArrayLikeObject=ct,S.isBoolean=OL,S.isBuffer=xi,S.isDate=PL,S.isElement=DL,S.isEmpty=LL,S.isEqual=FL,S.isEqualWith=ML,S.isError=bg,S.isFinite=UL,S.isFunction=Jr,S.isInteger=f1,S.isLength=lf,S.isMap=d1,S.isMatch=$L,S.isMatchWith=BL,S.isNaN=jL,S.isNative=WL,S.isNil=VL,S.isNull=zL,S.isNumber=h1,S.isObject=tt,S.isObjectLike=at,S.isPlainObject=vl,S.isRegExp=Cg,S.isSafeInteger=GL,S.isSet=p1,S.isString=uf,S.isSymbol=bn,S.isTypedArray=Do,S.isUndefined=HL,S.isWeakMap=KL,S.isWeakSet=qL,S.join=JD,S.kebabCase=MF,S.last=zn,S.lastIndexOf=XD,S.lowerCase=UF,S.lowerFirst=$F,S.lt=YL,S.lte=QL,S.max=PM,S.maxBy=DM,S.mean=LM,S.meanBy=FM,S.min=MM,S.minBy=UM,S.stubArray=Og,S.stubFalse=Pg,S.stubObject=bM,S.stubString=CM,S.stubTrue=IM,S.multiply=$M,S.nth=ZD,S.noConflict=gM,S.noop=Ng,S.now=sf,S.pad=BF,S.padEnd=jF,S.padStart=WF,S.parseInt=zF,S.random=OF,S.reduce=nL,S.reduceRight=rL,S.repeat=VF,S.replace=GF,S.result=SF,S.round=BM,S.runInContext=O,S.sample=sL,S.size=lL,S.snakeCase=HF,S.some=uL,S.sortedIndex=o2,S.sortedIndexBy=a2,S.sortedIndexOf=l2,S.sortedLastIndex=u2,S.sortedLastIndexBy=c2,S.sortedLastIndexOf=f2,S.startCase=qF,S.startsWith=YF,S.subtract=jM,S.sum=WM,S.sumBy=zM,S.template=QF,S.times=TM,S.toFinite=Xr,S.toInteger=ge,S.toLength=m1,S.toLower=JF,S.toNumber=Vn,S.toSafeInteger=JL,S.toString=Oe,S.toUpper=XF,S.trim=ZF,S.trimEnd=eM,S.trimStart=tM,S.truncate=nM,S.unescape=rM,S.uniqueId=RM,S.upperCase=iM,S.upperFirst=Ag,S.each=n1,S.eachRight=r1,S.first=XE,xg(S,function(){var a={};return Sr(S,function(u,d){Le.call(S.prototype,d)||(a[d]=u)}),a}(),{chain:!1}),S.VERSION=r,Un(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){S[a].placeholder=S}),Un(["drop","take"],function(a,u){Ie.prototype[a]=function(d){d=d===n?1:mt(ge(d),0);var g=this.__filtered__&&!u?new Ie(this):this.clone();return g.__filtered__?g.__takeCount__=Ut(d,g.__takeCount__):g.__views__.push({size:Ut(d,se),type:a+(g.__dir__<0?"Right":"")}),g},Ie.prototype[a+"Right"]=function(d){return this.reverse()[a](d).reverse()}}),Un(["filter","map","takeWhile"],function(a,u){var d=u+1,g=d==we||d==xt;Ie.prototype[a]=function(_){var b=this.clone();return b.__iteratees__.push({iteratee:oe(_,3),type:d}),b.__filtered__=b.__filtered__||g,b}}),Un(["head","last"],function(a,u){var d="take"+(u?"Right":"");Ie.prototype[a]=function(){return this[d](1).value()[0]}}),Un(["initial","tail"],function(a,u){var d="drop"+(u?"":"Right");Ie.prototype[a]=function(){return this.__filtered__?new Ie(this):this[d](1)}}),Ie.prototype.compact=function(){return this.filter(un)},Ie.prototype.find=function(a){return this.filter(a).head()},Ie.prototype.findLast=function(a){return this.reverse().find(a)},Ie.prototype.invokeMap=ve(function(a,u){return typeof a=="function"?new Ie(this):this.map(function(d){return fl(d,a,u)})}),Ie.prototype.reject=function(a){return this.filter(af(oe(a)))},Ie.prototype.slice=function(a,u){a=ge(a);var d=this;return d.__filtered__&&(a>0||u<0)?new Ie(d):(a<0?d=d.takeRight(-a):a&&(d=d.drop(a)),u!==n&&(u=ge(u),d=u<0?d.dropRight(-u):d.take(u-a)),d)},Ie.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Ie.prototype.toArray=function(){return this.take(se)},Sr(Ie.prototype,function(a,u){var d=/^(?:filter|find|map|reject)|While$/.test(u),g=/^(?:head|last)$/.test(u),_=S[g?"take"+(u=="last"?"Right":""):u],b=g||/^find/.test(u);_&&(S.prototype[u]=function(){var R=this.__wrapped__,N=g?[1]:arguments,P=R instanceof Ie,U=N[0],$=P||he(R),j=function(Ee){var Ae=_.apply(S,bi([Ee],N));return g&&J?Ae[0]:Ae};$&&d&&typeof U=="function"&&U.length!=1&&(P=$=!1);var J=this.__chain__,te=!!this.__actions__.length,ae=b&&!J,me=P&&!te;if(!b&&$){R=me?R:new Ie(this);var le=a.apply(R,N);return le.__actions__.push({func:nf,args:[j],thisArg:n}),new Bn(le,J)}return ae&&me?a.apply(this,N):(le=this.thru(j),ae?g?le.value()[0]:le.value():le)})}),Un(["pop","push","shift","sort","splice","unshift"],function(a){var u=Rc[a],d=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",g=/^(?:pop|shift)$/.test(a);S.prototype[a]=function(){var _=arguments;if(g&&!this.__chain__){var b=this.value();return u.apply(he(b)?b:[],_)}return this[d](function(R){return u.apply(he(R)?R:[],_)})}}),Sr(Ie.prototype,function(a,u){var d=S[u];if(d){var g=d.name+"";Le.call(ko,g)||(ko[g]=[]),ko[g].push({name:u,func:d})}}),ko[Yc(n,v).name]=[{name:"wrapper",func:n}],Ie.prototype.clone=rP,Ie.prototype.reverse=iP,Ie.prototype.value=sP,S.prototype.at=D2,S.prototype.chain=L2,S.prototype.commit=F2,S.prototype.next=M2,S.prototype.plant=$2,S.prototype.reverse=B2,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=j2,S.prototype.first=S.prototype.head,il&&(S.prototype[il]=U2),S},To=FO();ks?((ks.exports=To)._=To,kp._=To):Nt._=To}).call(_l)})(sW,zu);var oW="firebase",aW="9.17.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cs(oW,aW,"app");function Ok(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lW=Ok,Pk=new oc("auth","Firebase",Ok());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=new H0("@firebase/auth");function ed(t,...e){uC.logLevel<=Be.ERROR&&uC.error(`Auth (${ac}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,...e){throw Cy(t,...e)}function Dr(t,...e){return Cy(t,...e)}function uW(t,e,n){const r=Object.assign(Object.assign({},lW()),{[e]:n});return new oc("auth","Firebase",r).create(e,{appName:t.name})}function Cy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Pk.create(t,...e)}function ce(t,e,...n){if(!t)throw Cy(e,...n)}function oi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ed(e),new Error(e)}function gi(t,e){t||oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new Map;function ai(t){gi(t instanceof Function,"Expected a class definition");let e=cC.get(t);return e?(gi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cC.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cW(t,e){const n=q0(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(zd(s,e??{}))return i;Er(i,"already-initialized")}return n.initialize({options:e})}function fW(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ai);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function dW(){return fC()==="http:"||fC()==="https:"}function fC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dW()||D$()||"connection"in navigator)?navigator.onLine:!0}function pW(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n){this.shortDelay=e,this.longDelay=n,gi(n>e,"Short delay should be less than long delay!"),this.isMobile=G0()||nR()}get(){return hW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t,e){gi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mW=new gc(3e4,6e4);function Zh(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function mc(t,e,n,r,i={}){return Lk(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Ha(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),Dk.fetch()(Fk(t,t.config.apiHost,n,l),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function Lk(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},gW),e);try{const i=new vW(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Df(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,f]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Df(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Df(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Df(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw uW(t,h,f);Er(t,h)}}catch(i){if(i instanceof Is)throw i;Er(t,"network-request-failed")}}async function ep(t,e,n,r,i={}){const s=await mc(t,e,n,r,i);return"mfaPendingCredential"in s&&Er(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Fk(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Iy(t.config,i):`${t.config.apiScheme}://${i}`}class vW{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Dr(this.auth,"network-request-failed")),mW.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Df(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Dr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _W(t,e){return mc(t,"POST","/v1/accounts:delete",e)}async function yW(t,e){return mc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wW(t,e=!1){const n=Zn(t),r=await n.getIdToken(e),i=Ty(r);ce(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:fu(xm(i.auth_time)),issuedAtTime:fu(xm(i.iat)),expirationTime:fu(xm(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function xm(t){return Number(t)*1e3}function Ty(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ed("JWT malformed, contained fewer than 3 sections"),null;try{const i=jd(n);return i?JSON.parse(i):(ed("Failed to decode base64 JWT payload"),null)}catch(i){return ed("Caught error parsing JWT payload as JSON",i?.toString()),null}}function EW(t){const e=Ty(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Is&&SW(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function SW({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bW{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Vu(t,yW(n,{idToken:r}));ce(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?TW(s.providerUserInfo):[],l=IW(t.providerData,o),c=t.isAnonymous,f=!(t.email&&s.passwordHash)&&!l?.length,h=c?f:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Mk(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function CW(t){const e=Zn(t);await oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IW(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function TW(t){return t.map(e=>{var{providerId:n}=e,r=j0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AW(t,e){const n=await Lk(t,{},async()=>{const r=Ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Fk(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Dk.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):EW(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ce(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await AW(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Gu;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gu,this.toJSON())}_performRefresh(){return oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class eo{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=j0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bW(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Mk(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Vu(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wW(this,e)}reload(){return CW(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new eo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await oh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Vu(this,_W(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,c,f,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(l=n.tenantId)!==null&&l!==void 0?l:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,v=(f=n.createdAt)!==null&&f!==void 0?f:void 0,E=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:I,emailVerified:x,isAnonymous:M,providerData:W,stsTokenManager:B}=n;ce(I&&B,e,"internal-error");const Q=Gu.fromJSON(this.name,B);ce(typeof I=="string",e,"internal-error"),Pi(p,e.name),Pi(m,e.name),ce(typeof x=="boolean",e,"internal-error"),ce(typeof M=="boolean",e,"internal-error"),Pi(y,e.name),Pi(T,e.name),Pi(C,e.name),Pi(A,e.name),Pi(v,e.name),Pi(E,e.name);const q=new eo({uid:I,auth:e,email:m,emailVerified:x,displayName:p,isAnonymous:M,photoURL:T,phoneNumber:y,tenantId:C,stsTokenManager:Q,createdAt:v,lastLoginAt:E});return W&&Array.isArray(W)&&(q.providerData=W.map(H=>Object.assign({},H))),A&&(q._redirectEventId=A),q}static async _fromIdTokenResponse(e,n,r=!1){const i=new Gu;i.updateFromServerResponse(n);const s=new eo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await oh(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Uk.type="NONE";const dC=Uk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t,e,n){return`firebase:${t}:${e}:${n}`}class _a{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=td(this.userKey,i.apiKey,s),this.fullPersistenceKey=td("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?eo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new _a(ai(dC),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=i[0]||ai(dC);const o=td(r,e.config.apiKey,e.name);let l=null;for(const f of n)try{const h=await f._get(o);if(h){const p=eo._fromJSON(e,h);f!==s&&(l=p),s=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new _a(s,e,r):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==s)try{await f._remove(o)}catch{}})),new _a(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($k(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zk(e))return"Blackberry";if(Vk(e))return"Webos";if(Ay(e))return"Safari";if((e.includes("chrome/")||Bk(e))&&!e.includes("edge/"))return"Chrome";if(Wk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function $k(t=Gt()){return/firefox\//i.test(t)}function Ay(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bk(t=Gt()){return/crios\//i.test(t)}function jk(t=Gt()){return/iemobile/i.test(t)}function Wk(t=Gt()){return/android/i.test(t)}function zk(t=Gt()){return/blackberry/i.test(t)}function Vk(t=Gt()){return/webos/i.test(t)}function tp(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function RW(t=Gt()){var e;return tp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kW(){return L$()&&document.documentMode===10}function Gk(t=Gt()){return tp(t)||Wk(t)||Vk(t)||zk(t)||/windows phone/i.test(t)||jk(t)}function xW(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(t,e=[]){let n;switch(t){case"Browser":n=hC(Gt());break;case"Worker":n=`${hC(Gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ac}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pC(this),this.idTokenSubscription=new pC(this),this.beforeStateQueue=new NW(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pk,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ai(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await _a.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await oh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Zn(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ai(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new oc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ai(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await _a.create(this,[ai(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ce(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function np(t){return Zn(t)}class pC{constructor(e){this.auth=e,this.observer=null,this.addObserver=V$(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function PW(t,e,n){const r=np(t);ce(r._canInitEmulator,r,"emulator-config-failed"),ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,s=Kk(e),{host:o,port:l}=DW(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||LW()}function Kk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function DW(t){const e=Kk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:gC(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:gC(o)}}}function gC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function LW(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return oi("not implemented")}_getIdTokenResponse(e){return oi("not implemented")}_linkToIdToken(e,n){return oi("not implemented")}_getReauthenticationResolver(e){return oi("not implemented")}}async function FW(t,e){return mc(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MW(t,e){return ep(t,"POST","/v1/accounts:signInWithPassword",Zh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UW(t,e){return ep(t,"POST","/v1/accounts:signInWithEmailLink",Zh(t,e))}async function $W(t,e){return ep(t,"POST","/v1/accounts:signInWithEmailLink",Zh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends Ry{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Hu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Hu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return MW(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return UW(e,{email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return FW(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return $W(e,{idToken:n,email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(t,e){return ep(t,"POST","/v1/accounts:signInWithIdp",Zh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BW="http://localhost";class fo extends Ry{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=j0(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new fo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ya(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ya(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ya(e,n)}buildRequest(){const e={requestUri:BW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ha(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WW(t){const e=Gl(Hl(t)).link,n=e?Gl(Hl(e)).deep_link_id:null,r=Gl(Hl(t)).deep_link_id;return(r?Gl(Hl(r)).link:null)||r||n||e||t}class ky{constructor(e){var n,r,i,s,o,l;const c=Gl(Hl(e)),f=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,p=jW((i=c.mode)!==null&&i!==void 0?i:null);ce(f&&h&&p,"argument-error"),this.apiKey=f,this.operation=p,this.code=h,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=WW(e);try{return new ky(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this.providerId=Ya.PROVIDER_ID}static credential(e,n){return Hu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ky.parseLink(n);return ce(r,"argument-error"),Hu._fromEmailAndCode(e,r.code,r.tenantId)}}Ya.PROVIDER_ID="password";Ya.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ya.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends qk{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends vc{constructor(){super("facebook.com")}static credential(e){return fo._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bi.credential(e.oauthAccessToken)}catch{return null}}}Bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fo._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ji.credential(n,r)}catch{return null}}}ji.GOOGLE_SIGN_IN_METHOD="google.com";ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends vc{constructor(){super("github.com")}static credential(e){return fo._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.GITHUB_SIGN_IN_METHOD="github.com";Wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends vc{constructor(){super("twitter.com")}static credential(e,n){return fo._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zi.credential(n,r)}catch{return null}}}zi.TWITTER_SIGN_IN_METHOD="twitter.com";zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await eo._fromIdTokenResponse(e,r,i),o=mC(r);return new Da({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=mC(r);return new Da({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function mC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah extends Is{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ah.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ah(e,n,r,i)}}function Yk(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ah._fromErrorAndOperation(t,s,e,r):s})}async function zW(t,e,n=!1){const r=await Vu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Da._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VW(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Vu(t,Yk(r,i,e,t),n);ce(s.idToken,r,"internal-error");const o=Ty(s.idToken);ce(o,r,"internal-error");const{sub:l}=o;return ce(t.uid===l,r,"user-mismatch"),Da._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Er(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(t,e,n=!1){const r="signIn",i=await Yk(t,r,e),s=await Da._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function GW(t,e){return Qk(np(t),e)}function HW(t,e,n){return GW(Zn(t),Ya.credential(e,n))}function KW(t,e,n,r){return Zn(t).onIdTokenChanged(e,n,r)}function qW(t,e,n){return Zn(t).beforeAuthStateChanged(e,n)}const lh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lh,"1"),this.storage.removeItem(lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YW(){const t=Gt();return Ay(t)||tp(t)}const QW=1e3,JW=10;class Xk extends Jk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=YW()&&xW(),this.fallbackToPolling=Gk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);kW()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,JW):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},QW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Xk.type="LOCAL";const XW=Xk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk extends Jk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Zk.type="SESSION";const ex=Zk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZW(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new rp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async f=>f(n.origin,s)),c=await ZW(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const f=xy("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===f)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function t7(t){Lr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function n7(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function r7(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function i7(){return tx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="firebaseLocalStorageDb",s7=1,uh="firebaseLocalStorage",rx="fbase_key";class _c{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ip(t,e){return t.transaction([uh],e?"readwrite":"readonly").objectStore(uh)}function o7(){const t=indexedDB.deleteDatabase(nx);return new _c(t).toPromise()}function w_(){const t=indexedDB.open(nx,s7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(uh,{keyPath:rx})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(uh)?e(r):(r.close(),await o7(),e(await w_()))})})}async function vC(t,e,n){const r=ip(t,!0).put({[rx]:e,value:n});return new _c(r).toPromise()}async function a7(t,e){const n=ip(t,!1).get(e),r=await new _c(n).toPromise();return r===void 0?null:r.value}function _C(t,e){const n=ip(t,!0).delete(e);return new _c(n).toPromise()}const l7=800,u7=3;class ix{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await w_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>u7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rp._getInstance(i7()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await n7(),!this.activeServiceWorker)return;this.sender=new e7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||r7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await w_();return await vC(e,lh,"1"),await _C(e,lh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>vC(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>a7(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_C(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ip(i,!1).getAll();return new _c(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),l7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ix.type="LOCAL";const c7=ix;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function d7(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Dr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",f7().appendChild(r)})}function h7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(t,e){return e?ai(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny extends Ry{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ya(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ya(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function g7(t){return Qk(t.auth,new Ny(t),t.bypassAuthState)}function m7(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),VW(n,new Ny(t),t.bypassAuthState)}async function v7(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),zW(n,new Ny(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g7;case"linkViaPopup":case"linkViaRedirect":return v7;case"reauthViaPopup":case"reauthViaRedirect":return m7;default:Er(this.auth,"internal-error")}}resolve(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7=new gc(2e3,1e4);class sa extends sx{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,sa.currentPopupAction&&sa.currentPopupAction.cancel(),sa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){gi(this.filter.length===1,"Popup operations only handle one event");const e=xy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dr(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,_7.get())};e()}}sa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7="pendingRedirect",nd=new Map;class w7 extends sx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=nd.get(this.auth._key());if(!e){try{const r=await E7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}nd.set(this.auth._key(),e)}return this.bypassAuthState||nd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function E7(t,e){const n=C7(e),r=b7(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function S7(t,e){nd.set(t._key(),e)}function b7(t){return ai(t._redirectPersistence)}function C7(t){return td(y7,t.config.apiKey,t.name)}async function I7(t,e,n=!1){const r=np(t),i=p7(r,e),o=await new w7(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7=10*60*1e3;class A7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!R7(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ox(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Dr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T7&&this.cachedEventUids.clear(),this.cachedEventUids.has(yC(e))}saveEventToCache(e){this.cachedEventUids.add(yC(e)),this.lastProcessedEventTime=Date.now()}}function yC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ox({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function R7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ox(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k7(t,e={}){return mc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,N7=/^https?/;async function O7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await k7(t);for(const n of e)try{if(P7(n))return}catch{}Er(t,"unauthorized-domain")}function P7(t){const e=y_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!N7.test(n))return!1;if(x7.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7=new gc(3e4,6e4);function wC(){const t=Lr().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function L7(t){return new Promise((e,n)=>{var r,i,s;function o(){wC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wC(),n(Dr(t,"network-request-failed"))},timeout:D7.get()})}if(!((i=(r=Lr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Lr().gapi)===null||s===void 0)&&s.load)o();else{const l=h7("iframefcb");return Lr()[l]=()=>{gapi.load?o():n(Dr(t,"network-request-failed"))},d7(`https://apis.google.com/js/api.js?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw rd=null,e})}let rd=null;function F7(t){return rd=rd||L7(t),rd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=new gc(5e3,15e3),U7="__/auth/iframe",$7="emulator/auth/iframe",B7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},j7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W7(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Iy(e,$7):`https://${t.config.authDomain}/${U7}`,r={apiKey:e.apiKey,appName:t.name,v:ac},i=j7.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ha(r).slice(1)}`}async function z7(t){const e=await F7(t),n=Lr().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:W7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B7,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Dr(t,"network-request-failed"),l=Lr().setTimeout(()=>{s(o)},M7.get());function c(){Lr().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G7=500,H7=600,K7="_blank",q7="http://localhost";class EC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y7(t,e,n,r=G7,i=H7){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},V7),{width:r.toString(),height:i.toString(),top:s,left:o}),f=Gt().toLowerCase();n&&(l=Bk(f)?K7:n),$k(f)&&(e=e||q7,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[y,T])=>`${m}${y}=${T},`,"");if(RW(f)&&l!=="_self")return Q7(e||"",l),new EC(null);const p=window.open(e||"",l,h);ce(p,t,"popup-blocked");try{p.focus()}catch{}return new EC(p)}function Q7(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J7="__/auth/handler",X7="emulator/auth/handler";function SC(t,e,n,r,i,s){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ac,eventId:i};if(e instanceof qk){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",t_(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,f]of Object.entries(s||{}))o[c]=f}if(e instanceof vc){const c=e.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const c of Object.keys(l))l[c]===void 0&&delete l[c];return`${Z7(t)}?${Ha(l).slice(1)}`}function Z7({config:t}){return t.emulator?Iy(t,X7):`https://${t.authDomain}/${J7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="webStorageSupport";class ez{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ex,this._completeRedirectFn=I7,this._overrideRedirectResult=S7}async _openPopup(e,n,r,i){var s;gi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=SC(e,n,r,y_(),i);return Y7(e,o,xy())}async _openRedirect(e,n,r,i){return await this._originValidation(e),t7(SC(e,n,r,y_(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(gi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await z7(e),r=new A7(e);return n.register("authEvent",i=>(ce(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nm,{type:Nm},i=>{var s;const o=(s=i?.[0])===null||s===void 0?void 0:s[Nm];o!==void 0&&n(!!o),Er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=O7(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Gk()||Ay()||tp()}}const tz=ez;var bC="@firebase/auth",CC="0.21.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function iz(t){ka(new oo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((l,c)=>{ce(s&&!s.includes(":"),"invalid-api-key",{appName:l.name}),ce(!o?.includes(":"),"argument-error",{appName:l.name});const f={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hk(t)},h=new OW(l,c,f);return fW(h,n),h})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ka(new oo("auth-internal",e=>{const n=np(e.getProvider("auth").getImmediate());return(r=>new nz(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cs(bC,CC,rz(t)),cs(bC,CC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sz=5*60,oz=tR("authIdTokenMaxAge")||sz;let IC=null;const az=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>oz)return;const i=n?.token;IC!==i&&(IC=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function lz(t=uR()){const e=q0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=cW(t,{popupRedirectResolver:tz,persistence:[c7,XW,ex]}),r=tR("authTokenSyncURL");if(r){const s=az(r);qW(n,s,()=>s(n.currentUser)),KW(n,o=>s(o))}const i=eR("auth");return i&&PW(n,`http://${i}`),n}iz("Browser");const TC=t=>{let e;const n=new Set,r=(c,f)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const p=e;e=f??typeof h!="object"?h:Object.assign({},e,h),n.forEach(m=>m(e,p))}},i=()=>e,l={setState:r,getState:i,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{var c;((c={VITE_APPNAME:"NARA DEV",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0})==null?void 0:c.MODE)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return e=t(r,i,l),l},uz=t=>t?TC(t):TC;var E_={},cz={get exports(){return E_},set exports(t){E_=t}},ax={},S_={},fz={get exports(){return S_},set exports(t){S_=t}},lx={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La=k;function dz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hz=typeof Object.is=="function"?Object.is:dz,pz=La.useState,gz=La.useEffect,mz=La.useLayoutEffect,vz=La.useDebugValue;function _z(t,e){var n=e(),r=pz({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return mz(function(){i.value=n,i.getSnapshot=e,Om(i)&&s({inst:i})},[t,n,e]),gz(function(){return Om(i)&&s({inst:i}),t(function(){Om(i)&&s({inst:i})})},[t]),vz(n),n}function Om(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hz(t,n)}catch{return!0}}function yz(t,e){return e()}var wz=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yz:_z;lx.useSyncExternalStore=La.useSyncExternalStore!==void 0?La.useSyncExternalStore:wz;(function(t){t.exports=lx})(fz);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp=k,Ez=S_;function Sz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bz=typeof Object.is=="function"?Object.is:Sz,Cz=Ez.useSyncExternalStore,Iz=sp.useRef,Tz=sp.useEffect,Az=sp.useMemo,Rz=sp.useDebugValue;ax.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=Iz(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Az(function(){function c(y){if(!f){if(f=!0,h=y,y=r(y),i!==void 0&&o.hasValue){var T=o.value;if(i(T,y))return p=T}return p=y}if(T=p,bz(h,y))return T;var C=r(y);return i!==void 0&&i(T,C)?T:(h=y,p=C)}var f=!1,h,p,m=n===void 0?null:n;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,n,r,i]);var l=Cz(t,s[0],s[1]);return Tz(function(){o.hasValue=!0,o.value=l},[l]),Rz(l),l};(function(t){t.exports=ax})(cz);const kz=tI(E_),{useSyncExternalStoreWithSelector:xz}=kz;function Nz(t,e=t.getState,n){const r=xz(t.subscribe,t.getState,t.getServerState||t.getState,e,n);return k.useDebugValue(r),r}const AC=t=>{var e;((e={VITE_APPNAME:"NARA DEV",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0})==null?void 0:e.MODE)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof t=="function"?uz(t):t,r=(i,s)=>Nz(n,i,s);return Object.assign(r,n),r},Oz=t=>t?AC(t):AC,b_=new Map,Lf=t=>{const e=b_.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},Pz=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=b_.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return b_.set(n.name,i),{type:"tracked",store:t,...i}},Dz=(t,e={})=>(n,r,i)=>{var s,o;const{enabled:l,anonymousActionType:c,store:f,...h}=e;let p;try{p=(l??((s={VITE_APPNAME:"NARA DEV",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0})==null?void 0:s.MODE)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!p)return((o={VITE_APPNAME:"NARA DEV",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0})==null?void 0:o.MODE)!=="production"&&l&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(n,r,i);const{connection:m,...y}=Pz(f,p,h);let T=!0;i.setState=(v,E,I)=>{const x=n(v,E);if(!T)return x;const M=I===void 0?{type:c||"anonymous"}:typeof I=="string"?{type:I}:I;return f===void 0?(m?.send(M,r()),x):(m?.send({...M,type:`${f}/${M.type}`},{...Lf(h.name),[f]:i.getState()}),x)};const C=(...v)=>{const E=T;T=!1,n(...v),T=E},A=t(i.setState,r,i);if(y.type==="untracked"?m?.init(A):(y.stores[y.store]=i,m?.init(Object.fromEntries(Object.entries(y.stores).map(([v,E])=>[v,v===y.store?A:E.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let v=!1;const E=i.dispatch;i.dispatch=(...I)=>{var x;((x={VITE_APPNAME:"NARA DEV",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0})==null?void 0:x.MODE)!=="production"&&I[0].type==="__setState"&&!v&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),v=!0),E(...I)}}return m.subscribe(v=>{var E;switch(v.type){case"ACTION":if(typeof v.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Pm(v.payload,I=>{if(I.type==="__setState"){if(f===void 0){C(I.state);return}Object.keys(I.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const x=I.state[f];if(x==null)return;JSON.stringify(i.getState())!==JSON.stringify(x)&&C(x);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(I)});case"DISPATCH":switch(v.payload.type){case"RESET":return C(A),f===void 0?m?.init(i.getState()):m?.init(Lf(h.name));case"COMMIT":if(f===void 0){m?.init(i.getState());return}return m?.init(Lf(h.name));case"ROLLBACK":return Pm(v.state,I=>{if(f===void 0){C(I),m?.init(i.getState());return}C(I[f]),m?.init(Lf(h.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Pm(v.state,I=>{if(f===void 0){C(I);return}JSON.stringify(i.getState())!==JSON.stringify(I[f])&&C(I[f])});case"IMPORT_STATE":{const{nextLiftedState:I}=v.payload,x=(E=I.computedStates.slice(-1)[0])==null?void 0:E.state;if(!x)return;C(f===void 0?x:x[f]),m?.send(null,I);return}case"PAUSE_RECORDING":return T=!T}return}}),A},Lz=Dz,Pm=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function Fz(t){let e;try{e=t()}catch{return}return{getItem:r=>{var i;const s=l=>l===null?null:JSON.parse(l),o=(i=e.getItem(r))!=null?i:null;return o instanceof Promise?o.then(s):s(o)},setItem:(r,i)=>e.setItem(r,JSON.stringify(i)),removeItem:r=>e.removeItem(r)}}const Ku=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Ku(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Ku(r)(n)}}}},Mz=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:A=>A,version:0,merge:(A,v)=>({...v,...A}),...e},o=!1;const l=new Set,c=new Set;let f;try{f=s.getStorage()}catch{}if(!f)return t((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...A)},r,i);const h=Ku(s.serialize),p=()=>{const A=s.partialize({...r()});let v;const E=h({state:A,version:s.version}).then(I=>f.setItem(s.name,I)).catch(I=>{v=I});if(v)throw v;return E},m=i.setState;i.setState=(A,v)=>{m(A,v),p()};const y=t((...A)=>{n(...A),p()},r,i);let T;const C=()=>{var A;if(!f)return;o=!1,l.forEach(E=>E(r()));const v=((A=s.onRehydrateStorage)==null?void 0:A.call(s,r()))||void 0;return Ku(f.getItem.bind(f))(s.name).then(E=>{if(E)return s.deserialize(E)}).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==s.version){if(s.migrate)return s.migrate(E.state,E.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return E.state}).then(E=>{var I;return T=s.merge(E,(I=r())!=null?I:y),n(T,!0),p()}).then(()=>{v?.(T,void 0),o=!0,c.forEach(E=>E(T))}).catch(E=>{v?.(void 0,E)})};return i.persist={setOptions:A=>{s={...s,...A},A.getStorage&&(f=A.getStorage())},clearStorage:()=>{f?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>C(),hasHydrated:()=>o,onHydrate:A=>(l.add(A),()=>{l.delete(A)}),onFinishHydration:A=>(c.add(A),()=>{c.delete(A)})},C(),T||y},Uz=(t,e)=>(n,r,i)=>{let s={storage:Fz(()=>localStorage),partialize:C=>C,version:0,merge:(C,A)=>({...A,...C}),...e},o=!1;const l=new Set,c=new Set;let f=s.storage;if(!f)return t((...C)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...C)},r,i);const h=()=>{const C=s.partialize({...r()});return f.setItem(s.name,{state:C,version:s.version})},p=i.setState;i.setState=(C,A)=>{p(C,A),h()};const m=t((...C)=>{n(...C),h()},r,i);let y;const T=()=>{var C;if(!f)return;o=!1,l.forEach(v=>v(r()));const A=((C=s.onRehydrateStorage)==null?void 0:C.call(s,r()))||void 0;return Ku(f.getItem.bind(f))(s.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==s.version){if(s.migrate)return s.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var E;return y=s.merge(v,(E=r())!=null?E:m),n(y,!0),h()}).then(()=>{A?.(y,void 0),o=!0,c.forEach(v=>v(y))}).catch(v=>{A?.(void 0,v)})};return i.persist={setOptions:C=>{s={...s,...C},C.storage&&(f=C.storage)},clearStorage:()=>{f?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>T(),hasHydrated:()=>o,onHydrate:C=>(l.add(C),()=>{l.delete(C)}),onFinishHydration:C=>(c.add(C),()=>{c.delete(C)})},T(),y||m},$z=(t,e)=>{var n;return"getStorage"in e||"serialize"in e||"deserialize"in e?(((n={VITE_APPNAME:"NARA DEV",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0})==null?void 0:n.MODE)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Mz(t,e)):Uz(t,e)},Bz=$z;function qn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Fa(t){return!!t&&!!t[Pe]}function mi(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Qz}(t)||Array.isArray(t)||!!t[DC]||!!(!((e=t.constructor)===null||e===void 0)&&e[DC])||Oy(t)||Py(t))}function Ma(t,e,n){n===void 0&&(n=!1),Qa(t)===0?(n?Object.keys:Uy)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function Qa(t){var e=t[Pe];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Oy(t)?2:Py(t)?3:0}function C_(t,e){return Qa(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function jz(t,e){return Qa(t)===2?t.get(e):t[e]}function ux(t,e,n){var r=Qa(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Wz(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Oy(t){return qz&&t instanceof Map}function Py(t){return Yz&&t instanceof Set}function It(t){return t.o||t.t}function Dy(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Jz(t);delete e[Pe];for(var n=Uy(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function Ly(t,e){return e===void 0&&(e=!1),Fy(t)||Fa(t)||!mi(t)||(Qa(t)>1&&(t.set=t.add=t.clear=t.delete=zz),Object.freeze(t),e&&Ma(t,function(n,r){return Ly(r,!0)},!0)),t}function zz(){qn(2)}function Fy(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Fr(t){var e=T_[t];return e||qn(18,t),e}function Vz(t,e){T_[t]||(T_[t]=e)}function ch(){return Yu}function Dm(t,e){e&&(Fr("Patches"),t.u=[],t.s=[],t.v=e)}function fh(t){I_(t),t.p.forEach(Gz),t.p=null}function I_(t){t===Yu&&(Yu=t.l)}function RC(t){return Yu={p:[],l:Yu,h:t,m:!0,_:0}}function Gz(t){var e=t[Pe];e.i===0||e.i===1?e.j():e.O=!0}function Lm(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.g||Fr("ES5").S(e,t,r),r?(n[Pe].P&&(fh(e),qn(4)),mi(t)&&(t=dh(e,t),e.l||hh(e,t)),e.u&&Fr("Patches").M(n[Pe].t,t,e.u,e.s)):t=dh(e,n,[]),fh(e),e.u&&e.v(e.u,e.s),t!==cx?t:void 0}function dh(t,e,n){if(Fy(e))return e;var r=e[Pe];if(!r)return Ma(e,function(l,c){return kC(t,r,e,l,c,n)},!0),e;if(r.A!==t)return e;if(!r.P)return hh(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Dy(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Ma(s,function(l,c){return kC(t,r,i,l,c,n,o)}),hh(t,i,!1),n&&t.u&&Fr("Patches").N(r,n,t.u,t.s)}return r.o}function kC(t,e,n,r,i,s,o){if(Fa(i)){var l=dh(t,i,s&&e&&e.i!==3&&!C_(e.R,r)?s.concat(r):void 0);if(ux(n,r,l),!Fa(l))return;t.m=!1}else o&&n.add(i);if(mi(i)&&!Fy(i)){if(!t.h.D&&t._<1)return;dh(t,i),e&&e.A.l||hh(t,i)}}function hh(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&Ly(e,n)}function Fm(t,e){var n=t[Pe];return(n?It(n):t)[e]}function xC(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function ni(t){t.P||(t.P=!0,t.l&&ni(t.l))}function Mm(t){t.o||(t.o=Dy(t.t))}function qu(t,e,n){var r=Oy(e)?Fr("MapSet").F(e,n):Py(e)?Fr("MapSet").T(e,n):t.g?function(i,s){var o=Array.isArray(i),l={i:o?1:0,A:s?s.A:ch(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},c=l,f=A_;o&&(c=[l],f=Kl);var h=Proxy.revocable(c,f),p=h.revoke,m=h.proxy;return l.k=m,l.j=p,m}(e,n):Fr("ES5").J(e,n);return(n?n.A:ch()).p.push(r),r}function Hz(t){return Fa(t)||qn(22,t),function e(n){if(!mi(n))return n;var r,i=n[Pe],s=Qa(n);if(i){if(!i.P&&(i.i<4||!Fr("ES5").K(i)))return i.t;i.I=!0,r=NC(n,s),i.I=!1}else r=NC(n,s);return Ma(r,function(o,l){i&&jz(i.t,o)===l||ux(r,o,e(l))}),s===3?new Set(r):r}(t)}function NC(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Dy(t)}function Kz(){function t(l,c){function f(){this.constructor=l}i(l,c),l.prototype=(f.prototype=c.prototype,new f)}function e(l){l.o||(l.R=new Map,l.o=new Map(l.t))}function n(l){l.o||(l.o=new Set,l.t.forEach(function(c){if(mi(c)){var f=qu(l.A.h,c,l);l.p.set(c,f),l.o.add(f)}else l.o.add(c)}))}function r(l){l.O&&qn(3,JSON.stringify(It(l)))}var i=function(l,c){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var p in h)h.hasOwnProperty(p)&&(f[p]=h[p])})(l,c)},s=function(){function l(f,h){return this[Pe]={i:2,l:h,A:h?h.A:ch(),P:!1,I:!1,o:void 0,R:void 0,t:f,k:this,C:!1,O:!1},this}t(l,Map);var c=l.prototype;return Object.defineProperty(c,"size",{get:function(){return It(this[Pe]).size}}),c.has=function(f){return It(this[Pe]).has(f)},c.set=function(f,h){var p=this[Pe];return r(p),It(p).has(f)&&It(p).get(f)===h||(e(p),ni(p),p.R.set(f,!0),p.o.set(f,h),p.R.set(f,!0)),this},c.delete=function(f){if(!this.has(f))return!1;var h=this[Pe];return r(h),e(h),ni(h),h.t.has(f)?h.R.set(f,!1):h.R.delete(f),h.o.delete(f),!0},c.clear=function(){var f=this[Pe];r(f),It(f).size&&(e(f),ni(f),f.R=new Map,Ma(f.t,function(h){f.R.set(h,!1)}),f.o.clear())},c.forEach=function(f,h){var p=this;It(this[Pe]).forEach(function(m,y){f.call(h,p.get(y),y,p)})},c.get=function(f){var h=this[Pe];r(h);var p=It(h).get(f);if(h.I||!mi(p)||p!==h.t.get(f))return p;var m=qu(h.A.h,p,h);return e(h),h.o.set(f,m),m},c.keys=function(){return It(this[Pe]).keys()},c.values=function(){var f,h=this,p=this.keys();return(f={})[Ff]=function(){return h.values()},f.next=function(){var m=p.next();return m.done?m:{done:!1,value:h.get(m.value)}},f},c.entries=function(){var f,h=this,p=this.keys();return(f={})[Ff]=function(){return h.entries()},f.next=function(){var m=p.next();if(m.done)return m;var y=h.get(m.value);return{done:!1,value:[m.value,y]}},f},c[Ff]=function(){return this.entries()},l}(),o=function(){function l(f,h){return this[Pe]={i:3,l:h,A:h?h.A:ch(),P:!1,I:!1,o:void 0,t:f,k:this,p:new Map,O:!1,C:!1},this}t(l,Set);var c=l.prototype;return Object.defineProperty(c,"size",{get:function(){return It(this[Pe]).size}}),c.has=function(f){var h=this[Pe];return r(h),h.o?!!h.o.has(f)||!(!h.p.has(f)||!h.o.has(h.p.get(f))):h.t.has(f)},c.add=function(f){var h=this[Pe];return r(h),this.has(f)||(n(h),ni(h),h.o.add(f)),this},c.delete=function(f){if(!this.has(f))return!1;var h=this[Pe];return r(h),n(h),ni(h),h.o.delete(f)||!!h.p.has(f)&&h.o.delete(h.p.get(f))},c.clear=function(){var f=this[Pe];r(f),It(f).size&&(n(f),ni(f),f.o.clear())},c.values=function(){var f=this[Pe];return r(f),n(f),f.o.values()},c.entries=function(){var f=this[Pe];return r(f),n(f),f.o.entries()},c.keys=function(){return this.values()},c[Ff]=function(){return this.values()},c.forEach=function(f,h){for(var p=this.values(),m=p.next();!m.done;)f.call(h,m.value,m.value,this),m=p.next()},l}();Vz("MapSet",{F:function(l,c){return new s(l,c)},T:function(l,c){return new o(l,c)}})}var OC,Yu,My=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",qz=typeof Map<"u",Yz=typeof Set<"u",PC=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",cx=My?Symbol.for("immer-nothing"):((OC={})["immer-nothing"]=!0,OC),DC=My?Symbol.for("immer-draftable"):"__$immer_draftable",Pe=My?Symbol.for("immer-state"):"__$immer_state",Ff=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",Qz=""+Object.prototype.constructor,Uy=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Jz=Object.getOwnPropertyDescriptors||function(t){var e={};return Uy(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},T_={},A_={get:function(t,e){if(e===Pe)return t;var n=It(t);if(!C_(n,e))return function(i,s,o){var l,c=xC(s,o);return c?"value"in c?c.value:(l=c.get)===null||l===void 0?void 0:l.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!mi(r)?r:r===Fm(t.t,e)?(Mm(t),t.o[e]=qu(t.A.h,r,t)):r},has:function(t,e){return e in It(t)},ownKeys:function(t){return Reflect.ownKeys(It(t))},set:function(t,e,n){var r=xC(It(t),e);if(r?.set)return r.set.call(t.k,n),!0;if(!t.P){var i=Fm(It(t),e),s=i?.[Pe];if(s&&s.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(Wz(n,i)&&(n!==void 0||C_(t.t,e)))return!0;Mm(t),ni(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return Fm(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Mm(t),ni(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=It(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){qn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){qn(12)}},Kl={};Ma(A_,function(t,e){Kl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Kl.deleteProperty=function(t,e){return Kl.set.call(this,t,e,void 0)},Kl.set=function(t,e,n){return A_.set.call(this,t[0],e,n,t[0])};var Xz=function(){function t(n){var r=this;this.g=PC,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var l=s;s=i;var c=r;return function(C){var A=this;C===void 0&&(C=l);for(var v=arguments.length,E=Array(v>1?v-1:0),I=1;I<v;I++)E[I-1]=arguments[I];return c.produce(C,function(x){var M;return(M=s).call.apply(M,[A,x].concat(E))})}}var f;if(typeof s!="function"&&qn(6),o!==void 0&&typeof o!="function"&&qn(7),mi(i)){var h=RC(r),p=qu(r,i,void 0),m=!0;try{f=s(p),m=!1}finally{m?fh(h):I_(h)}return typeof Promise<"u"&&f instanceof Promise?f.then(function(C){return Dm(h,o),Lm(C,h)},function(C){throw fh(h),C}):(Dm(h,o),Lm(f,h))}if(!i||typeof i!="object"){if((f=s(i))===void 0&&(f=i),f===cx&&(f=void 0),r.D&&Ly(f,!0),o){var y=[],T=[];Fr("Patches").M(i,f,y,T),o(y,T)}return f}qn(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(f){for(var h=arguments.length,p=Array(h>1?h-1:0),m=1;m<h;m++)p[m-1]=arguments[m];return r.produceWithPatches(f,function(y){return i.apply(void 0,[y].concat(p))})};var o,l,c=r.produce(i,s,function(f,h){o=f,l=h});return typeof Promise<"u"&&c instanceof Promise?c.then(function(f){return[f,o,l]}):[c,o,l]},typeof n?.useProxies=="boolean"&&this.setUseProxies(n.useProxies),typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){mi(n)||qn(8),Fa(n)&&(n=Hz(n));var r=RC(this),i=qu(this,n,void 0);return i[Pe].C=!0,I_(r),i},e.finishDraft=function(n,r){var i=n&&n[Pe],s=i.A;return Dm(s,r),Lm(void 0,s)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!PC&&qn(20),this.g=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Fr("Patches").$;return Fa(n)?o(n,r):this.produce(n,function(l){return o(l,r)})},t}(),Pn=new Xz,Zz=Pn.produce;Pn.produceWithPatches.bind(Pn);Pn.setAutoFreeze.bind(Pn);Pn.setUseProxies.bind(Pn);Pn.applyPatches.bind(Pn);Pn.createDraft.bind(Pn);Pn.finishDraft.bind(Pn);const eV=t=>(e,n,r)=>(r.setState=(i,s,...o)=>{const l=typeof i=="function"?Zz(i):i;return e(l,s,...o)},t(r.setState,n,r)),tV=eV;Kz();const nV={id:1,name:"All devices",controllers:["FF:FF:FF:FF:FF:FF"],controlMethods:["dimmable"]},fx=Oz()(Lz(Bz(tV((t,e)=>({controllers:new Map().set("30:83:98:dc:0f:bc",{name:"NARA",type:"light",ids:[1,2,3],config:{rgb:!0,brightness:!0}}).set("FF:FF:FF:FF:FF:FF",{name:"NARA",type:"light",ids:[1,2,3],config:{rgb:!0,brightness:!0}}),devices:new Map().set("1",nV).set("2",{id:2,name:"Device 2",controllers:["30:83:98:dc:0f:bc"],controlMethods:["rgb"]}).set("3",{id:3,name:"Device 3",controllers:["FF:FF:FF:FF:FF:FF","30:83:98:dc:0f:bc"],controlMethods:["cct"]}),groups:new Map().set("group0",{id:0,name:"Linka",device_ids:[1,2]}),addController:n=>t(r=>{}),addDevice:n=>t(r=>{}),pairAndAdd:()=>t(n=>{const r=n.devices.size,i={id:r,name:"Device "+r,controllers:["aa-aa-aa-aa-aa-aa"],controlMethods:["rgb","brightness"]};n.devices.set("dev"+r,i)}),removeDevice:n=>t(r=>{r.devices.delete(`${n}`)}),getGroups(){const n=e().groups,r=Array.from(n.values()).reduce((s,o)=>s.concat(o.device_ids),[]),i=Array.from(e().devices.values()).map(s=>s.id).filter(s=>!r.includes(s));if(i.length>0){const s={name:"Other",id:999999,device_ids:i};return[...Array.from(n.values()),s]}else return Array.from(n.values())},setState(n){t(n)}})),{name:"app-store-v0",storage:{getItem:t=>{const e=localStorage.getItem(t);return{state:{...JSON.parse(e).state,constrollers:new Map(JSON.parse(e).state.controllers),devices:new Map(JSON.parse(e).state.devices),groups:new Map(JSON.parse(e).state.groups)}}},setItem:(t,e)=>{const n=JSON.stringify({state:{...e.state,controllers:Array.from(e.state.controllers.entries()),devices:Array.from(e.state.devices.entries()),groups:Array.from(e.state.groups.entries())}});localStorage.setItem(t,n)},removeItem:t=>localStorage.removeItem(t)}})));window.useSpectodaStore=fx;const Ua=L0(),rV={apiKey:"AIzaSyCnAfdv909gThutnCKwsoiNaSrHbqRUJv0",authDomain:"tangle-49512.firebaseapp.com",databaseURL:"https://tangle-49512-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tangle-49512",storageBucket:"tangle-49512.appspot.com",messagingSenderId:"707203240184",appId:"1:707203240184:web:d634fdd4b4c5fa2379eb0d",measurementId:"G-EJCQSBZ6YJ"},$y=lR(rV),dx=Nk($y),hx=lz($y),iV=Nk($y);hx.languageCode="cs";HW(hx,"lumbio@spectoda.com","03042022").then(async t=>{t.user;const e="LUMBIO";K9((()=>ih(iV,"/home/"+e))()).then(r=>{const i=r.val();i.ownerSignature&&qe.assignOwnerSignature(i.ownerSignature)&&localStorage.setItem("ownerSignature",i.ownerSignature),i.ownerKey&&qe.assignOwnerKey(i.ownerKey)&&localStorage.setItem("ownerKey",i.ownerKey);const s=new Map(i.devices),o=new Map(i.controllers),l=new Map(i.groups),c=i.events||{};Vi.set("/home/LUMBIO/events",c),Vi.saveLocalData(),fx.getState().setState({controllers:o,devices:s,groups:l}),Ua.emit("events-local-reset")})});const sV=t=>`/home/${t}`,oV=ih(dx,".info/serverTimeOffset");class aV{#e;constructor(){this.#e={}}get(e){return this.getLocalData(),zu.get(this.#e,e.replaceAll("/","."))}set(e,n){zu.set(this.#e,e.replaceAll("/","."),n),this.saveLocalData()}saveLocalData(){localStorage.setItem("spectoda",JSON.stringify(this.#e))}getLocalData(){return this.#e=JSON.parse(localStorage.getItem("spectoda")||"{}")}}const Vi=new aV;window.localFirebaseDataStore=Vi;class lV{#e;#t;#n;constructor(e){this.#e=dx,this.#t=sV(e),this.#n=100,Y9(oV,n=>{const r=n.val();this.#n=r})}emitEvent(e){const n=`${this.#t}/events/${e.id}/${e.label}`;ih(this.#e,n);const r={value:e.value,timestamp:e.timestamp+this.#n,meta:e.meta};e.id===255&&Vi.set(`${this.#t}/events/255/${e.label}`,r),console.log("emitting event",e.label,e.value,r,n)}onEvent(e,n,r){const i=`${this.#t}/events/${n}/${e}`;ih(this.#e,i);let s=qe.on("emitted_events",o=>{for(let l of o)l.label===e&&l.id===n&&r(l)});return()=>{s()}}getLatestSavedEvent(e,n){const r=`${this.#t}/events/${n}/${e}`,i=`${this.#t}/events/255/${e}`;return Vi.get(i)?.timestamp>Vi.get(r)?.timestamp?Vi.get(i):Vi.get(r)}}const ph=new lV("PWS");window.spectodaFirebaseSync=ph;function uV(t,e){return Array.isArray(t)?t.includes(e):t===e}function cV(t){const e=document.createElement("div");e.style.color=t;const n=window.getComputedStyle(document.body.appendChild(e)).color.match(/\d+/g).map(function(r){return parseInt(r,10)});return document.body.removeChild(e),n.length>=3?"#"+((1<<24)+(n[0]<<16)+(n[1]<<8)+n[2]).toString(16).substr(1):!1}const Um=new Map,px=(t,e)=>{const n={subscribe:i=>{const s=Ua.on("events-local-reset",()=>{const f=n.getSnapshot();i(f)}),o=qe.on("emitted_events",f=>{for(let h of f)h.label===t&&uV(e,h.id)&&i(h)}),l=qe.on("emitted_events",f=>{for(let h of f)h.label===t&&h.id===255&&i(h)}),c=ph.onEvent(t,e,f=>{f&&i(f)});return()=>{o(),c(),l(),s()}},getSnapshot(){const i=ph.getLatestSavedEvent(t,e)||{id:e,label:t,value:null,timestamp:0,isLoading:!0,meta:{}};return Um.has(`${e}_${t}_${i.timestamp}_${i.value}`)?Um.get(`${e}_${t}_${i.timestamp}_${i.value}`):(Um.set(`${e}_${t}_${i.timestamp}_${i.value}`,i),i)}},r=k.useSyncExternalStore(k.useCallback(i=>n.subscribe(i),[t,e]),k.useCallback(()=>n.getSnapshot(),[t,e]));return{event:{label:t,value:r?.value,timestamp:r?.timestamp,id:e,meta:r.meta}}};function ql(t){return qe.interface?.emit("emitted_events",[t]),fetch("/event",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(e=>e.json())}const vi=(t,e)=>{const{event:n}=px(t,e);async function r(i,s={}){if(!(n&&!n.isLoading))throw new Error("Event has no params")}return{value:n?.value,emitEvent:r,meta:n?.meta}},fV=(t,e)=>{const{event:n}=px(t,e);async function r(i,s={}){try{if(n&&!n.isLoading)ph.emitEvent({id:e,label:t,value:i,timestamp:Date.now(),meta:s}),await ql({id:255,label:t,value:i,type:"color"});else throw new Error("Event has no params")}catch(o){console.error(o)}}return{value:n?.value,emitEvent:r,meta:n?.meta}};function dV(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=gx(e))&&(r&&(r+=" "),r+=n);return r}function gx(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=gx(t[r]))&&(n&&(n+=" "),n+=e);return n}function R_(){return R_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R_.apply(this,arguments)}var By="-";function hV(t){var e=gV(t);function n(i){var s=i.split(By);return s[0]===""&&s.length!==1&&s.shift(),mx(s,e)||pV(i)}function r(i){return t.conflictingClassGroups[i]||[]}return{getClassGroupId:n,getConflictingClassGroupIds:r}}function mx(t,e){var n;if(t.length===0)return e.classGroupId;var r=t[0],i=e.nextPart.get(r),s=i?mx(t.slice(1),i):void 0;if(s)return s;if(e.validators.length!==0){var o=t.join(By);return(n=e.validators.find(function(l){var c=l.validator;return c(o)}))==null?void 0:n.classGroupId}}var LC=/^\[(.+)\]$/;function pV(t){if(LC.test(t)){var e=LC.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function gV(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},i=vV(Object.entries(t.classGroups),n);return i.forEach(function(s){var o=s[0],l=s[1];k_(l,r,o,e)}),r}function k_(t,e,n,r){t.forEach(function(i){if(typeof i=="string"){var s=i===""?e:FC(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(mV(i)){k_(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(function(o){var l=o[0],c=o[1];k_(c,FC(e,l),n,r)})})}function FC(t,e){var n=t;return e.split(By).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function mV(t){return t.isThemeGetter}function vV(t,e){return e?t.map(function(n){var r=n[0],i=n[1],s=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],f=l[1];return[e+c,f]})):o});return[r,s]}):t}function _V(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(o){var l=n.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return i(o,l),l},set:function(o,l){n.has(o)?n.set(o,l):i(o,l)}}}var vx="!";function yV(t){var e=t.separator||":";return function(r){for(var i=0,s=[],o=0,l=0;l<r.length;l++){var c=r[l];i===0&&c===e[0]&&(e.length===1||r.slice(l,l+e.length)===e)&&(s.push(r.slice(o,l)),o=l+e.length),c==="["?i++:c==="]"&&i--}var f=s.length===0?r:r.substring(o),h=f.startsWith(vx),p=h?f.substring(1):f;return{modifiers:s,hasImportantModifier:h,baseClassName:p}}}function wV(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function EV(t){return R_({cache:_V(t.cacheSize),splitModifiers:yV(t)},hV(t))}var SV=/\s+/;function bV(t,e){var n=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return t.trim().split(SV).map(function(o){var l=n(o),c=l.modifiers,f=l.hasImportantModifier,h=l.baseClassName,p=r(h);if(!p)return{isTailwindClass:!1,originalClassName:o};var m=wV(c).join(":"),y=f?m+vx:m;return{isTailwindClass:!0,modifierId:y,classGroupId:p,originalClassName:o}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,f=l+c;return s.has(f)?!1:(s.add(f),i(c).forEach(function(h){return s.add(l+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function CV(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i,s,o=l;function l(f){var h=e[0],p=e.slice(1),m=p.reduce(function(y,T){return T(y)},h());return r=EV(m),i=r.cache.get,s=r.cache.set,o=c,c(f)}function c(f){var h=i(f);if(h)return h;var p=bV(f,r);return s(f,p),p}return function(){return o(dV.apply(null,arguments))}}function Ze(t){var e=function(r){return r[t]||[]};return e.isThemeGetter=!0,e}var _x=/^\[(?:([a-z-]+):)?(.+)\]$/i,IV=/^\d+\/\d+$/,TV=new Set(["px","full","screen"]),AV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,RV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))/,kV=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function ur(t){return du(t)||TV.has(t)||IV.test(t)||zs(t)}function zs(t){return wo(t,"length",DV)}function xV(t){return wo(t,"size",yx)}function NV(t){return wo(t,"position",yx)}function OV(t){return wo(t,"url",LV)}function $m(t){return wo(t,"number",du)}function du(t){return!Number.isNaN(Number(t))}function Ll(t){return MC(t)||wo(t,"number",MC)}function ht(t){return _x.test(t)}function Fl(){return!0}function Di(t){return AV.test(t)}function PV(t){return wo(t,"",FV)}function wo(t,e,n){var r=_x.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function DV(t){return RV.test(t)}function yx(){return!1}function LV(t){return t.startsWith("url(")}function MC(t){return Number.isInteger(Number(t))}function FV(t){return kV.test(t)}function MV(){var t=Ze("colors"),e=Ze("spacing"),n=Ze("blur"),r=Ze("brightness"),i=Ze("borderColor"),s=Ze("borderRadius"),o=Ze("borderSpacing"),l=Ze("borderWidth"),c=Ze("contrast"),f=Ze("grayscale"),h=Ze("hueRotate"),p=Ze("invert"),m=Ze("gap"),y=Ze("gradientColorStops"),T=Ze("inset"),C=Ze("margin"),A=Ze("opacity"),v=Ze("padding"),E=Ze("saturate"),I=Ze("scale"),x=Ze("sepia"),M=Ze("skew"),W=Ze("space"),B=Ze("translate"),Q=function(){return["auto","contain","none"]},q=function(){return["auto","hidden","clip","visible","scroll"]},H=function(){return["auto",e]},pe=function(){return["",ur]},Ue=function(){return["auto",du,ht]},ot=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},we=function(){return["solid","dashed","dotted","double","none"]},Ce=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},xt=function(){return["start","end","center","between","around","evenly"]},Je=function(){return["","0",ht]},Y=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},ee=function(){return[du,$m]},re=function(){return[du,ht]};return{cacheSize:500,theme:{colors:[Fl],spacing:[ur],blur:["none","",Di,zs],brightness:ee(),borderColor:[t],borderRadius:["none","","full",Di,zs],borderSpacing:[e],borderWidth:pe(),contrast:ee(),grayscale:Je(),hueRotate:re(),invert:Je(),gap:[e],gradientColorStops:[t],inset:H(),margin:H(),opacity:ee(),padding:[e],saturate:ee(),scale:ee(),sepia:Je(),skew:re(),space:[e],translate:[e]},classGroups:{aspect:[{aspect:["auto","square","video",ht]}],container:["container"],columns:[{columns:[Di]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(ot(),[ht])}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:Q()}],"overscroll-x":[{"overscroll-x":Q()}],"overscroll-y":[{"overscroll-y":Q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[T]}],"inset-x":[{"inset-x":[T]}],"inset-y":[{"inset-y":[T]}],top:[{top:[T]}],right:[{right:[T]}],bottom:[{bottom:[T]}],left:[{left:[T]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ll]}],basis:[{basis:[e]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ht]}],grow:[{grow:Je()}],shrink:[{shrink:Je()}],order:[{order:["first","last","none",Ll]}],"grid-cols":[{"grid-cols":[Fl]}],"col-start-end":[{col:["auto",{span:[Ll]},ht]}],"col-start":[{"col-start":Ue()}],"col-end":[{"col-end":Ue()}],"grid-rows":[{"grid-rows":[Fl]}],"row-start-end":[{row:["auto",{span:[Ll]},ht]}],"row-start":[{"row-start":Ue()}],"row-end":[{"row-end":Ue()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ht]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ht]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:xt()}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:[].concat(xt(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(xt(),["baseline","stretch"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[C]}],mx:[{mx:[C]}],my:[{my:[C]}],mt:[{mt:[C]}],mr:[{mr:[C]}],mb:[{mb:[C]}],ml:[{ml:[C]}],"space-x":[{"space-x":[W]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[W]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",e]}],"min-w":[{"min-w":["min","max","fit",ur]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Di]},Di,zs]}],h:[{h:[e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ur]}],"max-h":[{"max-h":[e,"min","max","fit"]}],"font-size":[{text:["base",Di,zs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",$m]}],"font-family":[{font:[Fl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",zs]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ur]}],"list-style-type":[{list:["none","disc","decimal",ht]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(we(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",ur]}],"underline-offset":[{"underline-offset":["auto",ur]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:[e]}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",zs]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap"]}],break:[{break:["normal","words","all","keep"]}],content:[{content:["none",ht]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(ot(),[NV])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",xV]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},OV]}],"bg-color":[{bg:[t]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[].concat(we(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:we()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(we())}],"outline-offset":[{"outline-offset":[ur]}],"outline-w":[{outline:[ur]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:pe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[ur]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Di,PV]}],"shadow-color":[{shadow:[Fl]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":Ce()}],"bg-blend":[{"bg-blend":Ce()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Di,ht]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[E]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ht]}],duration:[{duration:re()}],ease:[{ease:["linear","in","out","in-out",ht]}],delay:[{delay:re()}],animate:[{animate:["none","spin","ping","pulse","bounce",ht]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Ll,ht]}],"translate-x":[{"translate-x":[B]}],"translate-y":[{"translate-y":[B]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ht]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ht]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":[e]}],"scroll-mx":[{"scroll-mx":[e]}],"scroll-my":[{"scroll-my":[e]}],"scroll-mt":[{"scroll-mt":[e]}],"scroll-mr":[{"scroll-mr":[e]}],"scroll-mb":[{"scroll-mb":[e]}],"scroll-ml":[{"scroll-ml":[e]}],"scroll-p":[{"scroll-p":[e]}],"scroll-px":[{"scroll-px":[e]}],"scroll-py":[{"scroll-py":[e]}],"scroll-pt":[{"scroll-pt":[e]}],"scroll-pr":[{"scroll-pr":[e]}],"scroll-pb":[{"scroll-pb":[e]}],"scroll-pl":[{"scroll-pl":[e]}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ht]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ur,$m]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-t","rounded-r","rounded-b","rounded-l","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]}}}var UV=CV(MV);function ho(...t){return UV(t.filter(Boolean).join(" "))}const UC=({fill:t})=>D.jsx("svg",{width:"22",height:"24",viewBox:"0 0 19 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:D.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.60951 0.899902C10.0237 0.899902 10.3595 1.23569 10.3595 1.6499V6.4449C10.3595 6.85911 10.0237 7.1949 9.60951 7.1949C9.1953 7.1949 8.85951 6.85911 8.85951 6.4449V1.6499C8.85951 1.23569 9.1953 0.899902 9.60951 0.899902ZM5.42907 3.8546C5.65425 4.20226 5.55496 4.66664 5.2073 4.89182C2.97464 6.33793 1.5 8.84883 1.5 11.7037C1.5 16.1825 5.13075 19.8132 9.60951 19.8132C14.0883 19.8132 17.719 16.1825 17.719 11.7037C17.719 8.84883 16.2444 6.33793 14.0117 4.89182C13.6641 4.66664 13.5648 4.20226 13.79 3.8546C14.0151 3.50695 14.4795 3.40766 14.8272 3.63284C17.4686 5.34372 19.219 8.31908 19.219 11.7037C19.219 17.0109 14.9167 21.3132 9.60951 21.3132C4.30233 21.3132 0 17.0109 0 11.7037C0 8.31908 1.75042 5.34372 4.39185 3.63284C4.73951 3.40766 5.20389 3.50695 5.42907 3.8546Z",fill:t})});function $V({isBig:t=!1,label:e,deviceId:n,isOffline:r=!1}){const{value:i,emitEvent:s,meta:o}=vi(e,n),l=i===0||r?"off":"on";function c(f){r||(f.preventDefault(),s(l==="on"?0:100))}return D.jsxs("div",{onClick:c,className:ho("relative grid cursor-pointer place-items-center rounded-full",t?"h-12 w-12":"h-10 w-10",r&&"bg-white-12",!r&&l==="off"&&"bg-white-12 hover:bg-white-24",!r&&l==="on"&&"switch-on-glow"),children:[r&&D.jsx(UC,{fill:"rgba(255,255,255,0.24)"}),l==="off"&&!r&&D.jsx(UC,{fill:"white"}),l==="on"&&!r&&D.jsx("img",{src:"./ON.svg"})]})}const id=k;function BV({title:t,titleId:e,...n},r){return id.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?id.createElement("title",{id:e},t):null,id.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"}))}const jV=id.forwardRef(BV);var WV=jV;const sd=k;function zV({title:t,titleId:e,...n},r){return sd.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?sd.createElement("title",{id:e},t):null,sd.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"}))}const VV=sd.forwardRef(zV);var GV=VV;const od=k;function HV({title:t,titleId:e,...n},r){return od.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?od.createElement("title",{id:e},t):null,od.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const KV=od.forwardRef(HV);var qV=KV;const ad=k;function YV({title:t,titleId:e,...n},r){return ad.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?ad.createElement("title",{id:e},t):null,ad.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const QV=ad.forwardRef(YV);var JV=QV,XV=WV,ZV=GV,eG=qV,tG=JV;const ld=k;function nG({title:t,titleId:e,...n},r){return ld.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?ld.createElement("title",{id:e},t):null,ld.createElement("path",{fillRule:"evenodd",d:"M20.599 1.5c-.376 0-.743.111-1.055.32l-5.08 3.385a18.747 18.747 0 00-3.471 2.987 10.04 10.04 0 014.815 4.815 18.748 18.748 0 002.987-3.472l3.386-5.079A1.902 1.902 0 0020.599 1.5zm-8.3 14.025a18.76 18.76 0 001.896-1.207 8.026 8.026 0 00-4.513-4.513A18.75 18.75 0 008.475 11.7l-.278.5a5.26 5.26 0 013.601 3.602l.502-.278zM6.75 13.5A3.75 3.75 0 003 17.25a1.5 1.5 0 01-1.601 1.497.75.75 0 00-.7 1.123 5.25 5.25 0 009.8-2.62 3.75 3.75 0 00-3.75-3.75z",clipRule:"evenodd"}))}const rG=ld.forwardRef(nG);var iG=rG;const ud=k;function sG({title:t,titleId:e,...n},r){return ud.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?ud.createElement("title",{id:e},t):null,ud.createElement("path",{d:"M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z"}))}const oG=ud.forwardRef(sG);var aG=oG,lG=iG,Qu=aG;function uG({}){const{pathname:t}=za(),e=t;console.log(e);const n=e==="/animations",r="/";return D.jsxs(D.Fragment,{children:[D.jsx("div",{className:"relative -z-10 h-[76px]"}),D.jsx("div",{className:"bg-darkglass fixed bottom-0 left-0 right-0 border-t border-white-12",children:D.jsx("div",{className:"m-auto flex max-w-[393px] items-center justify-around p-4",children:D.jsxs(wU,{to:r,className:ho("flex w-16 cursor-pointer flex-col items-center  gap-1",n?"text-white-60":"text-white-100"),children:[n?D.jsx(tG,{className:"w-6"}):D.jsx(lG,{className:"w-6"}),D.jsx("p",{className:"m-0 text-xs",children:"Barva"})]})})})]})}/*! Fast Average Color | © 2022 Denis Seleznev | MIT License | https://github.com/fast-average-color/fast-average-color */function cG(t){var e=t.toString(16);return e.length===1?"0"+e:e}function $C(t){return"#"+t.map(cG).join("")}function fG(t){var e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128}function dG(t){return t?hG(t)?t:[t]:[]}function hG(t){return Array.isArray(t[0])}function jy(t,e,n){for(var r=0;r<n.length;r++)if(pG(t,e,n[r]))return!0;return!1}function pG(t,e,n){switch(n.length){case 3:if(gG(t,e,n))return!0;break;case 4:if(mG(t,e,n))return!0;break;case 5:if(vG(t,e,n))return!0;break;default:return!1}}function gG(t,e,n){return t[e+3]!==255||t[e]===n[0]&&t[e+1]===n[1]&&t[e+2]===n[2]}function mG(t,e,n){return t[e+3]&&n[3]?t[e]===n[0]&&t[e+1]===n[1]&&t[e+2]===n[2]&&t[e+3]===n[3]:t[e+3]===n[3]}function Mf(t,e,n){return t>=e-n&&t<=e+n}function vG(t,e,n){var r=n[0],i=n[1],s=n[2],o=n[3],l=n[4],c=t[e+3],f=Mf(c,o,l);return o?!!(!c&&f||Mf(t[e],r,l)&&Mf(t[e+1],i,l)&&Mf(t[e+2],s,l)&&f):f}function _G(t,e,n){for(var r={},i=24,s=n.ignoredColor,o=n.step,l=[0,0,0,0,0],c=0;c<e;c+=o){var f=t[c],h=t[c+1],p=t[c+2],m=t[c+3];if(!(s&&jy(t,c,s))){var y=Math.round(f/i)+","+Math.round(h/i)+","+Math.round(p/i);r[y]?r[y]=[r[y][0]+f*m,r[y][1]+h*m,r[y][2]+p*m,r[y][3]+m,r[y][4]+1]:r[y]=[f*m,h*m,p*m,m,1],l[4]<r[y][4]&&(l=r[y])}}var T=l[0],C=l[1],A=l[2],v=l[3],E=l[4];return v?[Math.round(T/v),Math.round(C/v),Math.round(A/v),Math.round(v/E)]:n.defaultColor}function yG(t,e,n){for(var r=0,i=0,s=0,o=0,l=0,c=n.ignoredColor,f=n.step,h=0;h<e;h+=f){var p=t[h+3],m=t[h]*p,y=t[h+1]*p,T=t[h+2]*p;c&&jy(t,h,c)||(r+=m,i+=y,s+=T,o+=p,l++)}return o?[Math.round(r/o),Math.round(i/o),Math.round(s/o),Math.round(o/l)]:n.defaultColor}function wG(t,e,n){for(var r=0,i=0,s=0,o=0,l=0,c=n.ignoredColor,f=n.step,h=0;h<e;h+=f){var p=t[h],m=t[h+1],y=t[h+2],T=t[h+3];c&&jy(t,h,c)||(r+=p*p*T,i+=m*m*T,s+=y*y*T,o+=T,l++)}return o?[Math.round(Math.sqrt(r/o)),Math.round(Math.sqrt(i/o)),Math.round(Math.sqrt(s/o)),Math.round(o/l)]:n.defaultColor}function BC(t){return Yl(t,"defaultColor",[0,0,0,0])}function Yl(t,e,n){return t[e]===void 0?n:t[e]}var jC=10,x_=100;function EG(t){return t.search(/\.svg(\?|$)/i)!==-1}function SG(t){if(wx(t)){var e=t.naturalWidth,n=t.naturalHeight;return!t.naturalWidth&&EG(t.src)&&(e=n=x_),{width:e,height:n}}return CG(t)?{width:t.videoWidth,height:t.videoHeight}:{width:t.width,height:t.height}}function WC(t){return IG(t)?"canvas":bG(t)?"offscreencanvas":TG(t)?"imagebitmap":t.src}function wx(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement}var Ex=typeof OffscreenCanvas<"u";function bG(t){return Ex&&t instanceof OffscreenCanvas}function CG(t){return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement}function IG(t){return typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement}function TG(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap}function AG(t,e){var n=Yl(e,"left",0),r=Yl(e,"top",0),i=Yl(e,"width",t.width),s=Yl(e,"height",t.height),o=i,l=s;if(e.mode==="precision")return{srcLeft:n,srcTop:r,srcWidth:i,srcHeight:s,destWidth:o,destHeight:l};var c;return i>s?(c=i/s,o=x_,l=Math.round(o/c)):(c=s/i,l=x_,o=Math.round(l/c)),(o>i||l>s||o<jC||l<jC)&&(o=i,l=s),{srcLeft:n,srcTop:r,srcWidth:i,srcHeight:s,destWidth:o,destHeight:l}}var RG=typeof window>"u";function kG(){return RG?Ex?new OffscreenCanvas(1,1):null:document.createElement("canvas")}var xG="FastAverageColor: ";function Ar(t){return Error(xG+t)}function Ml(t,e){e||console.error(t)}var NG=function(){function t(){this.canvas=null,this.ctx=null}return t.prototype.getColorAsync=function(e,n){if(!e)return Promise.reject(Ar("call .getColorAsync() without resource."));if(typeof e=="string"){if(typeof Image>"u")return Promise.reject(Ar("resource as string is not supported in this environment"));var r=new Image;return r.crossOrigin=n&&n.crossOrigin||"",r.src=e,this.bindImageEvents(r,n)}else{if(wx(e)&&!e.complete)return this.bindImageEvents(e,n);var i=this.getColor(e,n);return i.error?Promise.reject(i.error):Promise.resolve(i)}},t.prototype.getColor=function(e,n){n=n||{};var r=BC(n);if(!e){var i=Ar("call .getColor(null) without resource");return Ml(i,n.silent),this.prepareResult(r,i)}var s=SG(e),o=AG(s,n);if(!o.srcWidth||!o.srcHeight||!o.destWidth||!o.destHeight){var i=Ar('incorrect sizes for resource "'.concat(WC(e),'"'));return Ml(i,n.silent),this.prepareResult(r,i)}if(!this.canvas&&(this.canvas=kG(),!this.canvas)){var i=Ar("OffscreenCanvas is not supported in this browser");return Ml(i,n.silent),this.prepareResult(r,i)}if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx){var i=Ar("Canvas Context 2D is not supported in this browser");return Ml(i,n.silent),this.prepareResult(r)}this.ctx.imageSmoothingEnabled=!1}this.canvas.width=o.destWidth,this.canvas.height=o.destHeight;try{this.ctx.clearRect(0,0,o.destWidth,o.destHeight),this.ctx.drawImage(e,o.srcLeft,o.srcTop,o.srcWidth,o.srcHeight,0,0,o.destWidth,o.destHeight);var l=this.ctx.getImageData(0,0,o.destWidth,o.destHeight).data;return this.prepareResult(this.getColorFromArray4(l,n))}catch(c){var i=Ar("security error (CORS) for resource ".concat(WC(e),`.
Details: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image`));return Ml(i,n.silent),!n.silent&&console.error(c),this.prepareResult(r,i)}},t.prototype.getColorFromArray4=function(e,n){n=n||{};var r=4,i=e.length,s=BC(n);if(i<r)return s;var o=i-i%r,l=(n.step||1)*r,c;switch(n.algorithm||"sqrt"){case"simple":c=yG;break;case"sqrt":c=wG;break;case"dominant":c=_G;break;default:throw Ar("".concat(n.algorithm," is unknown algorithm"))}return c(e,o,{defaultColor:s,ignoredColor:dG(n.ignoredColor),step:l})},t.prototype.prepareResult=function(e,n){var r=e.slice(0,3),i=[e[0],e[1],e[2],e[3]/255],s=fG(e);return{value:[e[0],e[1],e[2],e[3]],rgb:"rgb("+r.join(",")+")",rgba:"rgba("+i.join(",")+")",hex:$C(r),hexa:$C(e),isDark:s,isLight:!s,error:n}},t.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},t.prototype.bindImageEvents=function(e,n){var r=this;return new Promise(function(i,s){var o=function(){f();var h=r.getColor(e,n);h.error?s(h.error):i(h)},l=function(){f(),s(Ar('Error loading image "'.concat(e.src,'".')))},c=function(){f(),s(Ar('Image "'.concat(e.src,'" loading aborted')))},f=function(){e.removeEventListener("load",o),e.removeEventListener("error",l),e.removeEventListener("abort",c)};e.addEventListener("load",o),e.addEventListener("error",l),e.addEventListener("abort",c)})},t}();/*!
 * iro.js v5.5.2
 * 2016-2021 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */var rt,gh,Sx,N_,bx,hs={},Wy=[],OG=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function Qi(t,e){for(var n in e)t[n]=e[n];return t}function Cx(t){var e=t.parentNode;e&&e.removeChild(t)}function je(t,e,n){var r,i,s,o,l=arguments;if(e=Qi({},e),arguments.length>3)for(n=[n],r=3;r<arguments.length;r++)n.push(l[r]);if(n!=null&&(e.children=n),t!=null&&t.defaultProps!=null)for(i in t.defaultProps)e[i]===void 0&&(e[i]=t.defaultProps[i]);return o=e.key,(s=e.ref)!=null&&delete e.ref,o!=null&&delete e.key,O_(t,e,o,s)}function O_(t,e,n,r){var i={type:t,props:e,key:n,ref:r,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return rt.vnode&&rt.vnode(i),i}function op(t){return t.children}function PG(t){if(t==null||typeof t=="boolean")return null;if(typeof t=="string"||typeof t=="number")return O_(null,t,null,null);if(t.__e!=null||t.__c!=null){var e=O_(t.type,t.props,t.key,null);return e.__e=t.__e,e}return t}function wa(t,e){this.props=t,this.context=e}function mh(t,e){if(e==null)return t.__p?mh(t.__p,t.__p.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?mh(t):null}function Ix(t){var e,n;if((t=t.__p)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Ix(t)}}function Bm(t){(!t.__d&&(t.__d=!0)&&gh.push(t)===1||N_!==rt.debounceRendering)&&(N_=rt.debounceRendering,(rt.debounceRendering||Sx)(DG))}function DG(){var t,e,n,r,i,s,o,l;for(gh.sort(function(c,f){return f.__v.__b-c.__v.__b});t=gh.pop();)t.__d&&(n=void 0,r=void 0,s=(i=(e=t).__v).__e,o=e.__P,l=e.u,e.u=!1,o&&(n=[],r=Vy(o,i,Qi({},i),e.__n,o.ownerSVGElement!==void 0,null,n,l,s??mh(i)),Ax(n,i),r!=s&&Ix(i)))}function Tx(t,e,n,r,i,s,o,l,c){var f,h,p,m,y,T,C,A=n&&n.__k||Wy,v=A.length;if(l==hs&&(l=s!=null?s[0]:v?mh(n,0):null),f=0,e.__k=zy(e.__k,function(E){if(E!=null){if(E.__p=e,E.__b=e.__b+1,(p=A[f])===null||p&&E.key==p.key&&E.type===p.type)A[f]=void 0;else for(h=0;h<v;h++){if((p=A[h])&&E.key==p.key&&E.type===p.type){A[h]=void 0;break}p=null}if(m=Vy(t,E,p=p||hs,r,i,s,o,null,l,c),(h=E.ref)&&p.ref!=h&&(C||(C=[])).push(h,E.__c||m,E),m!=null){if(T==null&&(T=m),E.l!=null)m=E.l,E.l=null;else if(s==p||m!=l||m.parentNode==null){e:if(l==null||l.parentNode!==t)t.appendChild(m);else{for(y=l,h=0;(y=y.nextSibling)&&h<v;h+=2)if(y==m)break e;t.insertBefore(m,l)}e.type=="option"&&(t.value="")}l=m.nextSibling,typeof e.type=="function"&&(e.l=m)}}return f++,E}),e.__e=T,s!=null&&typeof e.type!="function")for(f=s.length;f--;)s[f]!=null&&Cx(s[f]);for(f=v;f--;)A[f]!=null&&kx(A[f],A[f]);if(C)for(f=0;f<C.length;f++)Rx(C[f],C[++f],C[++f])}function zy(t,e,n){if(n==null&&(n=[]),t==null||typeof t=="boolean")e&&n.push(e(null));else if(Array.isArray(t))for(var r=0;r<t.length;r++)zy(t[r],e,n);else n.push(e?e(PG(t)):t);return n}function LG(t,e,n,r,i){var s;for(s in n)s in e||VC(t,s,null,n[s],r);for(s in e)i&&typeof e[s]!="function"||s==="value"||s==="checked"||n[s]===e[s]||VC(t,s,e[s],n[s],r)}function zC(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=typeof n=="number"&&OG.test(e)===!1?n+"px":n??""}function VC(t,e,n,r,i){var s,o,l,c,f;if(!((e=i?e==="className"?"class":e:e==="class"?"className":e)==="key"||e==="children"))if(e==="style")if(s=t.style,typeof n=="string")s.cssText=n;else{if(typeof r=="string"&&(s.cssText="",r=null),r)for(o in r)n&&o in n||zC(s,o,"");if(n)for(l in n)r&&n[l]===r[l]||zC(s,l,n[l])}else e[0]==="o"&&e[1]==="n"?(c=e!==(e=e.replace(/Capture$/,"")),f=e.toLowerCase(),e=(f in t?f:e).slice(2),n?(r||t.addEventListener(e,GC,c),(t.t||(t.t={}))[e]=n):t.removeEventListener(e,GC,c)):e!=="list"&&e!=="tagName"&&e!=="form"&&!i&&e in t?t[e]=n??"":typeof n!="function"&&e!=="dangerouslySetInnerHTML"&&(e!==(e=e.replace(/^xlink:?/,""))?n==null||n===!1?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):n==null||n===!1?t.removeAttribute(e):t.setAttribute(e,n))}function GC(t){return this.t[t.type](rt.event?rt.event(t):t)}function Vy(t,e,n,r,i,s,o,l,c,f){var h,p,m,y,T,C,A,v,E,I,x=e.type;if(e.constructor!==void 0)return null;(h=rt.__b)&&h(e);try{e:if(typeof x=="function"){if(v=e.props,E=(h=x.contextType)&&r[h.__c],I=h?E?E.props.value:h.__p:r,n.__c?A=(p=e.__c=n.__c).__p=p.__E:("prototype"in x&&x.prototype.render?e.__c=p=new x(v,I):(e.__c=p=new wa(v,I),p.constructor=x,p.render=MG),E&&E.sub(p),p.props=v,p.state||(p.state={}),p.context=I,p.__n=r,m=p.__d=!0,p.__h=[]),p.__s==null&&(p.__s=p.state),x.getDerivedStateFromProps!=null&&Qi(p.__s==p.state?p.__s=Qi({},p.__s):p.__s,x.getDerivedStateFromProps(v,p.__s)),m)x.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),p.componentDidMount!=null&&o.push(p);else{if(x.getDerivedStateFromProps==null&&l==null&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(v,I),!l&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(v,p.__s,I)===!1){for(p.props=v,p.state=p.__s,p.__d=!1,p.__v=e,e.__e=c!=null?c!==n.__e?c:n.__e:null,e.__k=n.__k,h=0;h<e.__k.length;h++)e.__k[h]&&(e.__k[h].__p=e);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(v,p.__s,I)}for(y=p.props,T=p.state,p.context=I,p.props=v,p.state=p.__s,(h=rt.__r)&&h(e),p.__d=!1,p.__v=e,p.__P=t,h=p.render(p.props,p.state,p.context),e.__k=zy(h!=null&&h.type==op&&h.key==null?h.props.children:h),p.getChildContext!=null&&(r=Qi(Qi({},r),p.getChildContext())),m||p.getSnapshotBeforeUpdate==null||(C=p.getSnapshotBeforeUpdate(y,T)),Tx(t,e,n,r,i,s,o,c,f),p.base=e.__e;h=p.__h.pop();)p.__s&&(p.state=p.__s),h.call(p);m||y==null||p.componentDidUpdate==null||p.componentDidUpdate(y,T,C),A&&(p.__E=p.__p=null)}else e.__e=FG(n.__e,e,n,r,i,s,o,f);(h=rt.diffed)&&h(e)}catch(M){rt.__e(M,e,n)}return e.__e}function Ax(t,e){for(var n;n=t.pop();)try{n.componentDidMount()}catch(r){rt.__e(r,n.__v)}rt.__c&&rt.__c(e)}function FG(t,e,n,r,i,s,o,l){var c,f,h,p,m=n.props,y=e.props;if(i=e.type==="svg"||i,t==null&&s!=null){for(c=0;c<s.length;c++)if((f=s[c])!=null&&(e.type===null?f.nodeType===3:f.localName===e.type)){t=f,s[c]=null;break}}if(t==null){if(e.type===null)return document.createTextNode(y);t=i?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type),s=null}return e.type===null?m!==y&&(s!=null&&(s[s.indexOf(t)]=null),t.data=y):e!==n&&(s!=null&&(s=Wy.slice.call(t.childNodes)),h=(m=n.props||hs).dangerouslySetInnerHTML,p=y.dangerouslySetInnerHTML,l||(p||h)&&(p&&h&&p.__html==h.__html||(t.innerHTML=p&&p.__html||"")),LG(t,y,m,i,l),e.__k=e.props.children,p||Tx(t,e,n,r,e.type!=="foreignObject"&&i,s,o,hs,l),l||("value"in y&&y.value!==void 0&&y.value!==t.value&&(t.value=y.value==null?"":y.value),"checked"in y&&y.checked!==void 0&&y.checked!==t.checked&&(t.checked=y.checked))),t}function Rx(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){rt.__e(r,n)}}function kx(t,e,n){var r,i,s;if(rt.unmount&&rt.unmount(t),(r=t.ref)&&Rx(r,null,e),n||typeof t.type=="function"||(n=(i=t.__e)!=null),t.__e=t.l=null,(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){rt.__e(o,e)}r.base=r.__P=null}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&kx(r[s],e,n);i!=null&&Cx(i)}function MG(t,e,n){return this.constructor(t,n)}function UG(t,e,n){var r,i,s;rt.__p&&rt.__p(t,e),i=(r=n===bx)?null:n&&n.__k||e.__k,t=je(op,null,[t]),s=[],Vy(e,r?e.__k=t:(n||e).__k=t,i||hs,hs,e.ownerSVGElement!==void 0,n&&!r?[n]:i?null:Wy.slice.call(e.childNodes),s,!1,n||hs,r),Ax(s,t)}rt={},wa.prototype.setState=function(t,e){var n=this.__s!==this.state&&this.__s||(this.__s=Qi({},this.state));(typeof t!="function"||(t=t(n,this.props)))&&Qi(n,t),t!=null&&this.__v&&(this.u=!1,e&&this.__h.push(e),Bm(this))},wa.prototype.forceUpdate=function(t){this.__v&&(t&&this.__h.push(t),this.u=!0,Bm(this))},wa.prototype.render=op,gh=[],Sx=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,N_=rt.debounceRendering,rt.__e=function(t,e,n){for(var r;e=e.__p;)if((r=e.__c)&&!r.__p)try{if(r.constructor&&r.constructor.getDerivedStateFromError!=null)r.setState(r.constructor.getDerivedStateFromError(t));else{if(r.componentDidCatch==null)continue;r.componentDidCatch(t)}return Bm(r.__E=r)}catch(i){t=i}throw t},bx=hs;function HC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $G(t,e,n){return e&&HC(t.prototype,e),n&&HC(t,n),t}function dn(){return dn=Object.assign||function(t){for(var e=arguments,n=1;n<arguments.length;n++){var r=e[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},dn.apply(this,arguments)}var BG="[-\\+]?\\d+%?",jG="[-\\+]?\\d*\\.\\d+%?",qs="(?:"+jG+")|(?:"+BG+")",xx="[\\s|\\(]+("+qs+")[,|\\s]+("+qs+")[,|\\s]+("+qs+")\\s*\\)?",Nx="[\\s|\\(]+("+qs+")[,|\\s]+("+qs+")[,|\\s]+("+qs+")[,|\\s]+("+qs+")\\s*\\)?",WG=new RegExp("rgb"+xx),zG=new RegExp("rgba"+Nx),VG=new RegExp("hsl"+xx),GG=new RegExp("hsla"+Nx),ap="^(?:#?|0x?)",Ys="([0-9a-fA-F]{1})",Qs="([0-9a-fA-F]{2})",HG=new RegExp(ap+Ys+Ys+Ys+"$"),KG=new RegExp(ap+Ys+Ys+Ys+Ys+"$"),qG=new RegExp(ap+Qs+Qs+Qs+"$"),YG=new RegExp(ap+Qs+Qs+Qs+Qs+"$"),QG=2e3,JG=4e4,Uf=Math.log,Bo=Math.round,Ul=Math.floor;function Gn(t,e,n){return Math.min(Math.max(t,e),n)}function cn(t,e){var n=t.indexOf("%")>-1,r=parseFloat(t);return n?e/100*r:r}function fn(t){return parseInt(t,16)}function Us(t){return t.toString(16).padStart(2,"0")}var oa=function(){function t(n,r){this.$={h:0,s:0,v:0,a:1},n&&this.set(n),this.onChange=r,this.initialValue=dn({},this.$)}var e=t.prototype;return e.set=function(r){if(typeof r=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(r)?this.hexString=r:/^rgba?/.test(r)?this.rgbString=r:/^hsla?/.test(r)&&(this.hslString=r);else if(typeof r=="object")r instanceof t?this.hsva=r.hsva:"r"in r&&"g"in r&&"b"in r?this.rgb=r:"h"in r&&"s"in r&&"v"in r?this.hsv=r:"h"in r&&"s"in r&&"l"in r?this.hsl=r:"kelvin"in r&&(this.kelvin=r.kelvin);else throw new Error("Invalid color value")},e.setChannel=function(r,i,s){var o;this[r]=dn({},this[r],(o={},o[i]=s,o))},e.reset=function(){this.hsva=this.initialValue},e.clone=function(){return new t(this)},e.unbind=function(){this.onChange=void 0},t.hsvToRgb=function(r){var i=r.h/60,s=r.s/100,o=r.v/100,l=Ul(i),c=i-l,f=o*(1-s),h=o*(1-c*s),p=o*(1-(1-c)*s),m=l%6,y=[o,h,f,f,p,o][m],T=[p,o,o,h,f,f][m],C=[f,f,p,o,o,h][m];return{r:Gn(y*255,0,255),g:Gn(T*255,0,255),b:Gn(C*255,0,255)}},t.rgbToHsv=function(r){var i=r.r/255,s=r.g/255,o=r.b/255,l=Math.max(i,s,o),c=Math.min(i,s,o),f=l-c,h=0,p=l,m=l===0?0:f/l;switch(l){case c:h=0;break;case i:h=(s-o)/f+(s<o?6:0);break;case s:h=(o-i)/f+2;break;case o:h=(i-s)/f+4;break}return{h:h*60%360,s:Gn(m*100,0,100),v:Gn(p*100,0,100)}},t.hsvToHsl=function(r){var i=r.s/100,s=r.v/100,o=(2-i)*s,l=o<=1?o:2-o,c=l<1e-9?0:i*s/l;return{h:r.h,s:Gn(c*100,0,100),l:Gn(o*50,0,100)}},t.hslToHsv=function(r){var i=r.l*2,s=r.s*(i<=100?i:200-i)/100,o=i+s<1e-9?0:2*s/(i+s);return{h:r.h,s:Gn(o*100,0,100),v:Gn((i+s)/2,0,100)}},t.kelvinToRgb=function(r){var i=r/100,s,o,l;return i<66?(s=255,o=-155.25485562709179-.44596950469579133*(o=i-2)+104.49216199393888*Uf(o),l=i<20?0:-254.76935184120902+.8274096064007395*(l=i-10)+115.67994401066147*Uf(l)):(s=351.97690566805693+.114206453784165*(s=i-55)-40.25366309332127*Uf(s),o=325.4494125711974+.07943456536662342*(o=i-50)-28.0852963507957*Uf(o),l=255),{r:Gn(Ul(s),0,255),g:Gn(Ul(o),0,255),b:Gn(Ul(l),0,255)}},t.rgbToKelvin=function(r){for(var i=r.r,s=r.b,o=.4,l=QG,c=JG,f;c-l>o;){f=(c+l)*.5;var h=t.kelvinToRgb(f);h.b/h.r>=s/i?c=f:l=f}return f},$G(t,[{key:"hsv",get:function(){var r=this.$;return{h:r.h,s:r.s,v:r.v}},set:function(r){var i=this.$;if(r=dn({},i,r),this.onChange){var s={h:!1,v:!1,s:!1,a:!1};for(var o in i)s[o]=r[o]!=i[o];this.$=r,(s.h||s.s||s.v||s.a)&&this.onChange(this,s)}else this.$=r}},{key:"hsva",get:function(){return dn({},this.$)},set:function(r){this.hsv=r}},{key:"hue",get:function(){return this.$.h},set:function(r){this.hsv={h:r}}},{key:"saturation",get:function(){return this.$.s},set:function(r){this.hsv={s:r}}},{key:"value",get:function(){return this.$.v},set:function(r){this.hsv={v:r}}},{key:"alpha",get:function(){return this.$.a},set:function(r){this.hsv=dn({},this.hsv,{a:r})}},{key:"kelvin",get:function(){return t.rgbToKelvin(this.rgb)},set:function(r){this.rgb=t.kelvinToRgb(r)}},{key:"red",get:function(){var r=this.rgb;return r.r},set:function(r){this.rgb=dn({},this.rgb,{r})}},{key:"green",get:function(){var r=this.rgb;return r.g},set:function(r){this.rgb=dn({},this.rgb,{g:r})}},{key:"blue",get:function(){var r=this.rgb;return r.b},set:function(r){this.rgb=dn({},this.rgb,{b:r})}},{key:"rgb",get:function(){var r=t.hsvToRgb(this.$),i=r.r,s=r.g,o=r.b;return{r:Bo(i),g:Bo(s),b:Bo(o)}},set:function(r){this.hsv=dn({},t.rgbToHsv(r),{a:r.a===void 0?1:r.a})}},{key:"rgba",get:function(){return dn({},this.rgb,{a:this.alpha})},set:function(r){this.rgb=r}},{key:"hsl",get:function(){var r=t.hsvToHsl(this.$),i=r.h,s=r.s,o=r.l;return{h:Bo(i),s:Bo(s),l:Bo(o)}},set:function(r){this.hsv=dn({},t.hslToHsv(r),{a:r.a===void 0?1:r.a})}},{key:"hsla",get:function(){return dn({},this.hsl,{a:this.alpha})},set:function(r){this.hsl=r}},{key:"rgbString",get:function(){var r=this.rgb;return"rgb("+r.r+", "+r.g+", "+r.b+")"},set:function(r){var i,s,o,l,c=1;if((i=WG.exec(r))?(s=cn(i[1],255),o=cn(i[2],255),l=cn(i[3],255)):(i=zG.exec(r))&&(s=cn(i[1],255),o=cn(i[2],255),l=cn(i[3],255),c=cn(i[4],1)),i)this.rgb={r:s,g:o,b:l,a:c};else throw new Error("Invalid rgb string")}},{key:"rgbaString",get:function(){var r=this.rgba;return"rgba("+r.r+", "+r.g+", "+r.b+", "+r.a+")"},set:function(r){this.rgbString=r}},{key:"hexString",get:function(){var r=this.rgb;return"#"+Us(r.r)+Us(r.g)+Us(r.b)},set:function(r){var i,s,o,l,c=255;if((i=HG.exec(r))?(s=fn(i[1])*17,o=fn(i[2])*17,l=fn(i[3])*17):(i=KG.exec(r))?(s=fn(i[1])*17,o=fn(i[2])*17,l=fn(i[3])*17,c=fn(i[4])*17):(i=qG.exec(r))?(s=fn(i[1]),o=fn(i[2]),l=fn(i[3])):(i=YG.exec(r))&&(s=fn(i[1]),o=fn(i[2]),l=fn(i[3]),c=fn(i[4])),i)this.rgb={r:s,g:o,b:l,a:c/255};else throw new Error("Invalid hex string")}},{key:"hex8String",get:function(){var r=this.rgba;return"#"+Us(r.r)+Us(r.g)+Us(r.b)+Us(Ul(r.a*255))},set:function(r){this.hexString=r}},{key:"hslString",get:function(){var r=this.hsl;return"hsl("+r.h+", "+r.s+"%, "+r.l+"%)"},set:function(r){var i,s,o,l,c=1;if((i=VG.exec(r))?(s=cn(i[1],360),o=cn(i[2],100),l=cn(i[3],100)):(i=GG.exec(r))&&(s=cn(i[1],360),o=cn(i[2],100),l=cn(i[3],100),c=cn(i[4],1)),i)this.hsl={h:s,s:o,l,a:c};else throw new Error("Invalid hsl string")}},{key:"hslaString",get:function(){var r=this.hsla;return"hsla("+r.h+", "+r.s+"%, "+r.l+"%, "+r.a+")"},set:function(r){this.hslString=r}}]),t}(),XG={sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3};function Gy(t){var e,n=t.width,r=t.sliderSize,i=t.borderWidth,s=t.handleRadius,o=t.padding,l=t.sliderShape,c=t.layoutDirection==="horizontal";return r=(e=r)!=null?e:o*2+s*2,l==="circle"?{handleStart:t.padding+t.handleRadius,handleRange:n-o*2-s*2,width:n,height:n,cx:n/2,cy:n/2,radius:n/2-i/2}:{handleStart:r/2,handleRange:n-r,radius:r/2,x:0,y:0,width:c?r:n,height:c?n:r}}function ZG(t,e){var n=e.hsva,r=e.rgb;switch(t.sliderType){case"red":return r.r/2.55;case"green":return r.g/2.55;case"blue":return r.b/2.55;case"alpha":return n.a*100;case"kelvin":var i=t.minTemperature,s=t.maxTemperature,o=s-i,l=(e.kelvin-i)/o*100;return Math.max(0,Math.min(l,100));case"hue":return n.h/=3.6;case"saturation":return n.s;case"value":default:return n.v}}function eH(t,e,n){var r=Gy(t),i=r.handleRange,s=r.handleStart,o;t.layoutDirection==="horizontal"?o=-1*n+i+s:o=e-s,o=Math.max(Math.min(o,i),0);var l=Math.round(100/i*o);switch(t.sliderType){case"kelvin":var c=t.minTemperature,f=t.maxTemperature,h=f-c;return c+h*(l/100);case"alpha":return l/100;case"hue":return l*3.6;case"red":case"blue":case"green":return l*2.55;default:return l}}function tH(t,e){var n=Gy(t),r=n.width,i=n.height,s=n.handleRange,o=n.handleStart,l=t.layoutDirection==="horizontal",c=ZG(t,e),f=l?r/2:i/2,h=o+c/100*s;return l&&(h=-1*h+s+o*2),{x:l?f:h,y:l?h:f}}function nH(t,e){var n=e.hsv,r=e.rgb;switch(t.sliderType){case"red":return[[0,"rgb("+0+","+r.g+","+r.b+")"],[100,"rgb("+255+","+r.g+","+r.b+")"]];case"green":return[[0,"rgb("+r.r+","+0+","+r.b+")"],[100,"rgb("+r.r+","+255+","+r.b+")"]];case"blue":return[[0,"rgb("+r.r+","+r.g+","+0+")"],[100,"rgb("+r.r+","+r.g+","+255+")"]];case"alpha":return[[0,"rgba("+r.r+","+r.g+","+r.b+",0)"],[100,"rgb("+r.r+","+r.g+","+r.b+")"]];case"kelvin":for(var i=[],s=t.minTemperature,o=t.maxTemperature,l=8,c=o-s,f=s,h=0;f<o;f+=c/l,h+=1){var p=oa.kelvinToRgb(f),m=p.r,y=p.g,T=p.b;i.push([100/l*h,"rgb("+m+","+y+","+T+")"])}return i;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var C=oa.hsvToHsl({h:n.h,s:0,v:n.v}),A=oa.hsvToHsl({h:n.h,s:100,v:n.v});return[[0,"hsl("+C.h+","+C.s+"%,"+C.l+"%)"],[100,"hsl("+A.h+","+A.s+"%,"+A.l+"%)"]];case"value":default:var v=oa.hsvToHsl({h:n.h,s:n.s,v:100});return[[0,"#000"],[100,"hsl("+v.h+","+v.s+"%,"+v.l+"%)"]]}}var Ox=Math.PI*2,rH=function(e,n){return(e%n+n)%n},Px=function(e,n){return Math.sqrt(e*e+n*n)};function Dx(t){return t.width/2-t.padding-t.handleRadius-t.borderWidth}function iH(t,e,n){var r=lp(t),i=r.cx,s=r.cy,o=t.width/2;return Px(i-e,s-n)<o}function lp(t){var e=t.width/2;return{width:t.width,radius:e-t.borderWidth,cx:e,cy:e}}function Lx(t,e,n){var r=t.wheelAngle,i=t.wheelDirection;return n&&i==="clockwise"?e=r+e:i==="clockwise"?e=360-r+e:n&&i==="anticlockwise"?e=r+180-e:i==="anticlockwise"&&(e=r-e),rH(e,360)}function sH(t,e){var n=e.hsv,r=lp(t),i=r.cx,s=r.cy,o=Dx(t),l=(180+Lx(t,n.h,!0))*(Ox/360),c=n.s/100*o,f=t.wheelDirection==="clockwise"?-1:1;return{x:i+c*Math.cos(l)*f,y:s+c*Math.sin(l)*f}}function KC(t,e,n){var r=lp(t),i=r.cx,s=r.cy,o=Dx(t);e=i-e,n=s-n;var l=Lx(t,Math.atan2(-n,-e)*(360/Ox)),c=Math.min(Px(e,n),o);return{h:Math.round(l),s:Math.round(100/o*c)}}function Hy(t){var e=t.width,n=t.boxHeight,r=t.padding,i=t.handleRadius;return{width:e,height:n??e,radius:r+i}}function qC(t,e,n){var r=Hy(t),i=r.width,s=r.height,o=r.radius,l=o,c=i-o*2,f=s-o*2,h=(e-l)/c*100,p=(n-l)/f*100;return{s:Math.max(0,Math.min(h,100)),v:Math.max(0,Math.min(100-p,100))}}function oH(t,e){var n=Hy(t),r=n.width,i=n.height,s=n.radius,o=e.hsv,l=s,c=r-s*2,f=i-s*2;return{x:l+o.s/100*c,y:l+(f-o.v/100*f)}}function aH(t,e){var n=e.hue;return[[[0,"#fff"],[100,"hsl("+n+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}var jm;function lH(t){jm||(jm=document.getElementsByTagName("base"));var e=window.navigator.userAgent,n=/^((?!chrome|android).)*safari/i.test(e),r=/iPhone|iPod|iPad/i.test(e),i=window.location;return(n||r)&&jm.length>0?i.protocol+"//"+i.host+i.pathname+i.search+t:t}function Fx(t,e,n,r){for(var i=0;i<r.length;i++){var s=r[i].x-e,o=r[i].y-n,l=Math.sqrt(s*s+o*o);if(l<t.handleRadius)return i}return null}function Ky(t){return{boxSizing:"border-box",border:t.borderWidth+"px solid "+t.borderColor}}function P_(t,e,n){return t+"-gradient("+e+", "+n.map(function(r){var i=r[0],s=r[1];return s+" "+i+"%"}).join(",")+")"}function Zt(t){return typeof t=="string"?t:t+"px"}var uH={width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},YC=["mousemove","touchmove","mouseup","touchend"],up=function(t){function e(n){t.call(this,n),this.uid=(Math.random()+1).toString(36).substring(5)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(r){var i=this.handleEvent.bind(this),s={onMouseDown:i,ontouchstart:i},o=r.layoutDirection==="horizontal",l=r.margin===null?r.sliderMargin:r.margin,c={overflow:"visible",display:o?"inline-block":"block"};return r.index>0&&(c[o?"marginLeft":"marginTop"]=l),je(op,null,r.children(this.uid,s,c))},e.prototype.handleEvent=function(r){var i=this,s=this.props.onInput,o=this.base.getBoundingClientRect();r.preventDefault();var l=r.touches?r.changedTouches[0]:r,c=l.clientX-o.left,f=l.clientY-o.top;switch(r.type){case"mousedown":case"touchstart":var h=s(c,f,0);h!==!1&&YC.forEach(function(p){document.addEventListener(p,i,{passive:!1})});break;case"mousemove":case"touchmove":s(c,f,1);break;case"mouseup":case"touchend":s(c,f,2),YC.forEach(function(p){document.removeEventListener(p,i,{passive:!1})});break}},e}(wa);function po(t){var e=t.r,n=t.url,r=e,i=e;return je("svg",{className:"IroHandle IroHandle--"+t.index+" "+(t.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+Zt(t.x)+", "+Zt(t.y)+")",willChange:"transform",top:Zt(-e),left:Zt(-e),width:Zt(e*2),height:Zt(e*2),position:"absolute",overflow:"visible"}},n&&je("use",Object.assign({xlinkHref:lH(n)},t.props)),!n&&je("circle",{cx:r,cy:i,r:e,fill:"none","stroke-width":2,stroke:"#000"}),!n&&je("circle",{cx:r,cy:i,r:e-2,fill:t.fill,"stroke-width":2,stroke:"#fff"}))}po.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}};function vh(t){var e=t.activeIndex,n=e!==void 0&&e<t.colors.length?t.colors[e]:t.color,r=Gy(t),i=r.width,s=r.height,o=r.radius,l=tH(t,n),c=nH(t,n);function f(h,p,m){var y=eH(t,h,p);t.parent.inputActive=!0,n[t.sliderType]=y,t.onInput(m,t.id)}return je(up,Object.assign({},t,{onInput:f}),function(h,p,m){return je("div",Object.assign({},p,{className:"IroSlider",style:Object.assign({},{position:"relative",width:Zt(i),height:Zt(s),borderRadius:Zt(o),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},m)}),je("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:Zt(o),background:P_("linear",t.layoutDirection==="horizontal"?"to top":"to right",c)},Ky(t))}),je(po,{isActive:!0,index:n.index,r:t.handleRadius,url:t.handleSvg,props:t.handleProps,x:l.x,y:l.y}))})}vh.defaultProps=Object.assign({},XG);function cH(t){var e=Hy(t),n=e.width,r=e.height,i=e.radius,s=t.colors,o=t.parent,l=t.activeIndex,c=l!==void 0&&l<t.colors.length?t.colors[l]:t.color,f=aH(t,c),h=s.map(function(m){return oH(t,m)});function p(m,y,T){if(T===0){var C=Fx(t,m,y,h);C!==null?o.setActiveColor(C):(o.inputActive=!0,c.hsv=qC(t,m,y),t.onInput(T,t.id))}else T===1&&(o.inputActive=!0,c.hsv=qC(t,m,y));t.onInput(T,t.id)}return je(up,Object.assign({},t,{onInput:p}),function(m,y,T){return je("div",Object.assign({},y,{className:"IroBox",style:Object.assign({},{width:Zt(n),height:Zt(r),position:"relative"},T)}),je("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:Zt(i)},Ky(t),{background:P_("linear","to bottom",f[1])+","+P_("linear","to right",f[0])})}),s.filter(function(C){return C!==c}).map(function(C){return je(po,{isActive:!1,index:C.index,fill:C.hslString,r:t.handleRadius,url:t.handleSvg,props:t.handleProps,x:h[C.index].x,y:h[C.index].y})}),je(po,{isActive:!0,index:c.index,fill:c.hslString,r:t.activeHandleRadius||t.handleRadius,url:t.handleSvg,props:t.handleProps,x:h[c.index].x,y:h[c.index].y}))})}var fH="conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",dH="conic-gradient(red, magenta, blue, aqua, lime, yellow, red)";function Mx(t){var e=lp(t),n=e.width,r=t.colors;t.borderWidth;var i=t.parent,s=t.color,o=s.hsv,l=r.map(function(h){return sH(t,h)}),c={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};function f(h,p,m){if(m===0){if(!iH(t,h,p))return!1;var y=Fx(t,h,p,l);y!==null?i.setActiveColor(y):(i.inputActive=!0,s.hsv=KC(t,h,p),t.onInput(m,t.id))}else m===1&&(i.inputActive=!0,s.hsv=KC(t,h,p));t.onInput(m,t.id)}return je(up,Object.assign({},t,{onInput:f}),function(h,p,m){return je("div",Object.assign({},p,{className:"IroWheel",style:Object.assign({},{width:Zt(n),height:Zt(n),position:"relative"},m)}),je("div",{className:"IroWheelHue",style:Object.assign({},c,{transform:"rotateZ("+(t.wheelAngle+90)+"deg)",background:t.wheelDirection==="clockwise"?fH:dH})}),je("div",{className:"IroWheelSaturation",style:Object.assign({},c,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),t.wheelLightness&&je("div",{className:"IroWheelLightness",style:Object.assign({},c,{background:"#000",opacity:1-o.v/100})}),je("div",{className:"IroWheelBorder",style:Object.assign({},c,Ky(t))}),r.filter(function(y){return y!==s}).map(function(y){return je(po,{isActive:!1,index:y.index,fill:y.hslString,r:t.handleRadius,url:t.handleSvg,props:t.handleProps,x:l[y.index].x,y:l[y.index].y})}),je(po,{isActive:!0,index:s.index,fill:s.hslString,r:t.activeHandleRadius||t.handleRadius,url:t.handleSvg,props:t.handleProps,x:l[s.index].x,y:l[s.index].y}))})}function hH(t){var e=function(n,r){var i,s=document.createElement("div");UG(je(t,Object.assign({},{ref:function(l){return i=l}},r)),s);function o(){var l=n instanceof Element?n:document.querySelector(n);l.appendChild(i.base),i.onMount(l)}return document.readyState!=="loading"?o():document.addEventListener("DOMContentLoaded",o),i};return e.prototype=t.prototype,Object.assign(e,t),e.__component=t,e}var Ux=function(t){function e(n){var r=this;t.call(this,n),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=n.id;var i=n.colors.length>0?n.colors:[n.color];i.forEach(function(s){return r.addColor(s)}),this.setActiveColor(0),this.state=Object.assign({},n,{color:this.color,colors:this.colors,layout:n.layout})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addColor=function(r,i){i===void 0&&(i=this.colors.length);var s=new oa(r,this.onColorChange.bind(this));this.colors.splice(i,0,s),this.colors.forEach(function(o,l){return o.index=l}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",s)},e.prototype.removeColor=function(r){var i=this.colors.splice(r,1)[0];i.unbind(),this.colors.forEach(function(s,o){return s.index=o}),this.state&&this.setState({colors:this.colors}),i.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",i)},e.prototype.setActiveColor=function(r){this.color=this.colors[r],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},e.prototype.setColors=function(r,i){var s=this;i===void 0&&(i=0),this.colors.forEach(function(o){return o.unbind()}),this.colors=[],r.forEach(function(o){return s.addColor(o)}),this.setActiveColor(i),this.emit("color:setAll",this.colors)},e.prototype.on=function(r,i){var s=this,o=this.events;(Array.isArray(r)?r:[r]).forEach(function(l){(o[l]||(o[l]=[])).push(i),s.deferredEvents[l]&&(s.deferredEvents[l].forEach(function(c){i.apply(null,c)}),s.deferredEvents[l]=[])})},e.prototype.off=function(r,i){var s=this;(Array.isArray(r)?r:[r]).forEach(function(o){var l=s.events[o];l&&l.splice(l.indexOf(i),1)})},e.prototype.emit=function(r){for(var i=this,s=[],o=arguments.length-1;o-- >0;)s[o]=arguments[o+1];var l=this.activeEvents,c=l.hasOwnProperty(r)?l[r]:!1;if(!c){l[r]=!0;var f=this.events[r]||[];f.forEach(function(h){return h.apply(i,s)}),l[r]=!1}},e.prototype.deferredEmit=function(r){for(var i,s=[],o=arguments.length-1;o-- >0;)s[o]=arguments[o+1];var l=this.deferredEvents;(i=this).emit.apply(i,[r].concat(s)),(l[r]||(l[r]=[])).push(s)},e.prototype.setOptions=function(r){this.setState(r)},e.prototype.resize=function(r){this.setOptions({width:r})},e.prototype.reset=function(){this.colors.forEach(function(r){return r.reset()}),this.setState({colors:this.colors})},e.prototype.onMount=function(r){this.el=r,this.deferredEmit("mount",this)},e.prototype.onColorChange=function(r,i){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",r,i)),this.emit("color:change",r,i)},e.prototype.emitInputEvent=function(r,i){r===0?this.emit("input:start",this.color,i):r===1?this.emit("input:move",this.color,i):r===2&&this.emit("input:end",this.color,i)},e.prototype.render=function(r,i){var s=this,o=i.layout;if(!Array.isArray(o)){switch(o){default:o=[{component:Mx},{component:vh}]}i.transparency&&o.push({component:vh,options:{sliderType:"alpha"}})}return je("div",{class:"IroColorPicker",id:i.id,style:{display:i.display}},o.map(function(l,c){var f=l.component,h=l.options;return je(f,Object.assign({},i,h,{ref:void 0,onInput:s.emitInputEvent.bind(s),parent:s,index:c}))}))},e}(wa);Ux.defaultProps=Object.assign({},uH,{colors:[],display:"block",id:null,layout:"default",margin:null});var pH=hH(Ux),D_;(function(t){t.version="5.5.2",t.Color=oa,t.ColorPicker=pH,function(e){e.h=je,e.ComponentBase=up,e.Handle=po,e.Slider=vh,e.Wheel=Mx,e.Box=cH}(t.ui||(t.ui={}))})(D_||(D_={}));var aa=D_;function gH({type:t,onChange:e,color:n}){const r=_e.useRef(null);return k.useEffect(()=>{let i;if(t==="kelvin"&&new aa.ColorPicker(r.current,{borderWidth:2,width:260,layout:[{component:aa.ui.Slider,options:{borderColor:"black",sliderType:"kelvin",sliderShape:"circle",layoutDirection:"horizontal"}}]}),t==="wheel"){let s=new aa.ColorPicker(r.current,{borderWidth:2,width:260,layout:[{component:aa.ui.Wheel,options:{borderColor:"transparent"}}]});s.on("color:change",o=>{e&&e(o.hexString)}),i=Ua.on("color",o=>{s.setColors([o])})}return()=>{r.current&&(r.current.innerHTML="",i&&i())}},[]),k.useEffect(()=>{(n==="#ffffff"||cV(n)!=="#ffffff")&&Ua.emit("color",n)},[n]),D.jsx("div",{className:"flex justify-center",ref:r})}function mH({type:t,onChange:e,color:n}){const r=_e.useRef(null);return k.useEffect(()=>{let i;if(t==="kelvin"){let s=new aa.ColorPicker(r.current,{borderWidth:2,layout:[{component:aa.ui.Slider,options:{borderColor:"black",sliderType:"kelvin",sliderShape:"circle",layoutDirection:"horizontal"}}]});s.on("color:change",o=>{const l=Nu(o.kelvin||0,2200,11e3,-100,100);console.log("cct value",o.kelvin,l),e&&e(l)}),i=Ua.on("cct",o=>{const l=Nu(o||0,-100,100,2200,11e3);s.color.kelvin=l})}return()=>{r.current&&(r.current.innerHTML="",i&&i())}},[]),k.useEffect(()=>{Ua.emit("cct",n)},[n]),D.jsx("div",{className:"flex justify-center",ref:r})}function Me(){return Me=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Me.apply(this,arguments)}function vH(t,[e,n]){return Math.min(n,Math.max(e,t))}function kn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}function _H(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function $x(...t){return e=>t.forEach(n=>_H(n,e))}function _i(...t){return k.useCallback($x(...t),t)}function cp(t,e=[]){let n=[];function r(s,o){const l=k.createContext(o),c=n.length;n=[...n,o];function f(p){const{scope:m,children:y,...T}=p,C=m?.[t][c]||l,A=k.useMemo(()=>T,Object.values(T));return k.createElement(C.Provider,{value:A},y)}function h(p,m){const y=m?.[t][c]||l,T=k.useContext(y);if(T)return T;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${s}\``)}return f.displayName=s+"Provider",[f,h]}const i=()=>{const s=n.map(o=>k.createContext(o));return function(l){const c=l?.[t]||s;return k.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,yH(i,...e)]}function yH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((l,{useScope:c,scopeName:f})=>{const p=c(s)[`__scope${f}`];return{...l,...p}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function qy(t){const e=k.useRef(t);return k.useEffect(()=>{e.current=t}),k.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function yc({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=wH({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,l=qy(n),c=k.useCallback(f=>{if(s){const p=typeof f=="function"?f(t):f;p!==t&&l(p)}else i(f)},[s,t,i,l]);return[o,c]}function wH({defaultProp:t,onChange:e}){const n=k.useState(t),[r]=n,i=k.useRef(r),s=qy(e);return k.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const EH=k.createContext(void 0);function Yy(t){const e=k.useContext(EH);return t||e||"ltr"}function SH(t){const e=k.useRef({value:t,previous:t});return k.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const Bx=Boolean(globalThis?.document)?k.useLayoutEffect:()=>{};function bH(t){const[e,n]=k.useState(void 0);return Bx(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,l;if("borderBoxSize"in s){const c=s.borderBoxSize,f=Array.isArray(c)?c[0]:c;o=f.inlineSize,l=f.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const _h=k.forwardRef((t,e)=>{const{children:n,...r}=t,i=k.Children.toArray(n),s=i.find(IH);if(s){const o=s.props.children,l=i.map(c=>c===s?k.Children.count(o)>1?k.Children.only(null):k.isValidElement(o)?o.props.children:null:c);return k.createElement(L_,Me({},r,{ref:e}),k.isValidElement(o)?k.cloneElement(o,void 0,l):null)}return k.createElement(L_,Me({},r,{ref:e}),n)});_h.displayName="Slot";const L_=k.forwardRef((t,e)=>{const{children:n,...r}=t;return k.isValidElement(n)?k.cloneElement(n,{...TH(r,n.props),ref:$x(e,n.ref)}):k.Children.count(n)>1?k.Children.only(null):null});L_.displayName="SlotClone";const CH=({children:t})=>k.createElement(k.Fragment,null,t);function IH(t){return k.isValidElement(t)&&t.type===CH}function TH(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...l)=>{s(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}const AH=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"],yi=AH.reduce((t,e)=>{const n=k.forwardRef((r,i)=>{const{asChild:s,...o}=r,l=s?_h:e;return k.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),k.createElement(l,Me({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function jx(t){const e=t+"CollectionProvider",[n,r]=cp(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:T,children:C}=y,A=_e.useRef(null),v=_e.useRef(new Map).current;return _e.createElement(i,{scope:T,itemMap:v,collectionRef:A},C)},l=t+"CollectionSlot",c=_e.forwardRef((y,T)=>{const{scope:C,children:A}=y,v=s(l,C),E=_i(T,v.collectionRef);return _e.createElement(_h,{ref:E},A)}),f=t+"CollectionItemSlot",h="data-radix-collection-item",p=_e.forwardRef((y,T)=>{const{scope:C,children:A,...v}=y,E=_e.useRef(null),I=_i(T,E),x=s(f,C);return _e.useEffect(()=>(x.itemMap.set(E,{ref:E,...v}),()=>void x.itemMap.delete(E))),_e.createElement(_h,{[h]:"",ref:I},A)});function m(y){const T=s(t+"CollectionConsumer",y);return _e.useCallback(()=>{const A=T.collectionRef.current;if(!A)return[];const v=Array.from(A.querySelectorAll(`[${h}]`));return Array.from(T.itemMap.values()).sort((x,M)=>v.indexOf(x.ref.current)-v.indexOf(M.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},m,r]}const Wx=["PageUp","PageDown"],zx=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Vx={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},wc="Slider",[F_,RH,kH]=jx(wc),[Gx,BK]=cp(wc,[kH]),[xH,fp]=Gx(wc),NH=k.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:f=[r],value:h,onValueChange:p=()=>{},onValueCommit:m=()=>{},inverted:y=!1,...T}=t,[C,A]=k.useState(null),v=_i(e,we=>A(we)),E=k.useRef(new Set),I=k.useRef(0),x=o==="horizontal",M=C?Boolean(C.closest("form")):!0,W=x?OH:PH,[B=[],Q]=yc({prop:h,defaultProp:f,onChange:we=>{var Ce;(Ce=[...E.current][I.current])===null||Ce===void 0||Ce.focus(),p(we)}}),q=k.useRef(B);function H(we){const Ce=WH(B,we);ot(we,Ce)}function pe(we){ot(we,I.current)}function Ue(){const we=q.current[I.current];B[I.current]!==we&&m(B)}function ot(we,Ce,{commit:xt}={commit:!1}){const Je=HH(s),Y=KH(Math.round((we-r)/s)*s+r,Je),ee=vH(Y,[r,i]);Q((re=[])=>{const se=BH(re,ee,Ce);if(GH(se,c*s)){I.current=se.indexOf(ee);const De=String(se)!==String(re);return De&&xt&&m(se),De?se:re}else return re})}return k.createElement(xH,{scope:t.__scopeSlider,disabled:l,min:r,max:i,valueIndexToChangeRef:I,thumbs:E.current,values:B,orientation:o},k.createElement(F_.Provider,{scope:t.__scopeSlider},k.createElement(F_.Slot,{scope:t.__scopeSlider},k.createElement(W,Me({"aria-disabled":l,"data-disabled":l?"":void 0},T,{ref:v,onPointerDown:kn(T.onPointerDown,()=>{l||(q.current=B)}),min:r,max:i,inverted:y,onSlideStart:l?void 0:H,onSlideMove:l?void 0:pe,onSlideEnd:l?void 0:Ue,onHomeKeyDown:()=>!l&&ot(r,0,{commit:!0}),onEndKeyDown:()=>!l&&ot(i,B.length-1,{commit:!0}),onStepKeyDown:({event:we,direction:Ce})=>{if(!l){const Y=Wx.includes(we.key)||we.shiftKey&&zx.includes(we.key)?10:1,ee=I.current,re=B[ee],se=s*Y*Ce;ot(re+se,ee,{commit:!0})}}})))),M&&B.map((we,Ce)=>k.createElement($H,{key:Ce,name:n?n+(B.length>1?"[]":""):void 0,value:we})))}),[Hx,Kx]=Gx(wc,{startEdge:"left",endEdge:"right",size:"width",direction:1}),OH=k.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:f,...h}=t,[p,m]=k.useState(null),y=_i(e,I=>m(I)),T=k.useRef(),C=Yy(i),A=C==="ltr",v=A&&!s||!A&&s;function E(I){const x=T.current||p.getBoundingClientRect(),M=[0,x.width],B=Qy(M,v?[n,r]:[r,n]);return T.current=x,B(I-x.left)}return k.createElement(Hx,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width"},k.createElement(qx,Me({dir:C,"data-orientation":"horizontal"},h,{ref:y,style:{...h.style,["--radix-slider-thumb-transform"]:"translateX(-50%)"},onSlideStart:I=>{const x=E(I.clientX);o?.(x)},onSlideMove:I=>{const x=E(I.clientX);l?.(x)},onSlideEnd:()=>{T.current=void 0,c?.()},onStepKeyDown:I=>{const M=Vx[v?"from-left":"from-right"].includes(I.key);f?.({event:I,direction:M?-1:1})}})))}),PH=k.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...f}=t,h=k.useRef(null),p=_i(e,h),m=k.useRef(),y=!i;function T(C){const A=m.current||h.current.getBoundingClientRect(),v=[0,A.height],I=Qy(v,y?[r,n]:[n,r]);return m.current=A,I(C-A.top)}return k.createElement(Hx,{scope:t.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1},k.createElement(qx,Me({"data-orientation":"vertical"},f,{ref:p,style:{...f.style,["--radix-slider-thumb-transform"]:"translateY(50%)"},onSlideStart:C=>{const A=T(C.clientY);s?.(A)},onSlideMove:C=>{const A=T(C.clientY);o?.(A)},onSlideEnd:()=>{m.current=void 0,l?.()},onStepKeyDown:C=>{const v=Vx[y?"from-bottom":"from-top"].includes(C.key);c?.({event:C,direction:v?-1:1})}})))}),qx=k.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...f}=t,h=fp(wc,n);return k.createElement(yi.span,Me({},f,{ref:e,onKeyDown:kn(t.onKeyDown,p=>{p.key==="Home"?(o(p),p.preventDefault()):p.key==="End"?(l(p),p.preventDefault()):Wx.concat(zx).includes(p.key)&&(c(p),p.preventDefault())}),onPointerDown:kn(t.onPointerDown,p=>{const m=p.target;m.setPointerCapture(p.pointerId),p.preventDefault(),h.thumbs.has(m)?m.focus():r(p)}),onPointerMove:kn(t.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&i(p)}),onPointerUp:kn(t.onPointerUp,p=>{const m=p.target;m.hasPointerCapture(p.pointerId)&&(m.releasePointerCapture(p.pointerId),s(p))})}))}),DH="SliderTrack",LH=k.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=fp(DH,n);return k.createElement(yi.span,Me({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},r,{ref:e}))}),QC="SliderRange",FH=k.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=fp(QC,n),s=Kx(QC,n),o=k.useRef(null),l=_i(e,o),c=i.values.length,f=i.values.map(m=>Yx(m,i.min,i.max)),h=c>1?Math.min(...f):0,p=100-Math.max(...f);return k.createElement(yi.span,Me({"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0},r,{ref:l,style:{...t.style,[s.startEdge]:h+"%",[s.endEdge]:p+"%"}}))}),JC="SliderThumb",MH=k.forwardRef((t,e)=>{const n=RH(t.__scopeSlider),[r,i]=k.useState(null),s=_i(e,l=>i(l)),o=k.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return k.createElement(UH,Me({},t,{ref:s,index:o}))}),UH=k.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,...i}=t,s=fp(JC,n),o=Kx(JC,n),[l,c]=k.useState(null),f=_i(e,A=>c(A)),h=bH(l),p=s.values[r],m=p===void 0?0:Yx(p,s.min,s.max),y=jH(r,s.values.length),T=h?.[o.size],C=T?zH(T,m,o.direction):0;return k.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),k.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${m}% + ${C}px)`}},k.createElement(F_.ItemSlot,{scope:t.__scopeSlider},k.createElement(yi.span,Me({role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":s.min,"aria-valuenow":p,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},i,{ref:f,style:p===void 0?{display:"none"}:t.style,onFocus:kn(t.onFocus,()=>{s.valueIndexToChangeRef.current=r})}))))}),$H=t=>{const{value:e,...n}=t,r=k.useRef(null),i=SH(e);return k.useEffect(()=>{const s=r.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==e&&c){const f=new Event("input",{bubbles:!0});c.call(s,e),s.dispatchEvent(f)}},[i,e]),k.createElement("input",Me({style:{display:"none"}},n,{ref:r,defaultValue:e}))};function BH(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function Yx(t,e,n){return 100/(n-e)*(t-e)}function jH(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function WH(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function zH(t,e,n){const r=t/2,s=Qy([0,50],[0,r]);return(r-s(e)*n)*n}function VH(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function GH(t,e){if(e>0){const n=VH(t);return Math.min(...n)>=e}return!0}function Qy(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function HH(t){return(String(t).split(".")[1]||"").length}function KH(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const qH=NH,YH=LH,QH=FH,JH=MH;function XH({children:t,...e}){return D.jsx(qH,{...e,className:ho("relative flex touch-none select-none items-center overflow-hidden rounded-full",e.className),children:t})}function ZH({children:t,...e}){return D.jsx(YH,{className:"relative h-6 grow cursor-pointer rounded-full bg-white-12",...e,children:t})}function eK({children:t,...e}){return D.jsx(QH,{className:"absolute h-full bg-white-100",...e,children:t})}function tK({children:t,...e}){return D.jsx(JH,{className:"cursor-pointer transition focus:outline-none",...e,children:D.jsx("div",{className:"mr-4 block h-4 w-1 rounded-full bg-black opacity-30",children:t})})}function nK(t){return D.jsx("form",{children:D.jsxs(XH,{...t,children:[D.jsx(ZH,{children:D.jsx(eK,{})}),D.jsx(tK,{})]})})}function Ju({label:t,labelText:e,deviceId:n,startIcon:r,hideLabel:i=!1,isGreyedOut:s=!1,setIsGreyedOut:o,onChange:l,min:c}){const{value:f,emitEvent:h,meta:p}=vi(t,n);return D.jsx(D.Fragment,{children:D.jsx(Qx,{min:c,label:t,labelText:e,deviceId:n,startIcon:r,hideLabel:i,isGreyedOut:s,setIsGreyedOut:o,value:f,onChange:(m,y)=>{h(m,y),l&&l(m,y)}})})}function Qx({label:t,labelText:e,startIcon:n,hideLabel:r=!1,isGreyedOut:i=!1,setIsGreyedOut:s,min:o,value:l,onChange:c}){const[f,h]=k.useState(!(l&&l>10));return D.jsxs(D.Fragment,{children:[!r&&D.jsx("label",{className:"text-xs uppercase text-white-48",children:e||t}),D.jsxs("div",{className:ho("relative flex items-center",!r&&"mt-2"),children:[D.jsx("div",{className:"pointer-events-none absolute left-2 z-20 w-4 select-none",children:_e.cloneElement(n,{style:{color:f?"#ffffff":"#262A2A"}})}),D.jsx("div",{className:"grow",children:D.jsx(nK,{value:[l||0],className:i?"opacity-50":"",min:o||0,max:100,step:1,onValueChange:p=>{const m=p[0];c(m,{}),m<10&&!f&&h(!0),m>10&&f&&h(!1),i&&s&&s(!1)},"aria-label":t})})]})]})}const rK=cd["useId".toString()]||(()=>{});let iK=0;function sK(t){const[e,n]=k.useState(rK());return Bx(()=>{t||n(r=>r??String(iK++))},[t]),t||(e?`radix-${e}`:"")}const Wm="rovingFocusGroup.onEntryFocus",oK={bubbles:!1,cancelable:!0},Jy="RovingFocusGroup",[M_,Jx,aK]=jx(Jy),[lK,Xx]=cp(Jy,[aK]),[uK,cK]=lK(Jy),fK=k.forwardRef((t,e)=>k.createElement(M_.Provider,{scope:t.__scopeRovingFocusGroup},k.createElement(M_.Slot,{scope:t.__scopeRovingFocusGroup},k.createElement(dK,Me({},t,{ref:e}))))),dK=k.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:f,...h}=t,p=k.useRef(null),m=_i(e,p),y=Yy(s),[T=null,C]=yc({prop:o,defaultProp:l,onChange:c}),[A,v]=k.useState(!1),E=qy(f),I=Jx(n),x=k.useRef(!1),[M,W]=k.useState(0);return k.useEffect(()=>{const B=p.current;if(B)return B.addEventListener(Wm,E),()=>B.removeEventListener(Wm,E)},[E]),k.createElement(uK,{scope:n,orientation:r,dir:y,loop:i,currentTabStopId:T,onItemFocus:k.useCallback(B=>C(B),[C]),onItemShiftTab:k.useCallback(()=>v(!0),[]),onFocusableItemAdd:k.useCallback(()=>W(B=>B+1),[]),onFocusableItemRemove:k.useCallback(()=>W(B=>B-1),[])},k.createElement(yi.div,Me({tabIndex:A||M===0?-1:0,"data-orientation":r},h,{ref:m,style:{outline:"none",...t.style},onMouseDown:kn(t.onMouseDown,()=>{x.current=!0}),onFocus:kn(t.onFocus,B=>{const Q=!x.current;if(B.target===B.currentTarget&&Q&&!A){const q=new CustomEvent(Wm,oK);if(B.currentTarget.dispatchEvent(q),!q.defaultPrevented){const H=I().filter(Ce=>Ce.focusable),pe=H.find(Ce=>Ce.active),Ue=H.find(Ce=>Ce.id===T),we=[pe,Ue,...H].filter(Boolean).map(Ce=>Ce.ref.current);Zx(we)}}x.current=!1}),onBlur:kn(t.onBlur,()=>v(!1))})))}),hK="RovingFocusGroupItem",pK=k.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,l=sK(),c=s||l,f=cK(hK,n),h=f.currentTabStopId===c,p=Jx(n),{onFocusableItemAdd:m,onFocusableItemRemove:y}=f;return k.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),k.createElement(M_.ItemSlot,{scope:n,id:c,focusable:r,active:i},k.createElement(yi.span,Me({tabIndex:h?0:-1,"data-orientation":f.orientation},o,{ref:e,onMouseDown:kn(t.onMouseDown,T=>{r?f.onItemFocus(c):T.preventDefault()}),onFocus:kn(t.onFocus,()=>f.onItemFocus(c)),onKeyDown:kn(t.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey){f.onItemShiftTab();return}if(T.target!==T.currentTarget)return;const C=vK(T,f.orientation,f.dir);if(C!==void 0){T.preventDefault();let v=p().filter(E=>E.focusable).map(E=>E.ref.current);if(C==="last")v.reverse();else if(C==="prev"||C==="next"){C==="prev"&&v.reverse();const E=v.indexOf(T.currentTarget);v=f.loop?_K(v,E+1):v.slice(E+1)}setTimeout(()=>Zx(v))}})})))}),gK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function mK(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function vK(t,e,n){const r=mK(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return gK[r]}function Zx(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function _K(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const yK=fK,wK=pK,EK=k.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:i,...s}=t,[o=!1,l]=yc({prop:n,onChange:i,defaultProp:r});return k.createElement(yi.button,Me({type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":t.disabled?"":void 0},s,{ref:e,onClick:kn(t.onClick,()=>{t.disabled||l(!o)})}))}),dp="ToggleGroup",[eN,jK]=cp(dp,[Xx]),tN=Xx(),SK=_e.forwardRef((t,e)=>{const{type:n,...r}=t;if(n==="single"){const i=r;return _e.createElement(bK,Me({},i,{ref:e}))}if(n==="multiple"){const i=r;return _e.createElement(CK,Me({},i,{ref:e}))}throw new Error(`Missing prop \`type\` expected on \`${dp}\``)}),[nN,rN]=eN(dp),bK=_e.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o,l]=yc({prop:n,defaultProp:r,onChange:i});return _e.createElement(nN,{scope:t.__scopeToggleGroup,type:"single",value:o?[o]:[],onItemActivate:l,onItemDeactivate:_e.useCallback(()=>l(""),[l])},_e.createElement(iN,Me({},s,{ref:e})))}),CK=_e.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o=[],l]=yc({prop:n,defaultProp:r,onChange:i}),c=_e.useCallback(h=>l((p=[])=>[...p,h]),[l]),f=_e.useCallback(h=>l((p=[])=>p.filter(m=>m!==h)),[l]);return _e.createElement(nN,{scope:t.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:c,onItemDeactivate:f},_e.createElement(iN,Me({},s,{ref:e})))}),[IK,TK]=eN(dp),iN=_e.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:i=!0,orientation:s,dir:o,loop:l=!0,...c}=t,f=tN(n),h=Yy(o),p={role:"group",dir:h,...c};return _e.createElement(IK,{scope:n,rovingFocus:i,disabled:r},i?_e.createElement(yK,Me({asChild:!0},f,{orientation:s,dir:h,loop:l}),_e.createElement(yi.div,Me({},p,{ref:e}))):_e.createElement(yi.div,Me({},p,{ref:e})))}),U_="ToggleGroupItem",AK=_e.forwardRef((t,e)=>{const n=rN(U_,t.__scopeToggleGroup),r=TK(U_,t.__scopeToggleGroup),i=tN(t.__scopeToggleGroup),s=n.value.includes(t.value),o=r.disabled||t.disabled,l={...t,pressed:s,disabled:o},c=_e.useRef(null);return r.rovingFocus?_e.createElement(wK,Me({asChild:!0},i,{focusable:!o,active:s,ref:c}),_e.createElement(XC,Me({},l,{ref:e}))):_e.createElement(XC,Me({},l,{ref:e}))}),XC=_e.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:r,...i}=t,s=rN(U_,n),o={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},l=s.type==="single"?o:void 0;return _e.createElement(EK,Me({},l,i,{ref:e,onPressedChange:c=>{c?s.onItemActivate(r):s.onItemDeactivate(r)}}))}),RK=SK,ZC=AK,kK=({onChange:t,value:e})=>D.jsxs(RK,{className:"flex h-10 rounded-full bg-white-12 p-1",type:"single",defaultValue:"center",value:e,onValueChange:n=>t(n),children:[D.jsx(ZC,{className:"flex w-full items-center justify-center rounded-full p-1.5 text-white-100 transition onState:bg-white-100 onState:text-[#262A2A]",value:"backward","aria-label":"Left aligned",children:D.jsx(XV,{className:"w-4"})}),D.jsx(ZC,{className:"flex w-full items-center justify-center rounded-full p-1.5 text-white-100 transition onState:bg-white-100 onState:text-[#262A2A]",value:"forward",children:D.jsx(ZV,{className:"w-4"})})]});let yh=[{id:"NARA",type:"custom",event:"e_nra",desc:"NARA",background:'url("efekty/Animace_Spectoda.png")',tags:["Animace"],editable:!1},{id:"Ufo",type:"custom",event:"e_ufo",desc:"UFO",background:'url("efekty/Animace_UFO.png")',tags:["Animace"],editable:!1},{id:"BloodGivers",type:"custom",event:"e_bld",desc:"Darcům krve",background:'url("efekty/Animace_Krev.png")',tags:["Animace"],editable:!1},{id:"HockeyCzech",type:"custom",event:"e_cze",desc:"Češi do toho!",background:'url("efekty/Animace_CZE.png")',start:"rgb(0, 0, 255)",tags:["Animace"],editable:!1},{id:"Fire",type:"custom",event:"e_fir",desc:"Oheň",background:'url("efekty/Animace_Ohen.png")',meta:{colors:["#FFAA00","#FF0000"]},tags:["Animace"],editable:!0},{id:"FirstMay",type:"custom",event:"e_may",desc:"1. Máj",background:'url("efekty/Animace_Maj.png")',tags:["Animace"],editable:!1,textcolor:"black"},{textcolor:"white",id:"PeaceUkraine",type:"custom",event:"e_ukr",desc:"💙💛",background:'url("efekty/Animace_Ukrajina.png")',tags:["Animace"],editable:!1},{id:"SouthCzechMeadow",type:"custom",event:"e_jhl",desc:"Jihočeská louka",background:'url("efekty/Animace_Louka.png")',editable:!1},{textcolor:"white",id:"Rainy",type:"custom",event:"e_rny",desc:"Dešťové období",background:'url("efekty/Animace_Dest.png")',tags:["Animace"],meta:{colors:["#007FFF","#0000FF","#002FFF"]},editable:!0},{textcolor:"white",id:"DenNoc",type:"custom",event:"e_day",desc:"Den a noc",background:'url("efekty/Animace_Den a Noc.png")',tags:["Animace"],editable:!1},{id:"SpringFlowers",type:"custom",event:"e_mdz",desc:"Luční kvítí",background:'url("efekty/Animace_Kvítí.png")',editable:!1},{textcolor:"white",id:"SvatekLampionu",type:"custom",event:"e_svl",desc:"Svátek lampiónů",background:'url("efekty/Animace_Lampiony.png")',tags:["Animace"],editable:!1},{id:"ResovskeVodopady",type:"custom",event:"e_res",desc:"Rešovské vodopády",background:'url("efekty/Animace_Vodopady.png")',tags:["Animace"],editable:!1,textcolor:"black"},{textcolor:"white",id:"BoubPrales",type:"custom",event:"e_bou",desc:"Boubínský prales",background:'url("efekty/Animace_Prales.png")',tags:["Animace"],editable:!1},{textcolor:"white",id:"Krokonose",type:"custom",event:"e_krk",desc:"Krkonoše",background:'url("efekty/Animace_Krkonose.png")',tags:["Animace"],editable:!1},{id:"ZapadSlunce",type:"custom",event:"e_zap",desc:"Západ slunce",background:'url("efekty/Animace_Zapad Slunce.png")',tags:["Animace"],editable:!1,textcolor:"black"},{id:"LavaLamp",type:"custom",event:"e_lav",desc:"Lávová Lampa",background:'url("efekty/Animace_Lava.png")',tags:["Animace"],meta:{colors:["#ff0000","#ff7f00"]},editable:!0,textcolor:"black"},{textcolor:"white",id:"NightSky",type:"custom",event:"e_sky",desc:"Noční Obloha",background:'url("efekty/Animace_Nocni Obloha.png")',tags:["Animace"],meta:{colors:["#000000"]},editable:!1},{id:"Rainbow",type:"custom",event:"e_rai",desc:"Duhová animace",background:'url("efekty/Animace_Duha.png")',tags:["Animace"],editable:!1,textcolor:"black"},{id:"Sky",type:"gradient",start:"#0000ff",end:"#00ffff",desc:"Modrá obloha",background:'url("efekty/Animace_Modra obloha.png")',editable:!1},{id:"Pinky",type:"gradient",start:"#ff00ff",end:"#ff0099",desc:"Růžový panter",background:'url("efekty/Animace_Ruzovy Panter.png")',editable:!1},{textcolor:"white",id:"Police",type:"gradient",start:"#ff0000",end:"#0000ff",desc:"Policejní maják",background:'url("efekty/Animace_Policejní maják.png")',tags:["Animace"],editable:!1}];yh=yh.map(t=>(t.start&&t.end&&(t.colors=[t.start,t.end]),t.expandable=!1,t));function sN({color:t}){return D.jsx("div",{className:"pointer-events-none absolute inset-0 h-screen w-screen select-none  overflow-hidden",children:D.jsx("div",{className:"absolute top-1/2 left-1/2 -z-10 -translate-y-1/2 -translate-x-1/2",children:D.jsxs("svg",{width:"1126",height:"1635",viewBox:"0 0 1126 1635",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[D.jsx("g",{opacity:"0.32",filter:"url(#filter0_f_320_5374)",children:D.jsx("ellipse",{cx:"562.842",cy:"817.122",rx:"222.142",ry:"518.195",transform:"rotate(-14.3755 562.842 817.122)",fill:t})}),D.jsx("defs",{children:D.jsxs("filter",{id:"filter0_f_320_5374",x:"0.0898438",y:"0.0881348",width:"1125.5",height:"1634.07",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[D.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),D.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),D.jsx("feGaussianBlur",{stdDeviation:"156",result:"effect1_foregroundBlur_320_5374"})]})})]})})})}const oN=t=>{const n=(t||100)/100;return Math.round(n*255).toString(16).padStart(2,"0")};function xK(){const{device_id:t}={device_id:255},e={id:255,name:"PWS",controllers:[],controlMethods:["rgb"]};if(!e)return D.jsx("p",{children:"No device found..."});const{name:n}=e,{controlMethods:r}=e;return D.jsxs("div",{className:" xl:fixed xl:top-1/2 xl:left-1/2 xl:max-h-[1100px] xl:w-full xl:max-w-md xl:-translate-x-1/2 xl:-translate-y-1/2 xl:overflow-hidden xl:rounded xl:border xl:border-white-12",children:[D.jsx(LK,{device:e,name:n,device_id:t}),D.jsxs("div",{className:"m-auto max-w-[393px] p-6",children:[r.includes("all")&&D.jsx(eI,{device_id:t}),r.includes("dimmable")&&D.jsx(eI,{device_id:t}),r.includes("cct")&&D.jsx(NK,{device_id:t}),r.includes("rgb")&&D.jsx(OK,{device_id:t})]}),r.includes("rgb")&&D.jsx(uG,{})]})}function eI({device_id:t}){return vi("toggl",t),D.jsxs(D.Fragment,{children:[D.jsx(Ju,{label:"top",labelText:"Top",min:3,startIcon:D.jsx(Qu,{className:"w-4"}),deviceId:Number(t)}),D.jsx("br",{}),D.jsx(Ju,{label:"bot",labelText:"Bottom",min:3,startIcon:D.jsx(Qu,{className:"w-4"}),deviceId:Number(t)}),D.jsx("br",{})]})}function NK({device_id:t}){vi("toggl",t);const{emitEvent:e,value:n}=vi("cct",Number(t));return D.jsxs(D.Fragment,{children:[D.jsx(mH,{color:n,onChange:e,type:"kelvin"}),D.jsx(Ju,{label:"brigh",min:3,labelText:"Brightness",startIcon:D.jsx(Qu,{className:"w-4"}),deviceId:Number(t)})]})}function OK({device_id:t}){const{pathname:e}=za(),r=e==="/animations";vi("toggl",t);const{emitEvent:i,value:s}=fV("color",Number(t)),{value:o}=vi("brigh",Number(t)),[l,c]=k.useState(s),f=(h,p)=>{const m=oN(p||100),y=h+m;c(y)};return k.useEffect(()=>{f(s,o)},[o,s]),r?D.jsx(PK,{device_id:t}):D.jsxs(D.Fragment,{children:[D.jsx(gH,{color:s,type:"wheel",onChange:i}),D.jsxs("div",{className:"mt-2",children:[D.jsx("label",{className:"text-xs uppercase text-white-48",children:"Hex code"}),D.jsx("input",{type:"text",className:"mt-2 w-full rounded-full bg-white-12 p-2 px-4 text-center text-sm uppercase text-white-60 focus:bg-white-24 focus:outline-none",value:s,onChange:h=>{i(h.target.value)}})]}),D.jsx("div",{className:"my-5",children:D.jsx(Ju,{label:"brigh",labelText:"Brightness",min:3,startIcon:D.jsx(Qu,{}),deviceId:Number(t)})}),D.jsxs("div",{children:[D.jsx("label",{className:"text-xs uppercase text-white-48",children:"Presets"}),D.jsxs("div",{className:"mt-2 grid grid-cols-6 gap-3",children:[D.jsx("div",{className:"h-8 cursor-pointer rounded bg-[red] transition active:opacity-60",onClick:()=>i("#ff0000")}),D.jsx("div",{className:"h-8 cursor-pointer rounded bg-[green] transition active:opacity-60",onClick:()=>i("#00ff00")}),D.jsx("div",{className:"h-8 cursor-pointer rounded bg-[#3161ff] transition active:opacity-60",onClick:()=>i("#0000ff")}),D.jsx("div",{className:"h-8 cursor-pointer rounded bg-[#de3cff] transition active:opacity-60",onClick:()=>i("#de3cff")}),D.jsx("div",{className:"h-8 cursor-pointer rounded bg-[yellow] transition active:opacity-60",onClick:()=>i("#ffff00")}),D.jsx("div",{className:"h-8 cursor-pointer rounded bg-[orange] transition active:opacity-60",onClick:()=>i("#ffa500")})]})]}),D.jsx(sN,{color:l})]})}function PK({device_id:t}){const{value:e}=vi("brigh",Number(t)),[n,r]=k.useState(0),i="#e98e34",[s,o]=k.useState(i);function l(h){return h.match(/\burl\("([^"]+)"\)/)[1]}async function c(h){const p=new NG,y=h.background.split('"')[1];try{const C=`${(await p.getColorAsync(y)).hex}${oN(e)}`;o(C)}catch(T){console.log("Error getting color",T)}}k.useEffect(()=>{c(yh[n])},[e]);function f(h,p){h.type==="custom"?ql({label:h.event,value:100,device_id:255,type:"percentage"}):h.type==="gradient"&&(ql({label:"e_gr2",value:100,device_id:255,type:"percentage"}),ql({label:"grad1",value:h.start,device_id:255,type:"color"}),ql({label:"grad2",value:h.end,device_id:255,type:"color"})),c(h),r(p)}return D.jsxs(D.Fragment,{children:[D.jsx("label",{className:"text-xs uppercase text-white-48",children:"Animations"}),D.jsx("div",{className:"mt-2 w-[calc(100%+25px)] overflow-hidden overflow-x-scroll",children:D.jsx("div",{className:"grid h-[200px] w-[1650px] grid-cols-11 gap-2 pb-2",children:yh.map((h,p)=>D.jsxs("div",{onClick:()=>f(h,p),className:ho("relative flex h-[90px] cursor-pointer overflow-hidden  rounded-xl transition hover:opacity-100",p===n?"opacity-100":"opacity-60"),children:[D.jsx("div",{className:"z-50 self-end p-2 text-sm font-semibold",children:h.desc}),D.jsx("div",{className:ho("absolute inset-0 z-20 scale-125 rounded-xl border-[3px] border-white-100 bg-gradient-to-b from-[rgba(0,0,0,0)] to-[rgba(0,0,0,0.4)] transition ",p===n&&"scale-100")}),D.jsx("img",{src:l(h.background),alt:"",className:"absolute inset-0 z-10 h-full object-cover "})]},p))})}),D.jsx("div",{className:"mt-10",children:D.jsx(Ju,{label:"brigh",labelText:"Brightness",min:3,startIcon:D.jsx(Qu,{className:"w-4"}),deviceId:Number(t)})}),D.jsx(DK,{device_id:t}),D.jsx(sN,{color:s})]})}function DK({device_id:t}){const{value:e,emitEvent:n,meta:r}=vi("speed",t),[i,s]=k.useState(e),[o,l]=k.useState("forward"),[c,f]=k.useState(!1);return k.useEffect(()=>{n(c?o==="forward"?i:-i:0)},[i,c,o]),k.useEffect(()=>{e&&(l(e>0?"forward":"backward"),s(Math.abs(e)),f(e!==0))},[]),D.jsxs(D.Fragment,{children:[D.jsxs("div",{className:"mt-6",children:[D.jsx("label",{className:"text-xs uppercase text-white-48",children:"Direction"}),D.jsx("div",{className:"mt-2",children:D.jsx(kK,{onChange:h=>l(h),value:o})})]}),D.jsxs("div",{className:"mt-6",children:[D.jsx("label",{className:"text-xs uppercase text-white-48",children:"Speed"}),D.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[D.jsx("div",{className:"grow",children:D.jsx(Qx,{label:"Speed",isGreyedOut:!c,setIsGreyedOut:h=>f(!h),hideLabel:!0,startIcon:D.jsx(eG,{}),deviceId:Number(t),onChange:s,value:i})}),D.jsx("div",{className:ho("w-14 cursor-pointer place-items-center self-stretch rounded-full p-2 py-1 text-center text-xs font-semibold ",c?"bg-white-12 hover:bg-white-24":"bg-white-100 text-black hover:bg-white-90"),onClick:()=>f(h=>!h),children:c?"Pause":"Play"})]})]})]})}function LK({name:t,device:e,device_id:n}){return D.jsx("div",{className:"bg-darkglass overflow-hidden border-b border-white-12",children:D.jsxs("div",{className:"m-auto flex max-w-[393px] justify-between p-6  py-4",children:[D.jsx("div",{className:"flex items-center gap-3",children:D.jsxs("div",{children:[D.jsx("p",{className:"mb-1  text-lg font-semibold leading-none",children:t}),D.jsx("p",{className:"text-xs uppercase text-white-60",children:e.controlMethods.join(", ")})]})}),D.jsx($V,{label:"toggl",isOffline:!1,deviceId:Number(n),isBig:!0})]})})}function FK(){return D.jsx(_U,{children:D.jsx(VA,{children:D.jsx(b$,{children:D.jsx(hU,{children:D.jsx(yA,{path:"/*",element:D.jsx(xK,{})})})})})})}window.location.hash="";function MK(){return D.jsx("div",{className:"App",children:D.jsx(VA,{children:D.jsx(FK,{})})})}zm.createRoot(document.getElementById("root")).render(D.jsx(_e.StrictMode,{children:D.jsx(MK,{})}));
